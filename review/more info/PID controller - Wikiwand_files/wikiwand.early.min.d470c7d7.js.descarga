/* Wikiwand - Minified Early JS */


$.escapeRE=function(e){return e.replace(/([\\{}()|.?*+\-\^$\[\]])/g,"\\$1")};var mediaWiki={msg:function(){},language:{months:{keys:{names:["january","february","march","april","may_long","june","july","august","september","october","november","december"],genitive:["january-gen","february-gen","march-gen","april-gen","may-gen","june-gen","july-gen","august-gen","september-gen","october-gen","november-gen","december-gen"],abbrev:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},names:["January","February","March","April","May","June","July","August","September","October","November","December"],genitive:["January","February","March","April","May","June","July","August","September","October","November","December"],abbrev:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},config:{get:function(e){switch(e){case"wgSeparatorTransformTable":var t=articleData.langCodeUrl;return"fr"==t||"es"==t||"de"==t||"ru"==t||"pl"==t||"pt"==t||"nl"==t||"it"==t||"ar"==t||"hu"==t||"fi"==t?[",\t."," \t,"]:["",""];case"wgDigitTransformTable":return["",""];case"wgDefaultDateFormat":return"dmy";case"wgContentLanguage":return articleData.langCodeUrl;case"tableSorterCollation":return null;default:return""}}}};function Analytics(){var o=-1<window.location.search.indexOf("debug_analytics=1");Analytics.prototype.gaInitialize=function(e){var t,o,i,n,a,r={client:"UA-49207730-1",abTesting:"UA-49207730-5",retention:"UA-49207730-12",boardsAbTest:"UA-49207730-14"};"boards"==e&&(r.client="UA-49207730-13",r.abTesting="UA-49207730-14"),t=window,o=document,i="ga",t.GoogleAnalyticsObject=i,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,n=o.createElement("script"),a=o.getElementsByTagName("script")[0],n.async=1,n.src="//www.google-analytics.com/analytics.js",a.parentNode.insertBefore(n,a);var s=null,l=document.cookie.match(/userID=([^;]+)/);l&&(s=l[1]),s||CURRENT_USER_ID&&(s=CURRENT_USER_ID),console.log("* Analytics: user ID is",s);var c={cookieDomain:"none"},d={cookieDomain:"none",name:"ABtesting"};"boards"==e&&s&&(c.userId=s,d.userId=s),ga("create",r.client,c),ga("create",r.abTesting,d),ga("create",r.boardsAbTest,{cookieDomain:"none",name:"boardsDataProfile"}),ga("require","displayfeatures");var u=-1!==document.cookie.indexOf("wikiwand.extension.installed");!0===u&&(ga("set","campaignMedium","wikiwand-extension"),ga("set","campaignSource","")),"undefined"!=typeof serverData&&serverData.agent&&serverData.agent.iOSWebView||"undefined"!=typeof precache_from_extension&&1==precache_from_extension||"undefined"!=typeof serverData&&serverData.config&&"popup"==serverData.config.source||(ga("send","pageview"),"wikiwand"==e&&s&&(ga("create",r.retention,{cookieDomain:"none",userId:s,name:"retention"}),!0===u&&(ga("set","campaignMedium","wikiwand-extension"),ga("set","campaignSource","")),ga("retention.send","pageview")))},Analytics.prototype.gaEvent=function(e,t,o,i){"undefined"!=typeof ga?ga("send","event",e,t,o,i):window.setTimeout(function(){analytics.gaEvent(e,t,o,i)},500)},Analytics.prototype.gaEventIf=function(e,t,o,i,n){e?(console.log("* Analytics: reporting event: "+t+"/"+o+"/"+(i||"")),Analytics.prototype.gaEvent(t,o,i,n)):console.log("* Analytics: psuedo reporting event: "+t+"/"+o+"/"+(i||""))},Analytics.prototype.gaSetDimension=function(e,t){"undefined"!=typeof ga?ga("set","dimension"+e,t):window.setTimeout(function(){analytics.gaSetDimension(e,t)},500)},Analytics.prototype.gaPageView=function(e){serverData&&serverData.agent&&serverData.agent.iOSWebView||("undefined"!=typeof ga?ga("send","pageview",e):window.setTimeout(function(){analytics.gaPageView(e)},500))},Analytics.prototype.gaVirtualPageView=function(e,t){t=t||"ABtesting",serverData&&serverData.agent&&serverData.agent.iOSWebView||("undefined"!=typeof ga?(o&&console.warn("→→→→→→→→→→ GOOGLE ANALYTICS: "+e),ga(t+".send","pageview",e)):window.setTimeout(function(){analytics.gaVirtualPageView(e)},500))},Analytics.prototype.gaVirtualPageViewIf=function(e,t,o){e?(console.log("* Analytics: reporting virtual pageview: "+t),Analytics.prototype.gaVirtualPageView(t,o)):console.log("* Analytics: psuedo reporting virtual pageview: "+t)}}!function(e,r){"use strict";var o="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var e,t,o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,n=o.length,a={};i<n;i++)if((e=o[i])&&e[1]in r){for(i=0,t=e.length;i<t;i++)a[o[0][i]]=e[i];return a}return!1}(),t={request:function(e){var t=i.requestFullscreen;e=e||r.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[t]():e[t](o&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){r[i.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(){},onerror:function(){},raw:i};i?(Object.defineProperties(t,{isFullscreen:{get:function(){return!!r[i.fullscreenElement]}},element:{enumerable:!0,get:function(){return r[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!r[i.fullscreenEnabled]}}}),r.addEventListener(i.fullscreenchange,function(e){t.onchange.call(t,e)}),r.addEventListener(i.fullscreenerror,function(e){t.onerror.call(t,e)}),e.screenfull=t):e.screenfull=!1}(window,document),function(T,_){var D,c=[];function I(e){var t,o=c.length;for(t=0;t<o;t++)if(c[t].id.toLowerCase()===e.toLowerCase())return c[t];return!1}function d(e){var t=T(e),o=t.data("sortValue");return null!=o?String(o):e?"img"===e.tagName.toLowerCase()?t.attr("alt")||"":T.map(T.makeArray(e.childNodes),function(e){return 1===e.nodeType?d(e):T.text(e)}).join(""):t.text()}function P(e,t,o){for(var i,n=c.length,a=1,r=0,s=0,l=4<t.length?5:t.length;a<n;)if(""!==(i=t[r]&&t[r].cells[o]?T.trim(d(t[r].cells[o])):""))if(c[a].is(i,e)){if(r++,l<=++s)return c[a]}else a++,s=r=0;else++r>t.length&&(r=0,a++);return c[0]}function E(e){var t,o,i,n,a=e.tBodies[0]&&e.tBodies[0].rows.length||0,r=e.tBodies[0].rows[0]&&e.tBodies[0].rows[0].cells.length||0,s=T(e).data("tablesorter").config,l=s.parsers,c={row:[],normalized:[]};for(t=0;t<a;++t)if(n=[],(i=T(e.tBodies[0].rows[t])).hasClass(s.cssChildRow))c.row[c.row.length-1]=c.row[c.row.length-1].add(i);else{for(c.row.push(i),o=0;o<r;++o)n.push(l[o].format(d(i[0].cells[o]),e,i[0].cells[o]));n.push(c.normalized.length),c.normalized.push(n),n=null}return c}function A(e,t){var o,i,n,a,r=t.row,s=t.normalized,l=s.length,c=s[0].length-1,d=document.createDocumentFragment();for(o=0;o<l;o++)for(n=r[i=s[o][c]].length,a=0;a<n;a++)d.appendChild(r[i][a]);e.tBodies[0].appendChild(d),T(e).trigger("sortEnd.tablesorter")}function M(a,r,e){T.each(e,function(n,e){T.each(e,function(o,e){var t=a[n],i=T(t);z(e,r)?T.each(r,function(e,t){if(t[0]===o)return i.data({order:t[1],count:t[1]+1}),!1}):i.data({order:0,count:0})})})}function z(e,t){var o,i=t.length;for(o=0;o<i;o++)if(t[o][0]===e)return!0;return!1}function L(e){var o=[];return T.each(e,function(e,t){void 0!==t&&-1===T.inArray(t,o)&&o.push(t)}),o}function O(e,t,o,i,n,a){t.removeClass(i[0]).removeClass(i[1]).attr("title",n[1]);for(var r=0;r<o.length;r++)t.eq(a[o[r][0]]).addClass(i[o[r][1]]).attr("title",n[o[r][1]])}function l(e,t){return e<t?-1:t<e?1:0}function i(e,t){return t<e?-1:e<t?1:0}function R(e,a,t){var o,r=[],s=a.length;for(o=0;o<s;o++)r[o]=a[o][1]?i:l;return t.normalized.sort(function(e,t){var o,i,n;for(o=0;o<s;o++)if(i=a[o][0],0!==(n=r[o].call(this,e[i],t[i])))return n;return l.call(this,e[e.length-1],t[t.length-1])}),t}function F(e){var i=[];return T.each(e,function(e,t){T.each(t,function(e,t){var o="desc"===t?1:0;i.push([parseInt(e,10),o])})}),i}T.tablesorter={defaultOptions:{cssHeader:"headerSort",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortMultiSortKey:"shiftKey",unsortableClass:"unsortable",parsers:{},cancelSelection:!0,sortList:[],headerList:[],headerToColumns:[],columnToHeader:[]},dateRegex:[],monthNames:{},construct:function(e,C){return e.each(function(e,c){var d,u,p,h,f,t,o,i,n,a,r,s,l,g,m,v,w,y,b,k,x=T(c),S=!0;c.tBodies&&((c.tHead||(function(e){var t,o,i,n=e.find("> tbody > tr");if(e.get(0).tHead||(t=T("<thead>"),n.each(function(){if(T(this).children("td").length)return!1;t.append(this)}),e.find(" > tbody:first").before(t)),!e.get(0).tFoot){for(o=T("<tfoot>"),i=n.length-1;0<=i&&!T(n[i]).children("td").length;i--)o.prepend(T(n[i]));e.append(o)}}(x),c.tHead))&&(x.addClass("jquery-tablesorter"),p=T.extend({},T.tablesorter.defaultOptions,C),T.data(c,"tablesorter",{config:p}),h=[p.cssDesc,p.cssAsc],f=[_.msg("sort-descending"),_.msg("sort-ascending")],o=f,v=T(t=c).data("tablesorter").config,y=w=0,b=T([]),k=T("thead:eq(0) > tr",t),(b=k.length<=1?k.children("th"):(m=[],k.each(function(n,e){T.each(e.cells,function(e,t){var o,i;for(r=Number(t.rowSpan),s=Number(t.colSpan);m[n]&&void 0!==m[n][e];)++e;for(i=e;i<e+s;++i)for(o=n;o<n+r;++o)m[o]||(m[o]=[]),m[o][i]=t})}),T.each(m,function(e,t){l=T(L(t)).filter("th").length,w<=l&&(w=l,g=e)}),T(L(m[g])).filter("th"))).each(function(e){for(a=T(this),i=[],n=0;n<this.colSpan;n++)v.columnToHeader[y+n]=e,i.push(y+n);v.headerToColumns[e]=i,y+=this.colSpan,a.data({headerIndex:e,order:0,count:0}),a.hasClass(v.unsortableClass)&&a.data("sortDisabled",!0),a.data("sortDisabled")||a.addClass(v.cssHeader).prop("tabIndex",0).attr({role:"columnheader button",title:o[1]}),v.headerList[e]=this}),d=b,function(){var e,t,o,i,n="0123456789,.".split(""),a=_.config.get("wgSeparatorTransformTable"),r=_.config.get("wgDigitTransformTable");if(null===a||""===a[0]&&""===r[2])D.transformTable=!1;else for(D.transformTable={},e=a[0].split("\t").concat(r[0].split("\t")),t=a[1].split("\t").concat(r[1].split("\t")),o=0;o<e.length;o++)D.transformTable[t[o]]=e[o],n.push(T.escapeRE(t[o]));i="["+n.join("",n)+"]",D.numberRegex=new RegExp("^([-+−]?[0-9][0-9,]*(\\.[0-9,]*)?(E[-+−]?[0-9][0-9,]*)?|[-+−]?"+i+"+[\\s\\xa0]*%?)$","i")}(),function(){var e,t,o=[];for(D.monthNames={},e=0;e<12;e++)t=_.language.months.names[e].toLowerCase(),D.monthNames[t]=e+1,o.push(T.escapeRE(t)),t=_.language.months.genitive[e].toLowerCase(),D.monthNames[t]=e+1,o.push(T.escapeRE(t)),t=_.language.months.abbrev[e].toLowerCase().replace(".",""),D.monthNames[t]=e+1,o.push(T.escapeRE(t));o=o.join("|"),D.dateRegex[0]=new RegExp(/^\s*(\d{1,2})[\,\.\-\/'\s]{1,2}(\d{1,2})[\,\.\-\/'\s]{1,2}(\d{2,4})\s*?/i),D.dateRegex[1]=new RegExp("^\\s*(\\d{1,2})[\\,\\.\\-\\/'\\s]+("+o+")[\\,\\.\\-\\/'\\s]+(\\d{2,4})\\s*$","i"),D.dateRegex[2]=new RegExp("^\\s*("+o+")[\\,\\.\\-\\/'\\s]+(\\d{1,2})[\\,\\.\\-\\/'\\s]+(\\d{2,4})\\s*$","i")}(),D.rgx||(D.rgx={IPAddress:[new RegExp(/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/)],currency:[new RegExp(/(^[£$€¥]|[£$€¥]$)/),new RegExp(/[£$€¥]/g)],url:[new RegExp(/^(https?|ftp|file):\/\/$/),new RegExp(/(https?|ftp|file):\/\//)],isoDate:[new RegExp(/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/)],usLongDate:[new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/)],time:[new RegExp(/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/)]}),d.not("."+p.unsortableClass).on("keypress click",function(e){var t,o,i,n,a,r,s,l;if("click"===e.type&&"a"===e.target.nodeName.toLowerCase())return!0;if("keypress"===e.type&&13!==e.which)return!0;if(S&&$(),u=E(c),a=x[0].tBodies[0]&&x[0].tBodies[0].rows.length||0,!c.sortDisabled&&0<a){if((t=T(this)).data({order:t.data("count")%2,count:t.data("count")+1}),this,o=p.headerToColumns[t.data("headerIndex")],i=T.map(o,function(e){return[[e,t.data("order")]]}),n=o[0],e[p.sortMultiSortKey])if(z(n,p.sortList))for(r=0;r<p.sortList.length;r++)s=p.sortList[r],l=p.headerList[s[0]],z(s[0],i)&&(T(l).data("count",s[1]+1),s[1]=T(l).data("count")%2);else p.sortList=p.sortList.concat(i);else p.sortList=i;return M(d,p.sortList,p.headerToColumns),O(x[0],d,p.sortList,h,f,p.columnToHeader),A(x[0],R(x[0],p.sortList,u)),!1}}).mousedown(function(){if(p.cancelSelection)return!(this.onselectstart=function(){return!1})}),x.data("tablesorter").sort=function(e){S&&$(),void 0===e?e=p.sortList:0<e.length&&(e=F(e)),M(d,e,p.headerToColumns),u=E(c),O(0,d,e,h,f,p.columnToHeader),A(c,R(0,e,u))},0<p.sortList.length&&($(),p.sortList=F(p.sortList),x.data("tablesorter").sort())));function $(){S=!1,function(){if(D.collationTable=_.config.get("tableSorterCollation"),D.collationRegex=null,D.collationTable){var e,t=[];for(e in D.collationTable)D.collationTable.hasOwnProperty(e)&&t.push(e);t.length&&(D.collationRegex=new RegExp("["+t.join("")+"]","ig"))}}();var e,t=x.find("> tbody > tr.sortbottom");t.length&&((e=x.children("tfoot")).length?e.eq(0).prepend(t):x.append(T("<tfoot>").append(t))),function(e){var t,o,i,n,a,r,s,l,c,d=e.find("> tbody > tr > [rowspan]").get();if(d.length)for(e.find("> tbody > tr").each(function(){var e,t=0,o=this.cells.length;for(e=0;e<o;e++)T(this.cells[e]).data("tablesorter",{realCellIndex:t,realRowIndex:this.rowIndex}),t+=this.cells[e].colSpan}),u();d.length;)for(T.data(d[0],"tablesorter").needResort&&u(),n=d.shift(),a=T.data(n,"tablesorter"),o=n.rowSpan,i=n.colSpan,t=a.realCellIndex,n.rowSpan=1,c=T(n).parent().nextAll(),r=0;r<o-1;r++)s=T(c[r].cells).filter(p),(l=T(n).clone()).data("tablesorter",{realCellIndex:t,realRowIndex:a.realRowIndex+r,needResort:!0}),s.length?(s.each(h),s.first().before(l)):c.eq(r).append(l);function u(){var o,i,n;d=d.sort(function(e,t){return o=T.data(e,"tablesorter"),i=T.data(t,"tablesorter"),(n=o.realCellIndex-i.realCellIndex)||(n=o.realRowIndex-i.realRowIndex),n}),T.each(d,function(){T.data(this,"tablesorter").needResort=!1})}function p(){return T.data(this,"tablesorter").realCellIndex>=t}function h(){T.data(this,"tablesorter").realCellIndex+=i,1<this.rowSpan&&(T.data(this,"tablesorter").needResort=!0)}}(x),p.parsers=function(e,t){var o,i,n,a,r=e.tBodies[0].rows,s=[];if(r[0])for(i=r[0].cells.length,n=0;n<i;n++)a=!1,void 0!==(o=t.eq(n).data("sortType"))&&(a=I(o)),!1===a&&(a=P(e,r,n)),s.push(a);return s}(c,d)}})},addParser:function(e){var t,o=c.length,i=!0;for(t=0;t<o;t++)c[t].id.toLowerCase()===e.id.toLowerCase()&&(i=!1);i&&c.push(e)},formatDigit:function(e){var t,o,i,n;if(!1!==D.transformTable){for(t="",i=0;i<e.length;i++)(o=e.charAt(i))in D.transformTable?t+=D.transformTable[o]:t+=o;e=t}return n=parseFloat(e.replace(/[, ]/g,"").replace("−","-")),isNaN(n)?0:n},formatFloat:function(e){var t=parseFloat(e);return isNaN(t)?0:t},formatInt:function(e){var t=parseInt(e,10);return isNaN(t)?0:t},clearTableBody:function(e){T(e.tBodies[0]).empty()}},D=T.tablesorter,T.fn.tablesorter=function(e){return D.construct(this,e)},D.addParser({id:"text",is:function(){return!0},format:function(e){if(e=T.trim(e.toLowerCase()),D.collationRegex){var t=D.collationTable;e=e.replace(D.collationRegex,function(e){return(t[e]?t[e]:t[e.toUpperCase()]).toLowerCase()})}return e},type:"text"}),D.addParser({id:"IPAddress",is:function(e){return D.rgx.IPAddress[0].test(e)},format:function(e){var t,o,i=e.split("."),n="",a=i.length;for(t=0;t<a;t++)1===(o=i[t]).length?n+="00"+o:2===o.length?n+="0"+o:n+=o;return T.tablesorter.formatFloat(n)},type:"numeric"}),D.addParser({id:"currency",is:function(e){return D.rgx.currency[0].test(e)},format:function(e){return T.tablesorter.formatDigit(e.replace(D.rgx.currency[1],""))},type:"numeric"}),D.addParser({id:"url",is:function(e){return D.rgx.url[0].test(e)},format:function(e){return T.trim(e.replace(D.rgx.url[1],""))},type:"text"}),D.addParser({id:"isoDate",is:function(e){return D.rgx.isoDate[0].test(e)},format:function(e){return T.tablesorter.formatFloat(""!==e?new Date(e.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),D.addParser({id:"usLongDate",is:function(e){return D.rgx.usLongDate[0].test(e)},format:function(e){return T.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),D.addParser({id:"date",is:function(e){return D.dateRegex[0].test(e)||D.dateRegex[1].test(e)||D.dateRegex[2].test(e)},format:function(e){var t,o;if(null!==(t=(e=T.trim(e.toLowerCase())).match(D.dateRegex[0])))if("mdy"===_.config.get("wgDefaultDateFormat")||"en"===_.config.get("wgContentLanguage"))e=[t[3],t[1],t[2]];else{if("dmy"!==_.config.get("wgDefaultDateFormat"))return"99999999";e=[t[3],t[2],t[1]]}else if(null!==(t=e.match(D.dateRegex[1])))e=[t[3],""+D.monthNames[t[2]],t[1]];else{if(null===(t=e.match(D.dateRegex[2])))return"99999999";e=[t[3],""+D.monthNames[t[1]],t[2]]}for(1===e[1].length&&(e[1]="0"+e[1]),1===e[2].length&&(e[2]="0"+e[2]),(o=parseInt(e[0],10))<100&&(e[0]=o<30?2e3+o:1900+o);e[0].length<4;)e[0]="0"+e[0];return parseInt(e.join(""),10)},type:"numeric"}),D.addParser({id:"time",is:function(e){return D.rgx.time[0].test(e)},format:function(e){return T.tablesorter.formatFloat(new Date("2000/01/01 "+e).getTime())},type:"numeric"}),D.addParser({id:"number",is:function(e){return T.tablesorter.numberRegex.test(T.trim(e))},format:function(e){return T.tablesorter.formatDigit(e)},type:"numeric"})}(jQuery,mediaWiki),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var y=!1,b=!1,k=0,d=2e3,x=0,S=e,t=["ms","moz","webkit","o"],u=window.requestAnimationFrame||!1,p=window.cancelAnimationFrame||!1;if(!u)for(var o in t){var i=t[o];u||(u=window[i+"RequestAnimationFrame"]),p||(p=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"])}var n,a,$=window.MutationObserver||window.WebKitMutationObserver||!1,h={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:(n=document.getElementsByTagName("script"),a=n[n.length-1].src.split("?")[0],0<a.split("/").length?a.split("/").slice(0,-1).join("/")+"/":"")},f=!1,r=function(e,t){function o(){var e=v.doc.css(w.trstyle);return!(!e||"matrix"!=e.substr(0,6))&&e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function r(e,t,o){var i=e.css(t),n=parseFloat(i);if(isNaN(n)){var a=3==(n=c[i]||0)?o?v.win.outerHeight()-v.win.innerHeight():v.win.outerWidth()-v.win.innerWidth():1;return v.isie8&&n&&(n+=1),a?n:0}return n}function s(o,i,n,e){v._bind(o,i,function(e){var t={original:e=e||window.event,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},stopImmediatePropagation:function(){e.stopImmediatePropagation?e.stopImmediatePropagation():e.cancelBubble=!0}};return"mousewheel"==i?(t.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX)):t.deltaY=e.detail,n.call(o,t)},e)}function n(e,t,o){var i,n;if(0==e.deltaMode?(i=-Math.floor(e.deltaX*(v.opt.mousescrollstep/54)),n=-Math.floor(e.deltaY*(v.opt.mousescrollstep/54))):1==e.deltaMode&&(i=-Math.floor(e.deltaX*v.opt.mousescrollstep),n=-Math.floor(e.deltaY*v.opt.mousescrollstep)),t&&v.opt.oneaxismousemode&&0==i&&n&&(i=n,n=0),i&&(v.scrollmom&&v.scrollmom.stop(),v.lastdeltax+=i,v.debounced("mousewheelx",function(){var e=v.lastdeltax;v.lastdeltax=0,v.rail.drag||v.doScrollLeftBy(e)},15)),n){if(v.opt.nativeparentscrolling&&o&&!v.ispage&&!v.zoomactive)if(n<0){if(v.getScrollTop()>=v.page.maxh)return!0}else if(v.getScrollTop()<=0)return!0;v.scrollmom&&v.scrollmom.stop(),v.lastdeltay+=n,v.debounced("mousewheely",function(){var e=v.lastdeltay;v.lastdeltay=0,v.rail.drag||v.doScrollBy(e)},15)}return e.stopImmediatePropagation(),e.preventDefault()}var v=this;if(this.version="3.5.6",this.name="nicescroll",this.me=t,this.opt={doc:S("body"),win:!1},S.extend(this.opt,h),this.opt.snapbackspeed=80,e)for(var i in v.opt)void 0!==e[i]&&(v.opt[i]=e[i]);for(this.doc=v.opt.doc,this.iddoc=this.doc&&this.doc[0]&&this.doc[0].id||"",this.ispage=/^BODY|HTML/.test(v.opt.win?v.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==v.opt.win,this.win=v.opt.win||(this.ispage?S(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?S(window):this.win,this.body=S("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=v.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode="auto"==this.opt.rtlmode?"rtl"==(this.win[0]==window?this.body:this.win).css("direction"):!0===this.opt.rtlmode,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;this.id="ascrail"+d++,document.getElementById(this.id););this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=v.opt.overflowx,this.overflowy=v.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=function(){if(f)return f;var i=document.createElement("DIV"),n={};n.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,n.isopera="opera"in window,n.isopera12=n.isopera&&"getUserMedia"in navigator,n.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),n.isie="all"in document&&"attachEvent"in i&&!n.isopera,n.isieold=n.isie&&!("msInterpolationMode"in i.style),n.isie7=!(!n.isie||n.isieold||"documentMode"in document&&7!=document.documentMode),n.isie8=n.isie&&"documentMode"in document&&8==document.documentMode,n.isie9=n.isie&&"performance"in window&&9<=document.documentMode,n.isie10=n.isie&&"performance"in window&&10<=document.documentMode,n.isie9mobile=/iemobile.9/i.test(navigator.userAgent),n.isie9mobile&&(n.isie9=!1),n.isie7mobile=!n.isie9mobile&&n.isie7&&/iemobile/i.test(navigator.userAgent),n.ismozilla="MozAppearance"in i.style,n.iswebkit="WebkitAppearance"in i.style,n.ischrome="chrome"in window,n.ischrome22=n.ischrome&&n.haspointerlock,n.ischrome26=n.ischrome&&"transition"in i.style,n.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,n.hasmstouch=window.navigator.msPointerEnabled||!1,n.ismac=/^mac$/i.test(navigator.platform),n.isios=n.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),n.isios4=n.isios&&!("seal"in Object),n.isandroid=/android/i.test(navigator.userAgent),n.trstyle=!1,n.hastransform=!1,n.hastranslate3d=!1,n.transitionstyle=!1,n.hastransition=!1,n.transitionend=!1;for(var e=["transform","msTransform","webkitTransform","MozTransform","OTransform"],t=0;t<e.length;t++)if(void 0!==i.style[e[t]]){n.trstyle=e[t];break}n.hastransform=0!=n.trstyle,n.hastransform&&(i.style[n.trstyle]="translate3d(1px,2px,3px)",n.hastranslate3d=/translate3d/.test(i.style[n.trstyle])),n.transitionstyle=!1,n.prefixstyle="",n.transitionend=!1;e=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"];var o=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],a=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"];for(t=0;t<e.length;t++)if(e[t]in i.style){n.transitionstyle=e[t],n.prefixstyle=o[t],n.transitionend=a[t];break}return n.ischrome26&&(n.prefixstyle=o[1]),n.hastransition=n.transitionstyle,n.cursorgrabvalue=function(){var e=["-moz-grab","-webkit-grab","grab"];(n.ischrome&&!n.ischrome22||n.isie)&&(e=[]);for(var t=0;t<e.length;t++){var o=e[t];if(i.style.cursor=o,i.style.cursor==o)return o}return"url(//mail.google.com/mail/images/2/openhand.cur),n-resize"}(),n.hasmousecapture="setCapture"in i,n.hasMutationObserver=!1!==$,i=null,f=n}();var w=S.extend({},this.detected);this.canhwscroll=w.hastransform&&v.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&v.haswrapper,this.istouchcapable=!1,w.cantouch&&w.iswebkit&&!w.isios&&!w.isandroid&&(this.istouchcapable=!0,w.cantouch=!1),w.cantouch&&w.ismozilla&&!w.isios&&!w.isandroid&&(this.istouchcapable=!0,w.cantouch=!1),v.opt.enablemouselockapi||(w.hasmousecapture=!1,w.haspointerlock=!1),this.delayed=function(e,t,o,i){var n=v.delaylist[e],a=(new Date).getTime();return!(!i&&n&&n.tt)&&(n&&n.tt&&clearTimeout(n.tt),void(n&&n.last+o>a&&!n.tt?v.delaylist[e]={last:a+o,tt:setTimeout(function(){v&&(v.delaylist[e].tt=0,t.call())},o)}:n&&n.tt||(v.delaylist[e]={last:a,tt:0},setTimeout(function(){t.call()},0))))};var a=!(this.debounced=function(t,e,o){var i=v.delaylist[t];(new Date).getTime(),v.delaylist[t]=e,i||setTimeout(function(){var e=v.delaylist[t];v.delaylist[t]=!1,e.call()},o)});if(this.synched=function(t,e){return v.synclist[t]=e,a||(u(function(){for(t in a=!1,v.synclist){var e=v.synclist[t];e&&e.call(v),v.synclist[t]=!1}}),a=!0),t},this.unsynched=function(e){v.synclist[e]&&(v.synclist[e]=!1)},this.css=function(e,t){for(var o in t)v.saved.css.push([e,o,e.css(o)]),e.css(o,t[o])},this.scrollTop=function(e){return void 0===e?v.getScrollTop():v.setScrollTop(e)},this.scrollLeft=function(e){return void 0===e?v.getScrollLeft():v.setScrollLeft(e)},BezierClass=function(e,t,o,i,n,a,r){this.st=e,this.ed=t,this.spd=o,this.p1=i||0,this.p2=n||1,this.p3=a||0,this.p4=r||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=1-((new Date).getTime()-this.ts)/this.spd,t=this.B2(e)+this.B3(e)+this.B4(e);return e<0?this.ed:this.st+Math.round(this.df*t)},update:function(e,t){return this.st=this.getNow(),this.ed=e,this.spd=t,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},w.hastranslate3d&&w.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(e){if(!e){var t=o();if(t)return 16==t.length?-t[13]:-t[5];if(v.timerscroll&&v.timerscroll.bz)return v.timerscroll.bz.getNow()}return v.doc.translate.y},this.getScrollLeft=function(e){if(!e){var t=o();if(t)return 16==t.length?-t[12]:-t[4];if(v.timerscroll&&v.timerscroll.bh)return v.timerscroll.bh.getNow()}return v.doc.translate.x},this.notifyScrollEvent=document.createEvent?function(e){var t=document.createEvent("UIEvents");t.initUIEvent("scroll",!1,!0,window,1),e.dispatchEvent(t)}:document.fireEvent?function(e){var t=document.createEventObject();e.fireEvent("onscroll"),t.cancelBubble=!0}:function(){};var l=this.isrtlmode?1:-1;w.hastranslate3d&&v.opt.enabletranslate3d?(this.setScrollTop=function(e,t){v.doc.translate.y=e,v.doc.translate.ty=-1*e+"px",v.doc.css(w.trstyle,"translate3d("+v.doc.translate.tx+","+v.doc.translate.ty+",0px)"),t||v.notifyScrollEvent(v.win[0])},this.setScrollLeft=function(e,t){v.doc.translate.x=e,v.doc.translate.tx=e*l+"px",v.doc.css(w.trstyle,"translate3d("+v.doc.translate.tx+","+v.doc.translate.ty+",0px)"),t||v.notifyScrollEvent(v.win[0])}):(this.setScrollTop=function(e,t){v.doc.translate.y=e,v.doc.translate.ty=-1*e+"px",v.doc.css(w.trstyle,"translate("+v.doc.translate.tx+","+v.doc.translate.ty+")"),t||v.notifyScrollEvent(v.win[0])},this.setScrollLeft=function(e,t){v.doc.translate.x=e,v.doc.translate.tx=e*l+"px",v.doc.css(w.trstyle,"translate("+v.doc.translate.tx+","+v.doc.translate.ty+")"),t||v.notifyScrollEvent(v.win[0])})}else this.getScrollTop=function(){return v.docscroll.scrollTop()},this.setScrollTop=function(e){return v.docscroll.scrollTop(e)},this.getScrollLeft=function(){return v.detected.ismozilla&&v.isrtlmode?Math.abs(v.docscroll.scrollLeft()):v.docscroll.scrollLeft()},this.setScrollLeft=function(e){return v.docscroll.scrollLeft(v.detected.ismozilla&&v.isrtlmode?-e:e)};this.getTarget=function(e){return!!e&&(e.target?e.target:!!e.srcElement&&e.srcElement)},this.hasParent=function(e,t){if(!e)return!1;for(var o=e.target||e.srcElement||e||!1;o&&o.id!=t;)o=o.parentNode||!1;return!1!==o};var c={thin:1,medium:3,thick:5};this.getOffset=function(){if(v.isfixed)return{top:parseFloat(v.win.css("top")),left:parseFloat(v.win.css("left"))};if(!v.viewport)return v.win.offset();var e=v.win.offset(),t=v.viewport.offset();return{top:e.top-t.top+v.viewport.scrollTop(),left:e.left-t.left+v.viewport.scrollLeft()}},this.updateScrollBar=function(e){if(v.ishwscroll)v.rail.css({height:v.win.innerHeight()}),v.railh&&v.railh.css({width:v.win.innerWidth()});else{var t=v.getOffset();if((i={top:t.top,left:t.left}).top+=r(v.win,"border-top-width",!0),v.win.outerWidth(),v.win.innerWidth(),i.left+=v.rail.align?v.win.outerWidth()-r(v.win,"border-right-width")-v.rail.width:r(v.win,"border-left-width"),(o=v.opt.railoffset)&&(o.top&&(i.top+=o.top),v.rail.align&&o.left&&(i.left+=o.left)),v.locked||v.rail.css({top:i.top,left:i.left,height:e?e.h:v.win.innerHeight()}),v.zoom&&v.zoom.css({top:i.top+1,left:1==v.rail.align?i.left-20:i.left+v.rail.width+4}),v.railh&&!v.locked){var o,i={top:t.top,left:t.left};(o=v.opt.railhoffset)&&(o.top&&(i.top+=o.top),o.left&&(i.left+=o.left));var n=v.railh.align?i.top+r(v.win,"border-top-width",!0)+v.win.innerHeight()-v.railh.height:i.top+r(v.win,"border-top-width",!0),a=i.left+r(v.win,"border-left-width");v.railh.css({top:n,left:a,width:v.railh.width})}}},this.doRailClick=function(e,t,o){var i,n,a,r;v.locked||(v.cancelEvent(e),t?(i=o?v.doScrollLeft:v.doScrollTop)(a=o?(e.pageX-v.railh.offset().left-v.cursorwidth/2)*v.scrollratio.x:(e.pageY-v.rail.offset().top-v.cursorheight/2)*v.scrollratio.y):(i=o?v.doScrollLeftBy:v.doScrollBy,a=o?v.scroll.x:v.scroll.y,r=o?e.pageX-v.railh.offset().left:e.pageY-v.rail.offset().top,n=o?v.view.w:v.view.h,i(r<=a?n:-n)))},v.hasanimationframe=u,v.hascancelanimationframe=p,v.hasanimationframe?v.hascancelanimationframe||(p=function(){v.cancelAnimationFrame=!0}):(u=function(e){return setTimeout(e,15-Math.floor(+new Date/1e3)%16)},p=clearInterval),this.init=function(){function e(){v.iframexd=!1;try{var t="contentDocument"in this?this.contentDocument:this.contentWindow.document;t.domain}catch(e){t=!(v.iframexd=!0)}if(v.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(v.forcescreen=!0,v.isiframe&&(v.iframe={doc:S(t),html:v.doc.contents().find("html")[0],body:v.doc.contents().find("body")[0]},v.getContentSize=function(){return{w:Math.max(v.iframe.html.scrollWidth,v.iframe.body.scrollWidth),h:Math.max(v.iframe.html.scrollHeight,v.iframe.body.scrollHeight)}},v.docscroll=S(v.iframe.body)),!w.isios&&v.opt.iframeautoresize&&!v.isiframe){v.win.scrollTop(0),v.doc.height("");var e=Math.max(t.getElementsByTagName("html")[0].scrollHeight,t.body.scrollHeight);v.doc.height(e)}v.lazyResize(30),w.isie7&&v.css(S(v.iframe.html),{"overflow-y":"hidden"}),v.css(S(v.iframe.body),{"overflow-y":"hidden"}),w.isios&&v.haswrapper&&v.css(S(t.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?v.bind(this.contentWindow,"scroll",v.onscroll):v.bind(t,"scroll",v.onscroll),v.opt.enablemousewheel&&v.bind(t,"mousewheel",v.onmousewheel),v.opt.enablekeyboard&&v.bind(t,w.isopera?"keypress":"keydown",v.onkeypress),(w.cantouch||v.opt.touchbehavior)&&(v.bind(t,"mousedown",v.ontouchstart),v.bind(t,"mousemove",function(e){v.ontouchmove(e,!0)}),v.opt.grabcursorenabled&&w.cursorgrabvalue&&v.css(S(t.body),{cursor:w.cursorgrabvalue})),v.bind(t,"mouseup",v.ontouchend),v.zoom&&(v.opt.dblclickzoom&&v.bind(t,"dblclick",v.doZoom),v.ongesturezoom&&v.bind(t,"gestureend",v.ongesturezoom))}if(v.saved.css=[],w.isie7mobile)return!0;if(w.isoperamini)return!0;if(w.hasmstouch&&v.css(v.ispage?S("html"):v.win,{"-ms-touch-action":"none"}),v.zindex="auto",v.zindex=v.ispage||"auto"!=v.opt.zindex?v.opt.zindex:function(){var e=v.win;if("zIndex"in e)return e.zIndex();for(;0<e.length;){if(9==e[0].nodeType)return!1;var t=e.css("zIndex");if(!isNaN(t)&&0!=t)return parseInt(t);e=e.parent()}return!1}()||"auto",v.ispage||"auto"==v.zindex||v.zindex>x&&(x=v.zindex),v.isie&&0==v.zindex&&"auto"==v.opt.zindex&&(v.zindex="auto"),!v.ispage||!w.cantouch&&!w.isieold&&!w.isie9mobile){var t=v.docscroll;v.ispage&&(t=v.haswrapper?v.win:v.doc),w.isie9mobile||v.css(t,{"overflow-y":"hidden"}),v.ispage&&w.isie7&&("BODY"==v.doc[0].nodeName?v.css(S("html"),{"overflow-y":"hidden"}):"HTML"==v.doc[0].nodeName&&v.css(S("body"),{"overflow-y":"hidden"})),!w.isios||v.ispage||v.haswrapper||v.css(S("body"),{"-webkit-overflow-scrolling":"touch"}),(l=S(document.createElement("div"))).css({position:"relative",top:0,float:"right",width:v.opt.cursorwidth,height:"0px","background-color":v.opt.cursorcolor,border:v.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":v.opt.cursorborderradius,"-moz-border-radius":v.opt.cursorborderradius,"border-radius":v.opt.cursorborderradius}),l.hborder=parseFloat(l.outerHeight()-l.innerHeight()),v.cursor=l;var o=S(document.createElement("div"));o.attr("id",v.id),o.addClass("nicescroll-rails");var i,n,a=["left","right"];for(var r in a)n=a[r],(i=v.opt.railpadding[n])?o.css("padding-"+n,i+"px"):v.opt.railpadding[n]=0;o.append(l),o.width=Math.max(parseFloat(v.opt.cursorwidth),l.outerWidth())+v.opt.railpadding.left+v.opt.railpadding.right,o.css({width:o.width+"px",zIndex:v.zindex,background:v.opt.background,cursor:"default"}),o.visibility=!0,o.scrollable=!0,o.align="left"==v.opt.railalign?0:1,v.rail=o;var s=v.rail.drag=!1;if(!v.opt.boxzoom||v.ispage||w.isieold||(s=document.createElement("div"),v.bind(s,"click",v.doZoom),v.zoom=S(s),v.zoom.css({cursor:"pointer","z-index":v.zindex,backgroundImage:"url("+v.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),v.opt.dblclickzoom&&v.bind(v.win,"dblclick",v.doZoom),w.cantouch&&v.opt.gesturezoom&&(v.ongesturezoom=function(e){return 1.5<e.scale&&v.doZoomIn(e),e.scale<.8&&v.doZoomOut(e),v.cancelEvent(e)},v.bind(v.win,"gestureend",v.ongesturezoom))),v.railh=!1,v.opt.horizrailenabled){var l;v.css(t,{"overflow-x":"hidden"}),(l=S(document.createElement("div"))).css({position:"absolute",top:0,height:v.opt.cursorwidth,width:"0px","background-color":v.opt.cursorcolor,border:v.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":v.opt.cursorborderradius,"-moz-border-radius":v.opt.cursorborderradius,"border-radius":v.opt.cursorborderradius}),l.wborder=parseFloat(l.outerWidth()-l.innerWidth()),v.cursorh=l;var c=S(document.createElement("div"));c.attr("id",v.id+"-hr"),c.addClass("nicescroll-rails"),c.height=Math.max(parseFloat(v.opt.cursorwidth),l.outerHeight()),c.css({height:c.height+"px",zIndex:v.zindex,background:v.opt.background}),c.append(l),c.visibility=!0,c.scrollable=!0,c.align="top"==v.opt.railvalign?0:1,v.railh=c,v.railh.drag=!1}if(v.ispage)o.css({position:"fixed",top:"0px",height:"100%"}),o.css(o.align?{right:"0px"}:{left:"0px"}),v.body.append(o),v.railh&&(c.css({position:"fixed",left:"0px",width:"100%"}),c.css(c.align?{bottom:"0px"}:{top:"0px"}),v.body.append(c));else{if(v.ishwscroll){"static"==v.win.css("position")&&v.css(v.win,{position:"relative"});var d="HTML"==v.win[0].nodeName?v.body:v.win;v.zoom&&(v.zoom.css({position:"absolute",top:1,right:0,"margin-right":o.width+4}),d.append(v.zoom)),o.css({position:"absolute",top:0}),o.css(o.align?{right:0}:{left:0}),d.append(o),c&&(c.css({position:"absolute",left:0,bottom:0}),c.css(c.align?{bottom:0}:{top:0}),d.append(c))}else{v.isfixed="fixed"==v.win.css("position");var u=v.isfixed?"fixed":"absolute";v.isfixed||(v.viewport=v.getViewport(v.win[0])),v.viewport&&(v.body=v.viewport,0==/fixed|relative|absolute/.test(v.viewport.css("position"))&&v.css(v.viewport,{position:"relative"})),o.css({position:u}),v.zoom&&v.zoom.css({position:u}),v.updateScrollBar(),v.body.append(o),v.zoom&&v.body.append(v.zoom),v.railh&&(c.css({position:u}),v.body.append(c))}w.isios&&v.css(v.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),w.isie&&v.opt.disableoutline&&v.win.attr("hideFocus","true"),w.iswebkit&&v.opt.disableoutline&&v.win.css({outline:"none"})}if(!1===v.opt.autohidemode?(v.autohidedom=!1,v.rail.css({opacity:v.opt.cursoropacitymax}),v.railh&&v.railh.css({opacity:v.opt.cursoropacitymax})):!0===v.opt.autohidemode||"leave"===v.opt.autohidemode?(v.autohidedom=S().add(v.rail),w.isie8&&(v.autohidedom=v.autohidedom.add(v.cursor)),v.railh&&(v.autohidedom=v.autohidedom.add(v.railh)),v.railh&&w.isie8&&(v.autohidedom=v.autohidedom.add(v.cursorh))):"scroll"==v.opt.autohidemode?(v.autohidedom=S().add(v.rail),v.railh&&(v.autohidedom=v.autohidedom.add(v.railh))):"cursor"==v.opt.autohidemode?(v.autohidedom=S().add(v.cursor),v.railh&&(v.autohidedom=v.autohidedom.add(v.cursorh))):"hidden"==v.opt.autohidemode&&(v.autohidedom=!1,v.hide(),v.locked=!1),w.isie9mobile){v.scrollmom=new C(v),v.onmangotouch=function(){var e=v.getScrollTop(),t=v.getScrollLeft();if(e==v.scrollmom.lastscrolly&&t==v.scrollmom.lastscrollx)return!0;var o=e-v.mangotouch.sy,i=t-v.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(o,2)))){var n=o<0?-1:1,a=i<0?-1:1,r=+new Date;if(v.mangotouch.lazy&&clearTimeout(v.mangotouch.lazy),80<r-v.mangotouch.tm||v.mangotouch.dry!=n||v.mangotouch.drx!=a)v.scrollmom.stop(),v.scrollmom.reset(t,e),v.mangotouch.sy=e,v.mangotouch.ly=e,v.mangotouch.sx=t,v.mangotouch.lx=t,v.mangotouch.dry=n,v.mangotouch.drx=a,v.mangotouch.tm=r;else{v.scrollmom.stop(),v.scrollmom.update(v.mangotouch.sx-i,v.mangotouch.sy-o),v.mangotouch.tm,v.mangotouch.tm=r;var s=Math.max(Math.abs(v.mangotouch.ly-e),Math.abs(v.mangotouch.lx-t));v.mangotouch.ly=e,v.mangotouch.lx=t,2<s&&(v.mangotouch.lazy=setTimeout(function(){v.mangotouch.lazy=!1,v.mangotouch.dry=0,v.mangotouch.drx=0,v.mangotouch.tm=0,v.scrollmom.doMomentum(30)},100))}}};var p=v.getScrollTop(),h=v.getScrollLeft();v.mangotouch={sy:p,ly:p,dry:0,sx:h,lx:h,drx:0,lazy:!1,tm:0},v.bind(v.docscroll,"scroll",v.onmangotouch)}else{if(w.cantouch||v.istouchcapable||v.opt.touchbehavior||w.hasmstouch){v.scrollmom=new C(v),v.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(v.hasmoving=!1,!v.locked){if(w.hasmstouch)for(var t=!!e.target&&e.target;t;){var o=S(t).getNiceScroll();if(0<o.length&&o[0].me==v.me)break;if(0<o.length)return!1;if("DIV"==t.nodeName&&t.id==v.id)break;t=!!t.parentNode&&t.parentNode}if(v.cancelScroll(),t=v.getTarget(e))if(/INPUT/i.test(t.nodeName)&&/range/i.test(t.type))return v.stopPropagation(e);if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),v.forcescreen){var i=e;(e={original:e.original?e.original:e}).clientX=i.screenX,e.clientY=i.screenY}if(v.rail.drag={x:e.clientX,y:e.clientY,sx:v.scroll.x,sy:v.scroll.y,st:v.getScrollTop(),sl:v.getScrollLeft(),pt:2,dl:!1},v.ispage||!v.opt.directionlockdeadzone)v.rail.drag.dl="f";else{var n=S(window).width(),a=S(window).height(),r=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),s=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),l=Math.max(0,s-a),c=Math.max(0,r-n);v.rail.drag.ck=!v.rail.scrollable&&v.railh.scrollable?0<l&&"v":!!(v.rail.scrollable&&!v.railh.scrollable&&0<c)&&"h",v.rail.drag.ck||(v.rail.drag.dl="f")}if(v.opt.touchbehavior&&v.isiframe&&w.isie){var d=v.win.position();v.rail.drag.x+=d.left,v.rail.drag.y+=d.top}if(v.hasmoving=!1,v.lastmouseup=!1,v.scrollmom.reset(e.clientX,e.clientY),!w.cantouch&&!this.istouchcapable&&!w.hasmstouch){if(!(!!t&&/INPUT|SELECT|TEXTAREA/i.test(t.nodeName)))return!v.ispage&&w.hasmousecapture&&t.setCapture(),v.opt.touchbehavior?(t.onclick&&!t._onclick&&(t._onclick=t.onclick,t.onclick=function(e){return!v.hasmoving&&void t._onclick.call(this,e)}),v.cancelEvent(e)):v.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test(S(t).attr("type"))&&(pc={tg:t,click:!1},v.preventclick=pc)}}},v.ontouchend=function(e){return(!e.pointerType||2==e.pointerType||"touch"==e.pointerType)&&(v.rail.drag&&2==v.rail.drag.pt&&(v.scrollmom.doMomentum(),v.rail.drag=!1,v.hasmoving&&(v.lastmouseup=!0,v.hideCursor(),w.hasmousecapture&&document.releaseCapture(),!w.cantouch))?v.cancelEvent(e):void 0)};var g=v.opt.touchbehavior&&v.isiframe&&!w.hasmousecapture;v.ontouchmove=function(e,t){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(v.rail.drag&&2==v.rail.drag.pt){if(w.cantouch&&void 0===e.original)return!0;if(v.hasmoving=!0,v.preventclick&&!v.preventclick.click&&(v.preventclick.click=v.preventclick.tg.onclick||!1,v.preventclick.tg.onclick=v.onpreventclick),"changedTouches"in(e=S.extend({original:e},e))&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),v.forcescreen){var o=e;(e={original:e.original?e.original:e}).clientX=o.screenX,e.clientY=o.screenY}var i=ofy=0;if(g&&!t){var n=v.win.position();i=-n.left,ofy=-n.top}var a=e.clientY+ofy,r=a-v.rail.drag.y,s=e.clientX+i,l=s-v.rail.drag.x,c=v.rail.drag.st-r;if(v.ishwscroll&&v.opt.bouncescroll?c<0?c=Math.round(c/2):c>v.page.maxh&&(c=v.page.maxh+Math.round((c-v.page.maxh)/2)):(c<0&&(a=c=0),c>v.page.maxh&&(c=v.page.maxh,a=0)),v.railh&&v.railh.scrollable){var d=v.isrtlmode?l-v.rail.drag.sl:v.rail.drag.sl-l;v.ishwscroll&&v.opt.bouncescroll?d<0?d=Math.round(d/2):d>v.page.maxw&&(d=v.page.maxw+Math.round((d-v.page.maxw)/2)):(d<0&&(s=d=0),d>v.page.maxw&&(d=v.page.maxw,s=0))}var u=!1;if(v.rail.drag.dl)u=!0,"v"==v.rail.drag.dl?d=v.rail.drag.sl:"h"==v.rail.drag.dl&&(c=v.rail.drag.st);else{var p=Math.abs(r),h=Math.abs(l),f=v.opt.directionlockdeadzone;if("v"==v.rail.drag.ck){if(f<p&&h<=.3*p)return!(v.rail.drag=!1);f<h&&(v.rail.drag.dl="f",S("body").scrollTop(S("body").scrollTop()))}else if("h"==v.rail.drag.ck){if(f<h&&p<=.3*h)return!(v.rail.drag=!1);f<p&&(v.rail.drag.dl="f",S("body").scrollLeft(S("body").scrollLeft()))}}if(v.synched("touchmove",function(){v.rail.drag&&2==v.rail.drag.pt&&(v.prepareTransition&&v.prepareTransition(0),v.rail.scrollable&&v.setScrollTop(c),v.scrollmom.update(s,a),v.railh&&v.railh.scrollable?(v.setScrollLeft(d),v.showCursor(c,d)):v.showCursor(c),w.isie10&&document.selection.clear())}),w.ischrome&&v.istouchcapable&&(u=!1),u)return v.cancelEvent(e)}}}v.onmousedown=function(e,t){if(!v.rail.drag||1==v.rail.drag.pt){if(v.locked)return v.cancelEvent(e);v.cancelScroll(),v.rail.drag={x:e.clientX,y:e.clientY,sx:v.scroll.x,sy:v.scroll.y,pt:1,hr:!!t};var o=v.getTarget(e);return!v.ispage&&w.hasmousecapture&&o.setCapture(),v.isiframe&&!w.hasmousecapture&&(v.saved.csspointerevents=v.doc.css("pointer-events"),v.css(v.doc,{"pointer-events":"none"})),v.hasmoving=!1,v.cancelEvent(e)}},v.onmouseup=function(e){if(v.rail.drag){if(w.hasmousecapture&&document.releaseCapture(),v.isiframe&&!w.hasmousecapture&&v.doc.css("pointer-events",v.saved.csspointerevents),1!=v.rail.drag.pt)return;return v.rail.drag=!1,v.hasmoving&&v.triggerScrollEnd(),v.cancelEvent(e)}},v.onmousemove=function(e){if(v.rail.drag){if(1!=v.rail.drag.pt)return;if(w.ischrome&&0==e.which)return v.onmouseup(e);if(v.cursorfreezed=!0,v.hasmoving=!0,v.rail.drag.hr){v.scroll.x=v.rail.drag.sx+(e.clientX-v.rail.drag.x),v.scroll.x<0&&(v.scroll.x=0);var t=v.scrollvaluemaxw;v.scroll.x>t&&(v.scroll.x=t)}else{v.scroll.y=v.rail.drag.sy+(e.clientY-v.rail.drag.y),v.scroll.y<0&&(v.scroll.y=0);var o=v.scrollvaluemax;v.scroll.y>o&&(v.scroll.y=o)}return v.synched("mousemove",function(){v.rail.drag&&1==v.rail.drag.pt&&(v.showCursor(),v.rail.drag.hr?v.doScrollLeft(Math.round(v.scroll.x*v.scrollratio.x),v.opt.cursordragspeed):v.doScrollTop(Math.round(v.scroll.y*v.scrollratio.y),v.opt.cursordragspeed))}),v.cancelEvent(e)}},w.cantouch||v.opt.touchbehavior?(v.onpreventclick=function(e){return v.preventclick?(v.preventclick.tg.onclick=v.preventclick.click,v.preventclick=!1,v.cancelEvent(e)):void 0},v.bind(v.win,"mousedown",v.ontouchstart),v.onclick=!w.isios&&function(e){return!v.lastmouseup||(v.lastmouseup=!1,v.cancelEvent(e))},v.opt.grabcursorenabled&&w.cursorgrabvalue&&(v.css(v.ispage?v.doc:v.win,{cursor:w.cursorgrabvalue}),v.css(v.rail,{cursor:w.cursorgrabvalue}))):(v.hasTextSelected="getSelection"in document?function(){return 0<document.getSelection().rangeCount}:"selection"in document?function(){return"None"!=document.selection.type}:function(){return!1},v.onselectionstart=function(){v.ispage||(v.selectiondrag=v.win.offset())},v.onselectionend=function(){v.selectiondrag=!1},v.onselectiondrag=function(e){v.selectiondrag&&v.hasTextSelected()&&v.debounced("selectionscroll",function(){!function e(t){if(v.selectiondrag){if(t){var o=v.win.outerHeight(),i=t.pageY-v.selectiondrag.top;0<i&&i<o&&(i=0),o<=i&&(i-=o),v.selectiondrag.df=i}if(0!=v.selectiondrag.df){var n=2*-Math.floor(v.selectiondrag.df/6);v.doScrollBy(n),v.debounced("doselectionscroll",function(){e()},50)}}}(e)},250)}),w.hasmstouch&&(v.css(v.rail,{"-ms-touch-action":"none"}),v.css(v.cursor,{"-ms-touch-action":"none"}),v.bind(v.win,"MSPointerDown",v.ontouchstart),v.bind(document,"MSPointerUp",v.ontouchend),v.bind(document,"MSPointerMove",v.ontouchmove),v.bind(v.cursor,"MSGestureHold",function(e){e.preventDefault()}),v.bind(v.cursor,"contextmenu",function(e){e.preventDefault()})),this.istouchcapable&&(v.bind(v.win,"touchstart",v.ontouchstart),v.bind(document,"touchend",v.ontouchend),v.bind(document,"touchcancel",v.ontouchend),v.bind(document,"touchmove",v.ontouchmove)),v.bind(v.cursor,"mousedown",v.onmousedown),v.bind(v.cursor,"mouseup",v.onmouseup),v.railh&&(v.bind(v.cursorh,"mousedown",function(e){v.onmousedown(e,!0)}),v.bind(v.cursorh,"mouseup",v.onmouseup)),(v.opt.cursordragontouch||!w.cantouch&&!v.opt.touchbehavior)&&(v.rail.css({cursor:"default"}),v.railh&&v.railh.css({cursor:"default"}),v.jqbind(v.rail,"mouseenter",function(){return!!v.win.is(":visible")&&(v.canshowonmouseevent&&v.showCursor(),void(v.rail.active=!0))}),v.jqbind(v.rail,"mouseleave",function(){v.rail.active=!1,v.rail.drag||v.hideCursor()}),v.opt.sensitiverail&&(v.bind(v.rail,"click",function(e){v.doRailClick(e,!1,!1)}),v.bind(v.rail,"dblclick",function(e){v.doRailClick(e,!0,!1)}),v.bind(v.cursor,"click",function(e){v.cancelEvent(e)}),v.bind(v.cursor,"dblclick",function(e){v.cancelEvent(e)})),v.railh&&(v.jqbind(v.railh,"mouseenter",function(){return!!v.win.is(":visible")&&(v.canshowonmouseevent&&v.showCursor(),void(v.rail.active=!0))}),v.jqbind(v.railh,"mouseleave",function(){v.rail.active=!1,v.rail.drag||v.hideCursor()}),v.opt.sensitiverail&&(v.bind(v.railh,"click",function(e){v.doRailClick(e,!1,!0)}),v.bind(v.railh,"dblclick",function(e){v.doRailClick(e,!0,!0)}),v.bind(v.cursorh,"click",function(e){v.cancelEvent(e)}),v.bind(v.cursorh,"dblclick",function(e){v.cancelEvent(e)})))),w.cantouch||v.opt.touchbehavior?(v.bind(w.hasmousecapture?v.win:document,"mouseup",v.ontouchend),v.bind(document,"mousemove",v.ontouchmove),v.onclick&&v.bind(document,"click",v.onclick),v.opt.cursordragontouch&&(v.bind(v.cursor,"mousedown",v.onmousedown),v.bind(v.cursor,"mousemove",v.onmousemove),v.cursorh&&v.bind(v.cursorh,"mousedown",function(e){v.onmousedown(e,!0)}),v.cursorh&&v.bind(v.cursorh,"mousemove",v.onmousemove))):(v.bind(w.hasmousecapture?v.win:document,"mouseup",v.onmouseup),v.bind(document,"mousemove",v.onmousemove),v.onclick&&v.bind(document,"click",v.onclick),!v.ispage&&v.opt.enablescrollonselection&&(v.bind(v.win[0],"mousedown",v.onselectionstart),v.bind(document,"mouseup",v.onselectionend),v.bind(v.cursor,"mouseup",v.onselectionend),v.cursorh&&v.bind(v.cursorh,"mouseup",v.onselectionend),v.bind(document,"mousemove",v.onselectiondrag)),v.zoom&&(v.jqbind(v.zoom,"mouseenter",function(){v.canshowonmouseevent&&v.showCursor(),v.rail.active=!0}),v.jqbind(v.zoom,"mouseleave",function(){v.rail.active=!1,v.rail.drag||v.hideCursor()}))),v.opt.enablemousewheel&&(v.isiframe||v.bind(w.isie&&v.ispage?document:v.win,"mousewheel",v.onmousewheel),v.bind(v.rail,"mousewheel",v.onmousewheel),v.railh&&v.bind(v.railh,"mousewheel",v.onmousewheelhr)),v.ispage||w.cantouch||/HTML|^BODY/.test(v.win[0].nodeName)||(v.win.attr("tabindex")||v.win.attr({tabindex:k++}),v.jqbind(v.win,"focus",function(e){y=v.getTarget(e).id||!0,v.hasfocus=!0,v.canshowonmouseevent&&v.noticeCursor()}),v.jqbind(v.win,"blur",function(){y=!1,v.hasfocus=!1}),v.jqbind(v.win,"mouseenter",function(e){b=v.getTarget(e).id||!0,v.hasmousefocus=!0,v.canshowonmouseevent&&v.noticeCursor()}),v.jqbind(v.win,"mouseleave",function(){b=!1,v.hasmousefocus=!1,v.rail.drag||v.hideCursor()}))}if(v.onkeypress=function(e){if(v.locked&&0==v.page.maxh)return!0;e=e||window.e;var t=v.getTarget(e);if(t&&/INPUT|TEXTAREA|SELECT|OPTION/.test(t.nodeName)&&(!(t.getAttribute("type")||t.type||!1)||!/submit|button|cancel/i.tp))return!0;if(S(t).attr("contenteditable"))return!0;if(v.hasfocus||v.hasmousefocus&&!y||v.ispage&&!y&&!b){var o=e.keyCode;if(v.locked&&27!=o)return v.cancelEvent(e);var i=e.ctrlKey||!1,n=e.shiftKey||!1,a=!1;switch(o){case 38:case 63233:v.doScrollBy(72),a=!0;break;case 40:case 63235:v.doScrollBy(-72),a=!0;break;case 37:case 63232:v.railh&&(i?v.doScrollLeft(0):v.doScrollLeftBy(72),a=!0);break;case 39:case 63234:v.railh&&(i?v.doScrollLeft(v.page.maxw):v.doScrollLeftBy(-72),a=!0);break;case 33:case 63276:v.doScrollBy(v.view.h),a=!0;break;case 34:case 63277:v.doScrollBy(-v.view.h),a=!0;break;case 36:case 63273:v.railh&&i?v.doScrollPos(0,0):v.doScrollTo(0),a=!0;break;case 35:case 63275:v.railh&&i?v.doScrollPos(v.page.maxw,v.page.maxh):v.doScrollTo(v.page.maxh),a=!0;break;case 32:v.opt.spacebarenabled&&(v.doScrollBy(n?v.view.h:-v.view.h),a=!0);break;case 27:v.zoomactive&&(v.doZoom(),a=!0)}if(a)return v.cancelEvent(e)}},v.opt.enablekeyboard&&v.bind(document,w.isopera&&!w.isopera12?"keypress":"keydown",v.onkeypress),v.bind(document,"keydown",function(e){(e.ctrlKey||!1)&&(v.wheelprevented=!0)}),v.bind(document,"keyup",function(e){e.ctrlKey||!1||(v.wheelprevented=!1)}),v.bind(window,"resize",v.lazyResize),v.bind(window,"orientationchange",v.lazyResize),v.bind(window,"load",v.lazyResize),w.ischrome&&!v.ispage&&!v.haswrapper){var f=v.win.attr("style"),m=parseFloat(v.win.css("width"))+1;v.win.css("width",m),v.synched("chromefix",function(){v.win.attr("style",f)})}v.onAttributeChange=function(){v.lazyResize(250)},v.ispage||v.haswrapper||(!1!==$?(v.observer=new $(function(e){e.forEach(v.onAttributeChange)}),v.observer.observe(v.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),v.observerremover=new $(function(e){e.forEach(function(e){if(0<e.removedNodes.length)for(var t in e.removedNodes)if(e.removedNodes[t]==v.win[0])return v.remove()})}),v.observerremover.observe(v.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(v.bind(v.win,w.isie&&!w.isie9?"propertychange":"DOMAttrModified",v.onAttributeChange),w.isie9&&v.win[0].attachEvent("onpropertychange",v.onAttributeChange),v.bind(v.win,"DOMNodeRemoved",function(e){e.target==v.win[0]&&v.remove()}))),!v.ispage&&v.opt.boxzoom&&v.bind(window,"resize",v.resizeZoom),v.istextarea&&v.bind(v.win,"mouseup",v.lazyResize),v.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){e.call(v.doc[0],!1)},500),v.bind(this.doc,"load",e))},this.showCursor=function(e,t){v.cursortimeout&&(clearTimeout(v.cursortimeout),v.cursortimeout=0),v.rail&&(v.autohidedom&&(v.autohidedom.stop().css({opacity:v.opt.cursoropacitymax}),v.cursoractive=!0),v.rail.drag&&1==v.rail.drag.pt||(void 0!==e&&!1!==e&&(v.scroll.y=Math.round(1*e/v.scrollratio.y)),void 0!==t&&(v.scroll.x=Math.round(1*t/v.scrollratio.x))),v.cursor.css({height:v.cursorheight,top:v.scroll.y}),v.cursorh&&(v.cursorh.css(!v.rail.align&&v.rail.visibility?{width:v.cursorwidth,left:v.scroll.x+v.rail.width}:{width:v.cursorwidth,left:v.scroll.x}),v.cursoractive=!0),v.zoom&&v.zoom.stop().css({opacity:v.opt.cursoropacitymax}))},this.hideCursor=function(e){v.cursortimeout||v.rail&&v.autohidedom&&(v.hasmousefocus&&"leave"==v.opt.autohidemode||(v.cursortimeout=setTimeout(function(){v.rail.active&&v.showonmouseevent||(v.autohidedom.stop().animate({opacity:v.opt.cursoropacitymin}),v.zoom&&v.zoom.stop().animate({opacity:v.opt.cursoropacitymin}),v.cursoractive=!1),v.cursortimeout=0},e||v.opt.hidecursordelay)))},this.noticeCursor=function(e,t,o){v.showCursor(t,o),v.rail.active||v.hideCursor(e)},this.getContentSize=v.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:v.haswrapper?function(){return{w:v.doc.outerWidth()+parseInt(v.win.css("paddingLeft"))+parseInt(v.win.css("paddingRight")),h:v.doc.outerHeight()+parseInt(v.win.css("paddingTop"))+parseInt(v.win.css("paddingBottom"))}}:function(){return{w:v.docscroll[0].scrollWidth,h:v.docscroll[0].scrollHeight}},this.onResize=function(e,t){if(!v||!v.win)return!1;if(!v.haswrapper&&!v.ispage){if("none"==v.win.css("display"))return v.visibility&&v.hideRail().hideRailHr(),!1;v.hidden||v.visibility||v.showRail().showRailHr()}var o=v.page.maxh,i=v.page.maxw,n=(v.view.h,v.view.w);if(v.view={w:v.ispage?v.win.width():parseInt(v.win[0].clientWidth),h:v.ispage?v.win.height():parseInt(v.win[0].clientHeight)},v.page=t||v.getContentSize(),v.page.maxh=Math.max(0,v.page.h-v.view.h),v.page.maxw=Math.max(0,v.page.w-v.view.w),v.page.maxh==o&&v.page.maxw==i&&v.view.w==n){if(v.ispage)return v;var a=v.win.offset();if(v.lastposition){var r=v.lastposition;if(r.top==a.top&&r.left==a.left)return v}v.lastposition=a}return 0==v.page.maxh?(v.hideRail(),v.scrollvaluemax=0,v.scroll.y=0,v.scrollratio.y=0,v.cursorheight=0,v.setScrollTop(0),v.rail.scrollable=!1):v.rail.scrollable=!0,0==v.page.maxw?(v.hideRailHr(),v.scrollvaluemaxw=0,v.scroll.x=0,v.scrollratio.x=0,v.cursorwidth=0,v.setScrollLeft(0),v.railh.scrollable=!1):v.railh.scrollable=!0,v.locked=0==v.page.maxh&&0==v.page.maxw,v.locked?(v.ispage||v.updateScrollBar(v.view),!1):(v.hidden||v.visibility?v.hidden||v.railh.visibility||v.showRailHr():v.showRail().showRailHr(),v.istextarea&&v.win.css("resize")&&"none"!=v.win.css("resize")&&(v.view.h-=20),v.cursorheight=Math.min(v.view.h,Math.round(v.view.h*(v.view.h/v.page.h))),v.cursorheight=v.opt.cursorfixedheight?v.opt.cursorfixedheight:Math.max(v.opt.cursorminheight,v.cursorheight),v.cursorwidth=Math.min(v.view.w,Math.round(v.view.w*(v.view.w/v.page.w))),v.cursorwidth=v.opt.cursorfixedheight?v.opt.cursorfixedheight:Math.max(v.opt.cursorminheight,v.cursorwidth),v.scrollvaluemax=v.view.h-v.cursorheight-v.cursor.hborder,v.railh&&(v.railh.width=0<v.page.maxh?v.view.w-v.rail.width:v.view.w,v.scrollvaluemaxw=v.railh.width-v.cursorwidth-v.cursorh.wborder),v.ispage||v.updateScrollBar(v.view),v.scrollratio={x:v.page.maxw/v.scrollvaluemaxw,y:v.page.maxh/v.scrollvaluemax},v.getScrollTop()>v.page.maxh?v.doScrollTop(v.page.maxh):(v.scroll.y=Math.round(v.getScrollTop()*(1/v.scrollratio.y)),v.scroll.x=Math.round(v.getScrollLeft()*(1/v.scrollratio.x)),v.cursoractive&&v.noticeCursor()),v.scroll.y&&0==v.getScrollTop()&&v.doScrollTo(Math.floor(v.scroll.y*v.scrollratio.y)),v)},this.resize=v.onResize,this.lazyResize=function(e){return e=isNaN(e)?30:e,v.delayed("resize",v.resize,e),v},this._bind=function(e,t,o,i){v.events.push({e:e,n:t,f:o,b:i,q:!1}),e.addEventListener?e.addEventListener(t,o,i||!1):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o},this.jqbind=function(e,t,o){v.events.push({e:e,n:t,f:o,q:!0}),S(e).bind(t,o)},this.bind=function(e,t,o,i){var n="jquery"in e?e[0]:e;if("mousewheel"==t)if("onwheel"in document||9<=document.documentMode)v._bind(n,"wheel",o,i||!1);else{var a=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";s(n,a,o,i||!1),"DOMMouseScroll"==a&&s(n,"MozMousePixelScroll",o,i||!1)}else if(n.addEventListener){if(w.cantouch&&/mouseup|mousedown|mousemove/.test(t)){var r="mousedown"==t?"touchstart":"mouseup"==t?"touchend":"touchmove";v._bind(n,r,function(e){if(e.touches)e.touches.length<2&&((t=e.touches.length?e.touches[0]:e).original=e,o.call(this,t));else if(e.changedTouches){var t;(t=e.changedTouches[0]).original=e,o.call(this,t)}},i||!1)}v._bind(n,t,o,i||!1),w.cantouch&&"mouseup"==t&&v._bind(n,"touchcancel",o,i||!1)}else v._bind(n,t,function(e){return(e=e||window.event||!1)&&e.srcElement&&(e.target=e.srcElement),"pageY"in e||(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop),!1!==o.call(n,e)&&!1!==i||v.cancelEvent(e)})},this._unbind=function(e,t,o,i){e.removeEventListener?e.removeEventListener(t,o,i):e.detachEvent?e.detachEvent("on"+t,o):e["on"+t]=!1},this.unbindAll=function(){for(var e=0;e<v.events.length;e++){var t=v.events[e];t.q?t.e.unbind(t.n,t.f):v._unbind(t.e,t.n,t.f,t.b)}},this.cancelEvent=function(e){return(e=e.original?e.original:e||(window.event||!1))&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1),!1},this.stopPropagation=function(e){return!!(e=e.original?e.original:e||(window.event||!1))&&(e.stopPropagation?e.stopPropagation():(e.cancelBubble&&(e.cancelBubble=!0),!1))},this.showRail=function(){return 0==v.page.maxh||!v.ispage&&"none"==v.win.css("display")||(v.visibility=!0,v.rail.visibility=!0,v.rail.css("display","block")),v},this.showRailHr=function(){return v.railh&&(0==v.page.maxw||!v.ispage&&"none"==v.win.css("display")||(v.railh.visibility=!0,v.railh.css("display","block"))),v},this.hideRail=function(){return v.visibility=!1,v.rail.visibility=!1,v.rail.css("display","none"),v},this.hideRailHr=function(){return v.railh&&(v.railh.visibility=!1,v.railh.css("display","none")),v},this.show=function(){return v.hidden=!1,v.locked=!1,v.showRail().showRailHr()},this.hide=function(){return v.hidden=!0,v.locked=!0,v.hideRail().hideRailHr()},this.toggle=function(){return v.hidden?v.show():v.hide()},this.remove=function(){v.stop(),v.cursortimeout&&clearTimeout(v.cursortimeout),v.doZoomOut(),v.unbindAll(),w.isie9&&v.win[0].detachEvent("onpropertychange",v.onAttributeChange),!1!==v.observer&&v.observer.disconnect(),!1!==v.observerremover&&v.observerremover.disconnect(),v.events=null,v.cursor&&v.cursor.remove(),v.cursorh&&v.cursorh.remove(),v.rail&&v.rail.remove(),v.railh&&v.railh.remove(),v.zoom&&v.zoom.remove();for(var e=0;e<v.saved.css.length;e++){var t=v.saved.css[e];t[0].css(t[1],void 0===t[2]?"":t[2])}v.saved=!1,v.me.data("__nicescroll","");var o=S.nicescroll;for(var i in o.each(function(e){if(this&&this.id===v.id){delete o[e];for(var t=++e;t<o.length;t++,e++)o[e]=o[t];o.length--,o.length&&delete o[o.length]}}),v)v[i]=null,delete v[i];v=null},this.scrollstart=function(e){return this.onscrollstart=e,v},this.scrollend=function(e){return this.onscrollend=e,v},this.scrollcancel=function(e){return this.onscrollcancel=e,v},this.zoomin=function(e){return this.onzoomin=e,v},this.zoomout=function(e){return this.onzoomout=e,v},this.isScrollable=function(e){var t=e.target?e.target:e;if("OPTION"==t.nodeName)return!0;for(;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var o=S(t),i=o.css("overflowY")||o.css("overflowX")||o.css("overflow")||"";if(/scroll|auto/.test(i))return t.clientHeight!=t.scrollHeight;t=!!t.parentNode&&t.parentNode}return!1},this.getViewport=function(e){for(var t=!(!e||!e.parentNode)&&e.parentNode;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var o=S(t);if(/fixed|absolute/.test(o.css("position")))return o;var i=o.css("overflowY")||o.css("overflowX")||o.css("overflow")||"";if(/scroll|auto/.test(i)&&t.clientHeight!=t.scrollHeight)return o;if(0<o.getNiceScroll().length)return o;t=!!t.parentNode&&t.parentNode}return!!t&&S(t)},this.triggerScrollEnd=function(){if(v.onscrollend){var e=v.getScrollLeft(),t=v.getScrollTop(),o={type:"scrollend",current:{x:e,y:t},end:{x:e,y:t}};v.onscrollend.call(v,o)}},this.onmousewheel=function(e){if(!v.wheelprevented){if(v.locked)return v.debounced("checkunlock",v.resize,250),!0;if(v.rail.drag)return v.cancelEvent(e);if("auto"==v.opt.oneaxismousemode&&0!=e.deltaX&&(v.opt.oneaxismousemode=!1),v.opt.oneaxismousemode&&0==e.deltaX&&!v.rail.scrollable)return!v.railh||!v.railh.scrollable||v.onmousewheelhr(e);var t=+new Date,o=!1;if(v.opt.preservenativescrolling&&v.checkarea+600<t&&(v.nativescrollingarea=v.isScrollable(e),o=!0),v.checkarea=t,v.nativescrollingarea)return!0;var i=n(e,!1,o);return i&&(v.checkarea=0),i}},this.onmousewheelhr=function(e){if(!v.wheelprevented){if(v.locked||!v.railh.scrollable)return!0;if(v.rail.drag)return v.cancelEvent(e);var t=+new Date,o=!1;return v.opt.preservenativescrolling&&v.checkarea+600<t&&(v.nativescrollingarea=v.isScrollable(e),o=!0),v.checkarea=t,!!v.nativescrollingarea||(v.locked?v.cancelEvent(e):n(e,!0,o))}},this.stop=function(){return v.cancelScroll(),v.scrollmon&&v.scrollmon.stop(),v.cursorfreezed=!1,v.scroll.y=Math.round(v.getScrollTop()*(1/v.scrollratio.y)),v.noticeCursor(),v},this.getTransitionSpeed=function(e){var t=Math.round(10*v.opt.scrollspeed),o=Math.min(t,Math.round(e/20*v.opt.scrollspeed));return 20<o?o:0},v.opt.smoothscroll?v.ishwscroll&&w.hastransition&&v.opt.usetransition?(this.prepareTransition=function(e,t){var o=t?20<e?e:0:v.getTransitionSpeed(e),i=o?w.prefixstyle+"transform "+o+"ms ease-out":"";return v.lasttransitionstyle&&v.lasttransitionstyle==i||(v.lasttransitionstyle=i,v.doc.css(w.transitionstyle,i)),o},this.doScrollLeft=function(e,t){var o=v.scrollrunning?v.newscrolly:v.getScrollTop();v.doScrollPos(e,o,t)},this.doScrollTop=function(e,t){var o=v.scrollrunning?v.newscrollx:v.getScrollLeft();v.doScrollPos(o,e,t)},this.doScrollPos=function(l,c,e){var t=v.getScrollTop(),o=v.getScrollLeft();return((v.newscrolly-t)*(c-t)<0||(v.newscrollx-o)*(l-o)<0)&&v.cancelScroll(),0==v.opt.bouncescroll&&(c<0?c=0:c>v.page.maxh&&(c=v.page.maxh),l<0?l=0:l>v.page.maxw&&(l=v.page.maxw)),(!v.scrollrunning||l!=v.newscrollx||c!=v.newscrolly)&&(v.newscrolly=c,v.newscrollx=l,v.newscrollspeed=e||!1,!v.timer&&void(v.timer=setTimeout(function(){var e=v.getScrollTop(),t=v.getScrollLeft(),o={};o.x=l-t,o.y=c-e,o.px=t,o.py=e;var i=Math.round(Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))),n=v.newscrollspeed&&1<v.newscrollspeed?v.newscrollspeed:v.getTransitionSpeed(i);if(v.newscrollspeed&&v.newscrollspeed<=1&&(n*=v.newscrollspeed),v.prepareTransition(n,!0),v.timerscroll&&v.timerscroll.tm&&clearInterval(v.timerscroll.tm),0<n){if(!v.scrollrunning&&v.onscrollstart){var a={type:"scrollstart",current:{x:t,y:e},request:{x:l,y:c},end:{x:v.newscrollx,y:v.newscrolly},speed:n};v.onscrollstart.call(v,a)}w.transitionend?v.scrollendtrapped||(v.scrollendtrapped=!0,v.bind(v.doc,w.transitionend,v.onScrollTransitionEnd,!1)):(v.scrollendtrapped&&clearTimeout(v.scrollendtrapped),v.scrollendtrapped=setTimeout(v.onScrollTransitionEnd,n));var r=e,s=t;v.timerscroll={bz:new BezierClass(r,v.newscrolly,n,0,0,.58,1),bh:new BezierClass(s,v.newscrollx,n,0,0,.58,1)},v.cursorfreezed||(v.timerscroll.tm=setInterval(function(){v.showCursor(v.getScrollTop(),v.getScrollLeft())},60))}v.synched("doScroll-set",function(){v.timer=0,v.scrollendtrapped&&(v.scrollrunning=!0),v.setScrollTop(v.newscrolly),v.setScrollLeft(v.newscrollx),v.scrollendtrapped||v.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!v.scrollendtrapped)return!0;var e=v.getScrollTop(),t=v.getScrollLeft();return v.scrollrunning=!1,w.transitionend||clearTimeout(w.transitionend),v.scrollendtrapped=!1,v._unbind(v.doc,w.transitionend,v.onScrollTransitionEnd),v.prepareTransition(0),v.setScrollTop(e),v.railh&&v.setScrollLeft(t),v.timerscroll&&v.timerscroll.tm&&clearInterval(v.timerscroll.tm),v.timerscroll=!1,v.cursorfreezed=!1,v.showCursor(e,t),v},this.onScrollTransitionEnd=function(){v.scrollendtrapped&&v._unbind(v.doc,w.transitionend,v.onScrollTransitionEnd),v.scrollendtrapped=!1,v.prepareTransition(0),v.timerscroll&&v.timerscroll.tm&&clearInterval(v.timerscroll.tm),v.timerscroll=!1;var e=v.getScrollTop(),t=v.getScrollLeft();return v.setScrollTop(e),v.railh&&v.setScrollLeft(t),v.noticeCursor(!1,e,t),v.cursorfreezed=!1,e<0?e=0:e>v.page.maxh&&(e=v.page.maxh),t<0?t=0:t>v.page.maxw&&(t=v.page.maxw),e!=v.newscrolly||t!=v.newscrollx?v.doScrollPos(t,e,v.opt.snapbackspeed):(v.onscrollend&&v.scrollrunning&&v.triggerScrollEnd(),void(v.scrollrunning=!1))}):(this.doScrollLeft=function(e,t){var o=v.scrollrunning?v.newscrolly:v.getScrollTop();v.doScrollPos(e,o,t)},this.doScrollTop=function(e,t){var o=v.scrollrunning?v.newscrollx:v.getScrollLeft();v.doScrollPos(o,e,t)},this.doScrollPos=function(e,t,o){t=void 0===t||!1===t?v.getScrollTop(!0):t;if(v.timer&&v.newscrolly==t&&v.newscrollx==e)return!0;v.timer&&p(v.timer),v.timer=0;var i=v.getScrollTop(),n=v.getScrollLeft();((v.newscrolly-i)*(t-i)<0||(v.newscrollx-n)*(e-n)<0)&&v.cancelScroll(),v.newscrolly=t,v.newscrollx=e,v.bouncescroll&&v.rail.visibility||(v.newscrolly<0?v.newscrolly=0:v.newscrolly>v.page.maxh&&(v.newscrolly=v.page.maxh)),v.bouncescroll&&v.railh.visibility||(v.newscrollx<0?v.newscrollx=0:v.newscrollx>v.page.maxw&&(v.newscrollx=v.page.maxw)),v.dst={},v.dst.x=e-n,v.dst.y=t-i,v.dst.px=n,v.dst.py=i;var a=Math.round(Math.sqrt(Math.pow(v.dst.x,2)+Math.pow(v.dst.y,2)));v.dst.ax=v.dst.x/a,v.dst.ay=v.dst.y/a;var r=0,s=a;0==v.dst.x?(r=i,s=t,v.dst.ay=1,v.dst.py=0):0==v.dst.y&&(r=n,s=e,v.dst.ax=1,v.dst.px=0);var l=v.getTransitionSpeed(a);if(o&&o<=1&&(l*=o),v.bzscroll=0<l&&(v.bzscroll?v.bzscroll.update(s,l):new BezierClass(r,s,l,0,1,0,1)),!v.timer){(i==v.page.maxh&&t>=v.page.maxh||n==v.page.maxw&&e>=v.page.maxw)&&v.checkContentSize();var c=1;if(v.cancelAnimationFrame=!1,v.timer=1,v.onscrollstart&&!v.scrollrunning){var d={type:"scrollstart",current:{x:n,y:i},request:{x:e,y:t},end:{x:v.newscrollx,y:v.newscrolly},speed:l};v.onscrollstart.call(v,d)}(function e(){if(v.cancelAnimationFrame)return!0;if(v.scrollrunning=!0,c=1-c)return v.timer=u(e)||1;var t=0,o=sy=v.getScrollTop();v.dst.ay?(((i=(o=v.bzscroll?v.dst.py+v.bzscroll.getNow()*v.dst.ay:v.newscrolly)-sy)<0&&o<v.newscrolly||0<i&&o>v.newscrolly)&&(o=v.newscrolly),v.setScrollTop(o),o==v.newscrolly&&(t=1)):t=1;var i,n=sx=v.getScrollLeft();v.dst.ax?(((i=(n=v.bzscroll?v.dst.px+v.bzscroll.getNow()*v.dst.ax:v.newscrollx)-sx)<0&&n<v.newscrollx||0<i&&n>v.newscrollx)&&(n=v.newscrollx),v.setScrollLeft(n),n==v.newscrollx&&(t+=1)):t+=1;2==t?(v.timer=0,v.cursorfreezed=!1,v.bzscroll=!1,v.scrollrunning=!1,o<0?o=0:o>v.page.maxh&&(o=v.page.maxh),n<0?n=0:n>v.page.maxw&&(n=v.page.maxw),n!=v.newscrollx||o!=v.newscrolly?v.doScrollPos(n,o):v.onscrollend&&v.triggerScrollEnd()):v.timer=u(e)||1})(),(i==v.page.maxh&&i<=t||n==v.page.maxw&&n<=e)&&v.checkContentSize(),v.noticeCursor()}},this.cancelScroll=function(){return v.timer&&p(v.timer),v.timer=0,v.bzscroll=!1,v.scrollrunning=!1,v}):(this.doScrollLeft=function(e,t){var o=v.getScrollTop();v.doScrollPos(e,o,t)},this.doScrollTop=function(e,t){var o=v.getScrollLeft();v.doScrollPos(o,e,t)},this.doScrollPos=function(e,t){var o=e>v.page.maxw?v.page.maxw:e;o<0&&(o=0);var i=t>v.page.maxh?v.page.maxh:t;i<0&&(i=0),v.synched("scroll",function(){v.setScrollTop(i),v.setScrollLeft(o)})},this.cancelScroll=function(){}),this.doScrollBy=function(e,t){var o=0;t?o=Math.floor((v.scroll.y-e)*v.scrollratio.y):o=(v.timer?v.newscrolly:v.getScrollTop(!0))-e;if(v.bouncescroll){var i=Math.round(v.view.h/2);o<-i?o=-i:o>v.page.maxh+i&&(o=v.page.maxh+i)}return v.cursorfreezed=!1,py=v.getScrollTop(!0),o<0&&py<=0?v.noticeCursor():o>v.page.maxh&&py>=v.page.maxh?(v.checkContentSize(),v.noticeCursor()):void v.doScrollTop(o)},this.doScrollLeftBy=function(e,t){var o=0;t?o=Math.floor((v.scroll.x-e)*v.scrollratio.x):o=(v.timer?v.newscrollx:v.getScrollLeft(!0))-e;if(v.bouncescroll){var i=Math.round(v.view.w/2);o<-i?o=-i:o>v.page.maxw+i&&(o=v.page.maxw+i)}return v.cursorfreezed=!1,px=v.getScrollLeft(!0),o<0&&px<=0?v.noticeCursor():o>v.page.maxw&&px>=v.page.maxw?v.noticeCursor():void v.doScrollLeft(o)},this.doScrollTo=function(e,t){var o=t?Math.round(e*v.scrollratio.y):e;o<0?o=0:o>v.page.maxh&&(o=v.page.maxh),v.cursorfreezed=!1,v.doScrollTop(e)},this.checkContentSize=function(){var e=v.getContentSize();(e.h!=v.page.h||e.w!=v.page.w)&&v.resize(!1,e)},v.onscroll=function(){v.rail.drag||v.cursorfreezed||v.synched("scroll",function(){v.scroll.y=Math.round(v.getScrollTop()*(1/v.scrollratio.y)),v.railh&&(v.scroll.x=Math.round(v.getScrollLeft()*(1/v.scrollratio.x))),v.noticeCursor()})},v.bind(v.docscroll,"scroll",v.onscroll),this.doZoomIn=function(e){if(!v.zoomactive){v.zoomactive=!0,v.zoomrestore={style:{}};var t=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],o=v.win[0].style;for(var i in t){var n=t[i];v.zoomrestore.style[n]=void 0!==o[n]?o[n]:""}v.zoomrestore.style.width=v.win.css("width"),v.zoomrestore.style.height=v.win.css("height"),v.zoomrestore.padding={w:v.win.outerWidth()-v.win.width(),h:v.win.outerHeight()-v.win.height()},w.isios4&&(v.zoomrestore.scrollTop=S(window).scrollTop(),S(window).scrollTop(0)),v.win.css({position:w.isios4?"absolute":"fixed",top:0,left:0,"z-index":x+100,margin:"0px"});var a=v.win.css("backgroundColor");return(""==a||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(a))&&v.win.css("backgroundColor","#fff"),v.rail.css({"z-index":x+101}),v.zoom.css({"z-index":x+102}),v.zoom.css("backgroundPosition","0px -18px"),v.resizeZoom(),v.onzoomin&&v.onzoomin.call(v),v.cancelEvent(e)}},this.doZoomOut=function(e){return v.zoomactive?(v.zoomactive=!1,v.win.css("margin",""),v.win.css(v.zoomrestore.style),w.isios4&&S(window).scrollTop(v.zoomrestore.scrollTop),v.rail.css({"z-index":v.zindex}),v.zoom.css({"z-index":v.zindex}),v.zoomrestore=!1,v.zoom.css("backgroundPosition","0px 0px"),v.onResize(),v.onzoomout&&v.onzoomout.call(v),v.cancelEvent(e)):void 0},this.doZoom=function(e){return v.zoomactive?v.doZoomOut(e):v.doZoomIn(e)},this.resizeZoom=function(){if(v.zoomactive){var e=v.getScrollTop();v.win.css({width:S(window).width()-v.zoomrestore.padding.w+"px",height:S(window).height()-v.zoomrestore.padding.h+"px"}),v.onResize(),v.setScrollTop(Math.min(v.page.maxh,e))}},this.init(),S.nicescroll.push(this)},C=function(e){var g=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(e,t){g.stop();var o=g.time();g.steptime=0,g.lasttime=o,g.speedx=0,g.speedy=0,g.lastx=e,g.lasty=t,g.lastscrollx=-1,g.lastscrolly=-1},this.update=function(e,t){var o=g.time();g.steptime=o-g.lasttime,g.lasttime=o;var i=t-g.lasty,n=e-g.lastx,a=g.nc.getScrollTop()+i,r=g.nc.getScrollLeft()+n;g.snapx=r<0||r>g.nc.page.maxw,g.snapy=a<0||a>g.nc.page.maxh,g.speedx=n,g.speedy=i,g.lastx=e,g.lasty=t},this.stop=function(){g.nc.unsynched("domomentum2d"),g.timer&&clearTimeout(g.timer),g.timer=0,g.lastscrollx=-1,g.lastscrolly=-1},this.doSnapy=function(e,t){var o=!1;t<0?o=!(t=0):t>g.nc.page.maxh&&(t=g.nc.page.maxh,o=!0),e<0?o=!(e=0):e>g.nc.page.maxw&&(e=g.nc.page.maxw,o=!0),o?g.nc.doScrollPos(e,t,g.nc.opt.snapbackspeed):g.nc.triggerScrollEnd()},this.doMomentum=function(e){var t=g.time(),o=e?t+e:g.lasttime,i=g.nc.getScrollLeft(),n=g.nc.getScrollTop(),a=g.nc.page.maxh,r=g.nc.page.maxw;g.speedx=0<r?Math.min(60,g.speedx):0,g.speedy=0<a?Math.min(60,g.speedy):0;var s=o&&t-o<=60;(n<0||a<n||i<0||r<i)&&(s=!1);var l=!(!g.speedy||!s)&&g.speedy,c=!(!g.speedx||!s)&&g.speedx;if(l||c){var d=Math.max(16,g.steptime);if(50<d){var u=d/50;g.speedx*=u,g.speedy*=u,d=50}g.demulxy=0,g.lastscrollx=g.nc.getScrollLeft(),g.chkx=g.lastscrollx,g.lastscrolly=g.nc.getScrollTop(),g.chky=g.lastscrolly;var p=g.lastscrollx,h=g.lastscrolly,f=function(){var e=600<g.time()-t?.04:.02;g.speedx&&(p=Math.floor(g.lastscrollx-g.speedx*(1-g.demulxy)),((g.lastscrollx=p)<0||r<p)&&(e=.1)),g.speedy&&(h=Math.floor(g.lastscrolly-g.speedy*(1-g.demulxy)),((g.lastscrolly=h)<0||a<h)&&(e=.1)),g.demulxy=Math.min(1,g.demulxy+e),g.nc.synched("domomentum2d",function(){g.speedx&&(g.nc.getScrollLeft()!=g.chkx&&g.stop(),g.chkx=p,g.nc.setScrollLeft(p));g.speedy&&(g.nc.getScrollTop()!=g.chky&&g.stop(),g.chky=h,g.nc.setScrollTop(h));g.timer||(g.nc.hideCursor(),g.doSnapy(p,h))}),g.demulxy<1?g.timer=setTimeout(f,d):(g.stop(),g.nc.hideCursor(),g.doSnapy(p,h))};f()}else g.doSnapy(g.nc.getScrollLeft(),g.nc.getScrollTop())}},s=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(e){var t=S.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollTop():s.call(e)},set:function(e,t){var o=S.data(e,"__nicescroll")||!1;return o&&o.ishwscroll?o.setScrollTop(parseInt(t)):s.call(e,t),this}},e.fn.scrollTop=function(t){if(void 0!==t)return this.each(function(){var e=S.data(this,"__nicescroll")||!1;e&&e.ishwscroll?e.setScrollTop(parseInt(t)):s.call(S(this),t)});var e=this[0]&&S.data(this[0],"__nicescroll")||!1;return e&&e.ishwscroll?e.getScrollTop():s.call(this)};var l=e.fn.scrollLeft;S.cssHooks.pageXOffset={get:function(e){var t=S.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollLeft():l.call(e)},set:function(e,t){var o=S.data(e,"__nicescroll")||!1;return o&&o.ishwscroll?o.setScrollLeft(parseInt(t)):l.call(e,t),this}},e.fn.scrollLeft=function(t){if(void 0!==t)return this.each(function(){var e=S.data(this,"__nicescroll")||!1;e&&e.ishwscroll?e.setScrollLeft(parseInt(t)):l.call(S(this),t)});var e=this[0]&&S.data(this[0],"__nicescroll")||!1;return e&&e.ishwscroll?e.getScrollLeft():l.call(this)};var c=function(e){var i=this;if(this.length=0,this.name="nicescrollarray",this.each=function(e){for(var t=0,o=0;t<i.length;t++)e.call(i[t],o++);return i},this.push=function(e){i[i.length]=e,i.length++},this.eq=function(e){return i[e]},e)for(var t=0;t<e.length;t++){var o=S.data(e[t],"__nicescroll")||!1;o&&(this[this.length]=o,this.length++)}return this};(function(e,t,o){for(var i=0;i<t.length;i++)o(e,t[i])})(c.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(e,t){e[t]=function(){var e=arguments;return this.each(function(){this[t].apply(this,e)})}}),e.fn.getNiceScroll=function(e){return void 0===e?new c(this):this[e]&&S.data(this[e],"__nicescroll")||!1},e.extend(e.expr[":"],{nicescroll:function(e){return!!S.data(e,"__nicescroll")}}),S.fn.niceScroll=function(e,t){void 0===t&&("object"!=typeof e||"jquery"in e||(t=e,e=!1));var o=new c;void 0===t&&(t={}),e&&(t.doc=S(e),t.win=S(this));var i=!("doc"in t);return i||"win"in t||(t.win=S(this)),this.each(function(){var e=S(this).data("__nicescroll")||!1;e||(t.doc=i?S(this):t.doc,e=new r(t,S(this)),S(this).data("__nicescroll",e)),o.push(e)}),1==o.length?o[0]:o},window.NiceScroll={getjQuery:function(){return e}},S.nicescroll||(S.nicescroll=new c,S.nicescroll.options=h)}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(l){"use strict";var r,s=window.Slick||{};r=0,(s=function(e,t){var o,i,n,a=this;if(a.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:l(e),appendDots:l(e),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="previous">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0},a.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},l.extend(a,a.initials),a.activeBreakpoint=null,a.animType=null,a.animProp=null,a.breakpoints=[],a.breakpointSettings=[],a.cssTransitions=!1,a.hidden="hidden",a.paused=!1,a.positionProp=null,a.respondTo=null,a.rowCount=1,a.shouldClick=!0,a.$slider=l(e),a.$slidesCache=null,a.transformType=null,a.transitionType=null,a.visibilityChange="visibilitychange",a.windowWidth=0,a.windowTimer=null,o=l(e).data("slick")||{},a.options=l.extend({},a.defaults,o,t),a.currentSlide=a.options.initialSlide,a.originalSettings=a.options,(i=a.options.responsive||null)&&-1<i.length){for(n in a.respondTo=a.options.respondTo||"window",i)i.hasOwnProperty(n)&&(a.breakpoints.push(i[n].breakpoint),a.breakpointSettings[i[n].breakpoint]=i[n].settings);a.breakpoints.sort(function(e,t){return!0===a.options.mobileFirst?e-t:t-e})}void 0!==document.mozHidden?(a.hidden="mozHidden",a.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(a.hidden="webkitHidden",a.visibilityChange="webkitvisibilitychange"),a.autoPlay=l.proxy(a.autoPlay,a),a.autoPlayClear=l.proxy(a.autoPlayClear,a),a.changeSlide=l.proxy(a.changeSlide,a),a.clickHandler=l.proxy(a.clickHandler,a),a.selectHandler=l.proxy(a.selectHandler,a),a.setPosition=l.proxy(a.setPosition,a),a.swipeHandler=l.proxy(a.swipeHandler,a),a.dragHandler=l.proxy(a.dragHandler,a),a.keyHandler=l.proxy(a.keyHandler,a),a.autoPlayIterator=l.proxy(a.autoPlayIterator,a),a.instanceUid=r++,a.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,a.init(!0),a.checkResponsive(!0)}).prototype.addSlide=s.prototype.slickAdd=function(e,t,o){var i=this;if("boolean"==typeof t)o=t,t=null;else if(t<0||t>=i.slideCount)return!1;i.unload(),"number"==typeof t?0===t&&0===i.$slides.length?l(e).appendTo(i.$slideTrack):o?l(e).insertBefore(i.$slides.eq(t)):l(e).insertAfter(i.$slides.eq(t)):!0===o?l(e).prependTo(i.$slideTrack):l(e).appendTo(i.$slideTrack),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slides.each(function(e,t){l(t).attr("data-slick-index",e)}),i.$slidesCache=i.$slides,i.reinit()},s.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},s.prototype.animateSlide=function(e,t){var o={},i=this;i.animateHeight(),!0===i.options.rtl&&!1===i.options.vertical&&(e=-e),!1===i.transformsEnabled?!1===i.options.vertical?i.$slideTrack.animate({left:e},i.options.speed,i.options.easing,t):i.$slideTrack.animate({top:e},i.options.speed,i.options.easing,t):!1===i.cssTransitions?(!0===i.options.rtl&&(i.currentLeft=-i.currentLeft),l({animStart:i.currentLeft}).animate({animStart:e},{duration:i.options.speed,easing:i.options.easing,step:function(e){e=Math.ceil(e),!1===i.options.vertical?o[i.animType]="translate("+e+"px, 0px)":o[i.animType]="translate(0px,"+e+"px)",i.$slideTrack.css(o)},complete:function(){t&&t.call()}})):(i.applyTransition(),e=Math.ceil(e),o[i.animType]=!1===i.options.vertical?"translate3d("+e+"px, 0px, 0px)":"translate3d(0px,"+e+"px, 0px)",i.$slideTrack.css(o),t&&setTimeout(function(){i.disableTransition(),t.call()},i.options.speed))},s.prototype.asNavFor=function(t){var e=this.options.asNavFor;e&&null!==e&&(e=l(e).not(this.$slider)),null!==e&&"object"==typeof e&&e.each(function(){var e=l(this).slick("getSlick");e.unslicked||e.slideHandler(t,!0)})},s.prototype.applyTransition=function(e){var t=this,o={};o[t.transitionType]=!1===t.options.fade?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase,!1===t.options.fade?t.$slideTrack.css(o):t.$slides.eq(e).css(o)},s.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&!0!==e.paused&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},s.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},s.prototype.autoPlayIterator=function(){var e=this;!1===e.options.infinite?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(0==e.currentSlide-1&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},s.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow=l(e.options.prevArrow),e.$nextArrow=l(e.options.nextArrow),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.appendTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled"))},s.prototype.buildDots=function(){var e,t,o=this;if(!0===o.options.dots&&o.slideCount>o.options.slidesToShow){for(t='<ul class="'+o.options.dotsClass+'">',e=0;e<=o.getDotCount();e+=1)t+="<li>"+o.options.customPaging.call(this,o,e)+"</li>";t+="</ul>",o.$dots=l(t).appendTo(o.options.appendDots),o.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},s.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){l(t).attr("data-slick-index",e)}),e.$slidesCache=e.$slides,e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?l('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),(!0===e.options.centerMode||!0===e.options.swipeToSlide)&&(e.options.slidesToScroll=1),l("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),!0===e.options.accessibility&&e.$list.prop("tabIndex",0),e.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},s.prototype.buildRows=function(){var e,t,o,i,n,a,r,s=this;if(i=document.createDocumentFragment(),a=s.$slider.children(),1<s.options.rows){for(r=s.options.slidesPerRow*s.options.rows,n=Math.ceil(a.length/r),e=0;e<n;e++){var l=document.createElement("div");for(t=0;t<s.options.rows;t++){var c=document.createElement("div");for(o=0;o<s.options.slidesPerRow;o++){var d=e*r+(t*s.options.slidesPerRow+o);a.get(d)&&c.appendChild(a.get(d))}l.appendChild(c)}i.appendChild(l)}s.$slider.html(i),s.$slider.children().children().children().width(100/s.options.slidesPerRow+"%").css({display:"inline-block"})}},s.prototype.checkResponsive=function(e){var t,o,i,n=this,a=!1,r=n.$slider.width(),s=window.innerWidth||l(window).width();if("window"===n.respondTo?i=s:"slider"===n.respondTo?i=r:"min"===n.respondTo&&(i=Math.min(s,r)),n.originalSettings.responsive&&-1<n.originalSettings.responsive.length&&null!==n.originalSettings.responsive){for(t in o=null,n.breakpoints)n.breakpoints.hasOwnProperty(t)&&(!1===n.originalSettings.mobileFirst?i<n.breakpoints[t]&&(o=n.breakpoints[t]):i>n.breakpoints[t]&&(o=n.breakpoints[t]));null!==o?null!==n.activeBreakpoint?o!==n.activeBreakpoint&&(n.activeBreakpoint=o,"unslick"===n.breakpointSettings[o]?n.unslick(o):(n.options=l.extend({},n.originalSettings,n.breakpointSettings[o]),!0===e&&(n.currentSlide=n.options.initialSlide),n.refresh()),a=o):(n.activeBreakpoint=o,"unslick"===n.breakpointSettings[o]?n.unslick(o):(n.options=l.extend({},n.originalSettings,n.breakpointSettings[o]),!0===e?n.currentSlide=n.options.initialSlide:n.refresh()),a=o):null!==n.activeBreakpoint&&(n.activeBreakpoint=null,n.options=n.originalSettings,!0===e&&(n.currentSlide=n.options.initialSlide),n.refresh(),a=o),e||!1===a||n.$slider.trigger("breakpoint",[n,a])}},s.prototype.changeSlide=function(e,t){var o,i,n=this,a=l(e.target);switch(a.is("a")&&e.preventDefault(),a.is("li")||(a=a.closest("li")),o=0!=n.slideCount%n.options.slidesToScroll?0:(n.slideCount-n.currentSlide)%n.options.slidesToScroll,e.data.message){case"previous":i=0===o?n.options.slidesToScroll:n.options.slidesToShow-o,n.slideCount>n.options.slidesToShow&&n.slideHandler(n.currentSlide-i,!1,t);break;case"next":i=0===o?n.options.slidesToScroll:o,n.slideCount>n.options.slidesToShow&&n.slideHandler(n.currentSlide+i,!1,t);break;case"index":var r=0===e.data.index?0:e.data.index||a.index()*n.options.slidesToScroll;n.slideHandler(n.checkNavigable(r),!1,t),a.children().trigger("focus");break;default:return}},s.prototype.checkNavigable=function(e){var t,o;if(o=0,e>(t=this.getNavigableIndexes())[t.length-1])e=t[t.length-1];else for(var i in t){if(e<t[i]){e=o;break}o=t[i]}return e},s.prototype.cleanUpEvents=function(){var e=this;!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&l("li",e.$dots).off("click.slick",e.changeSlide),!0===e.options.dots&&!0===e.options.pauseOnDotsHover&&!0===e.options.autoplay&&l("li",e.$dots).off("mouseenter.slick",l.proxy(e.setPaused,e,!0)).off("mouseleave.slick",l.proxy(e.setPaused,e,!1)),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide)),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),l(document).off(e.visibilityChange,e.visibility),e.$list.off("mouseenter.slick",l.proxy(e.setPaused,e,!0)),e.$list.off("mouseleave.slick",l.proxy(e.setPaused,e,!1)),!0===e.options.accessibility&&e.$list.off("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&l(e.$slideTrack).children().off("click.slick",e.selectHandler),l(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),l(window).off("resize.slick.slick-"+e.instanceUid,e.resize),l("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),l(window).off("load.slick.slick-"+e.instanceUid,e.setPosition),l(document).off("ready.slick.slick-"+e.instanceUid,e.setPosition)},s.prototype.cleanUpRows=function(){var e;1<this.options.rows&&((e=this.$slides.children().children()).removeAttr("style"),this.$slider.html(e))},s.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},s.prototype.destroy=function(){var e=this;e.autoPlayClear(),e.touchObject={},e.cleanUpEvents(),l(".slick-cloned",e.$slider).detach(),e.$dots&&e.$dots.remove(),e.$prevArrow&&"object"!=typeof e.options.prevArrow&&e.$prevArrow.remove(),e.$nextArrow&&"object"!=typeof e.options.nextArrow&&e.$nextArrow.remove(),e.$slides&&(e.$slides.removeClass("slick-slide slick-active slick-center slick-visible").removeAttr("aria-hidden").removeAttr("data-slick-index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.detach(),e.$list.detach(),e.$slider.append(e.$slides)),e.cleanUpRows(),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.unslicked=!0},s.prototype.disableTransition=function(e){var t={};t[this.transitionType]="",!1===this.options.fade?this.$slideTrack.css(t):this.$slides.eq(e).css(t)},s.prototype.fadeSlide=function(e,t){var o=this;!1===o.cssTransitions?(o.$slides.eq(e).css({zIndex:1e3}),o.$slides.eq(e).animate({opacity:1},o.options.speed,o.options.easing,t)):(o.applyTransition(e),o.$slides.eq(e).css({opacity:1,zIndex:1e3}),t&&setTimeout(function(){o.disableTransition(e),t.call()},o.options.speed))},s.prototype.filterSlides=s.prototype.slickFilter=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},s.prototype.getCurrent=s.prototype.slickCurrentSlide=function(){return this.currentSlide},s.prototype.getDotCount=function(){var e=this,t=0,o=0,i=0;if(!0===e.options.infinite)for(;t<e.slideCount;)++i,t=o+e.options.slidesToShow,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(!0===e.options.centerMode)i=e.slideCount;else for(;t<e.slideCount;)++i,t=o+e.options.slidesToShow,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return i-1},s.prototype.getLeft=function(e){var t,o,i,n=this,a=0;return n.slideOffset=0,o=n.$slides.first().outerHeight(),!0===n.options.infinite?(n.slideCount>n.options.slidesToShow&&(n.slideOffset=-1*n.slideWidth*n.options.slidesToShow,a=-1*o*n.options.slidesToShow),0!=n.slideCount%n.options.slidesToScroll&&e+n.options.slidesToScroll>n.slideCount&&n.slideCount>n.options.slidesToShow&&(a=e>n.slideCount?(n.slideOffset=-1*(n.options.slidesToShow-(e-n.slideCount))*n.slideWidth,-1*(n.options.slidesToShow-(e-n.slideCount))*o):(n.slideOffset=-1*n.slideCount%n.options.slidesToScroll*n.slideWidth,-1*n.slideCount%n.options.slidesToScroll*o))):e+n.options.slidesToShow>n.slideCount&&(n.slideOffset=(e+n.options.slidesToShow-n.slideCount)*n.slideWidth,a=(e+n.options.slidesToShow-n.slideCount)*o),n.slideCount<=n.options.slidesToShow&&(a=n.slideOffset=0),!0===n.options.centerMode&&!0===n.options.infinite?n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)-n.slideWidth:!0===n.options.centerMode&&(n.slideOffset=0,n.slideOffset+=n.slideWidth*Math.floor(n.options.slidesToShow/2)),t=!1===n.options.vertical?-1*e*n.slideWidth+n.slideOffset:-1*e*o+a,!0===n.options.variableWidth&&(t=(i=n.slideCount<=n.options.slidesToShow||!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(e):n.$slideTrack.children(".slick-slide").eq(e+n.options.slidesToShow))[0]?-1*i[0].offsetLeft:0,!0===n.options.centerMode&&(t=(i=!1===n.options.infinite?n.$slideTrack.children(".slick-slide").eq(e):n.$slideTrack.children(".slick-slide").eq(e+n.options.slidesToShow+1))[0]?-1*i[0].offsetLeft:0,t+=(n.$list.width()-i.outerWidth())/2)),t},s.prototype.getOption=s.prototype.slickGetOption=function(e){return this.options[e]},s.prototype.getNavigableIndexes=function(){var e,t=this,o=0,i=0,n=[];for(e=!1===t.options.infinite?t.slideCount:(o=-1*t.options.slidesToScroll,i=-1*t.options.slidesToScroll,2*t.slideCount);o<e;)n.push(o),o=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return n},s.prototype.getSlick=function(){return this},s.prototype.getSlideCount=function(){var o,i,n=this;return i=!0===n.options.centerMode?n.slideWidth*Math.floor(n.options.slidesToShow/2):0,!0===n.options.swipeToSlide?(n.$slideTrack.find(".slick-slide").each(function(e,t){return t.offsetLeft-i+l(t).outerWidth()/2>-1*n.swipeLeft?(o=t,!1):void 0}),Math.abs(l(o).attr("data-slick-index")-n.currentSlide)||1):n.options.slidesToScroll},s.prototype.goTo=s.prototype.slickGoTo=function(e,t){this.changeSlide({data:{message:"index",index:parseInt(e)}},t)},s.prototype.init=function(e){var t=this;l(t.$slider).hasClass("slick-initialized")||(l(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots()),e&&t.$slider.trigger("init",[t])},s.prototype.initArrowEvents=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},s.prototype.initDotEvents=function(){var e=this;!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&l("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),!0===e.options.dots&&!0===e.options.pauseOnDotsHover&&!0===e.options.autoplay&&l("li",e.$dots).on("mouseenter.slick",l.proxy(e.setPaused,e,!0)).on("mouseleave.slick",l.proxy(e.setPaused,e,!1))},s.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),l(document).on(e.visibilityChange,l.proxy(e.visibility,e)),e.$list.on("mouseenter.slick",l.proxy(e.setPaused,e,!0)),e.$list.on("mouseleave.slick",l.proxy(e.setPaused,e,!1)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&l(e.$slideTrack).children().on("click.slick",e.selectHandler),l(window).on("orientationchange.slick.slick-"+e.instanceUid,l.proxy(e.orientationChange,e)),l(window).on("resize.slick.slick-"+e.instanceUid,l.proxy(e.resize,e)),l("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),l(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),l(document).on("ready.slick.slick-"+e.instanceUid,e.setPosition)},s.prototype.initUI=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),!0===e.options.autoplay&&e.autoPlay()},s.prototype.keyHandler=function(e){37===e.keyCode&&!0===this.options.accessibility?this.changeSlide({data:{message:"previous"}}):39===e.keyCode&&!0===this.options.accessibility&&this.changeSlide({data:{message:"next"}})},s.prototype.lazyLoad=function(){function e(e){l("img[data-lazy]",e).each(function(){var e=l(this),t=l(this).attr("data-lazy"),o=document.createElement("img");o.onload=function(){e.animate({opacity:1},200)},o.src=t,e.css({opacity:0}).attr("src",t).removeAttr("data-lazy").removeClass("slick-loading")})}var t,o,i=this;!0===i.options.centerMode?o=!0===i.options.infinite?(t=i.currentSlide+(i.options.slidesToShow/2+1))+i.options.slidesToShow+2:(t=Math.max(0,i.currentSlide-(i.options.slidesToShow/2+1)),i.options.slidesToShow/2+1+2+i.currentSlide):(o=(t=i.options.infinite?i.options.slidesToShow+i.currentSlide:i.currentSlide)+i.options.slidesToShow,!0===i.options.fade&&(0<t&&t--,o<=i.slideCount&&o++)),e(i.$slider.find(".slick-slide").slice(t,o)),i.slideCount<=i.options.slidesToShow?e(i.$slider.find(".slick-slide")):i.currentSlide>=i.slideCount-i.options.slidesToShow?e(i.$slider.find(".slick-cloned").slice(0,i.options.slidesToShow)):0===i.currentSlide&&e(i.$slider.find(".slick-cloned").slice(-1*i.options.slidesToShow))},s.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},s.prototype.next=s.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},s.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},s.prototype.pause=s.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},s.prototype.play=s.prototype.slickPlay=function(){this.paused=!1,this.autoPlay()},s.prototype.postSlide=function(e){var t=this;t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.setPosition(),!(t.swipeLeft=null)===t.options.autoplay&&!1===t.paused&&t.autoPlay()},s.prototype.prev=s.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},s.prototype.preventDefault=function(e){e.preventDefault()},s.prototype.progressiveLazyLoad=function(){var e,t=this;0<l("img[data-lazy]",t.$slider).length&&(e=l("img[data-lazy]",t.$slider).first()).attr("src",e.attr("data-lazy")).removeClass("slick-loading").load(function(){e.removeAttr("data-lazy"),t.progressiveLazyLoad(),!0===t.options.adaptiveHeight&&t.setPosition()}).error(function(){e.removeAttr("data-lazy"),t.progressiveLazyLoad()})},s.prototype.refresh=function(){var e=this,t=e.currentSlide;e.destroy(),l.extend(e,e.initials),e.init(),e.changeSlide({data:{message:"index",index:t}},!1)},s.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),!0===e.options.focusOnSelect&&l(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses(0),e.setPosition(),e.$slider.trigger("reInit",[e])},s.prototype.resize=function(){var e=this;l(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=l(window).width(),e.checkResponsive(),e.setPosition()},50))},s.prototype.removeSlide=s.prototype.slickRemove=function(e,t,o){var i=this;return e="boolean"==typeof e?!0===(t=e)?0:i.slideCount-1:!0===t?--e:e,!(i.slideCount<1||e<0||e>i.slideCount-1)&&(i.unload(),!0===o?i.$slideTrack.children().remove():i.$slideTrack.children(this.options.slide).eq(e).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,void i.reinit())},s.prototype.setCSS=function(e){var t,o,i=this,n={};!0===i.options.rtl&&(e=-e),t="left"==i.positionProp?Math.ceil(e)+"px":"0px",o="top"==i.positionProp?Math.ceil(e)+"px":"0px",n[i.positionProp]=e,!1===i.transformsEnabled||(!(n={})===i.cssTransitions?n[i.animType]="translate("+t+", "+o+")":n[i.animType]="translate3d("+t+", "+o+", 0px)"),i.$slideTrack.css(n)},s.prototype.setDimensions=function(){var e=this;!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):!0===e.options.variableWidth?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},s.prototype.setFade=function(){var o,i=this;i.$slides.each(function(e,t){o=-1*i.slideWidth*e,!0===i.options.rtl?l(t).css({position:"relative",right:o,top:0,zIndex:800,opacity:0}):l(t).css({position:"relative",left:o,top:0,zIndex:800,opacity:0})}),i.$slides.eq(i.currentSlide).css({zIndex:900,opacity:1})},s.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},s.prototype.setOption=s.prototype.slickSetOption=function(e,t,o){this.options[e]=t,!0===o&&(this.unload(),this.reinit())},s.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),!1===e.options.fade?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},s.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&!0===e.options.useCSS&&(e.cssTransitions=!0),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&!1!==e.animType},s.prototype.setSlideClasses=function(e){var t,o,i,n,a=this;a.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true").removeClass("slick-center"),o=a.$slider.find(".slick-slide"),!0===a.options.centerMode?(t=Math.floor(a.options.slidesToShow/2),!0===a.options.infinite&&(t<=e&&e<=a.slideCount-1-t?a.$slides.slice(e-t,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(i=a.options.slidesToShow+e,o.slice(i-t+1,i+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?o.eq(o.length-1-a.options.slidesToShow).addClass("slick-center"):e===a.slideCount-1&&o.eq(a.options.slidesToShow).addClass("slick-center")),a.$slides.eq(e).addClass("slick-center")):0<=e&&e<=a.slideCount-a.options.slidesToShow?a.$slides.slice(e,e+a.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):o.length<=a.options.slidesToShow?o.addClass("slick-active").attr("aria-hidden","false"):(n=a.slideCount%a.options.slidesToShow,i=!0===a.options.infinite?a.options.slidesToShow+e:e,a.options.slidesToShow==a.options.slidesToScroll&&a.slideCount-e<a.options.slidesToShow?o.slice(i-(a.options.slidesToShow-n),i+n).addClass("slick-active").attr("aria-hidden","false"):o.slice(i,i+a.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===a.options.lazyLoad&&a.lazyLoad()},s.prototype.setupInfinite=function(){var e,t,o,i=this;if(!0===i.options.fade&&(i.options.centerMode=!1),!0===i.options.infinite&&!1===i.options.fade&&(t=null,i.slideCount>i.options.slidesToShow)){for(o=!0===i.options.centerMode?i.options.slidesToShow+1:i.options.slidesToShow,e=i.slideCount;e>i.slideCount-o;e-=1)t=e-1,l(i.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t-i.slideCount).prependTo(i.$slideTrack).addClass("slick-cloned");for(e=0;e<o;e+=1)t=e,l(i.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+i.slideCount).appendTo(i.$slideTrack).addClass("slick-cloned");i.$slideTrack.find(".slick-cloned").find("[id]").each(function(){l(this).attr("id","")})}},s.prototype.setPaused=function(e){var t=this;!0===t.options.autoplay&&!0===t.options.pauseOnHover&&((t.paused=e)?t.autoPlayClear():t.autoPlay())},s.prototype.selectHandler=function(e){var t=this,o=l(e.target).is(".slick-slide")?l(e.target):l(e.target).parents(".slick-slide"),i=parseInt(o.attr("data-slick-index"));return i||(i=0),t.slideCount<=t.options.slidesToShow?(t.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true"),t.$slides.eq(i).addClass("slick-active").attr("aria-hidden","false"),!0===t.options.centerMode&&(t.$slider.find(".slick-slide").removeClass("slick-center"),t.$slides.eq(i).addClass("slick-center")),void t.asNavFor(i)):void t.slideHandler(i)},s.prototype.slideHandler=function(e,t,o){var i,n,a,r=null,s=this;return t=t||!1,!0===s.animating&&!0===s.options.waitForAnimate||!0===s.options.fade&&s.currentSlide===e||s.slideCount<=s.options.slidesToShow?void 0:(!1===t&&s.asNavFor(e),i=e,r=s.getLeft(i),a=s.getLeft(s.currentSlide),s.currentLeft=null===s.swipeLeft?a:s.swipeLeft,!1===s.options.infinite&&!1===s.options.centerMode&&(e<0||e>s.getDotCount()*s.options.slidesToScroll)?void(!1===s.options.fade&&(i=s.currentSlide,!0!==o?s.animateSlide(a,function(){s.postSlide(i)}):s.postSlide(i))):!1===s.options.infinite&&!0===s.options.centerMode&&(e<0||e>s.slideCount-s.options.slidesToScroll)?void(!1===s.options.fade&&(i=s.currentSlide,!0!==o?s.animateSlide(a,function(){s.postSlide(i)}):s.postSlide(i))):(!0===s.options.autoplay&&clearInterval(s.autoPlayTimer),n=i<0?0!=s.slideCount%s.options.slidesToScroll?s.slideCount-s.slideCount%s.options.slidesToScroll:s.slideCount+i:i>=s.slideCount?0!=s.slideCount%s.options.slidesToScroll?0:i-s.slideCount:i,s.animating=!0,s.$slider.trigger("beforeChange",[s,s.currentSlide,n]),s.currentSlide,s.currentSlide=n,s.setSlideClasses(s.currentSlide),s.updateDots(),s.updateArrows(),!0===s.options.fade?(!0!==o?s.fadeSlide(n,function(){s.postSlide(n)}):s.postSlide(n),void s.animateHeight()):void(!0!==o?s.animateSlide(r,function(){s.postSlide(n)}):s.postSlide(n))))},s.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},s.prototype.swipeDirection=function(){var e,t,o,i,n=this;return e=n.touchObject.startX-n.touchObject.curX,t=n.touchObject.startY-n.touchObject.curY,o=Math.atan2(t,e),(i=Math.round(180*o/Math.PI))<0&&(i=360-Math.abs(i)),i<=45&&0<=i?!1===n.options.rtl?"left":"right":i<=360&&315<=i?!1===n.options.rtl?"left":"right":135<=i&&i<=225?!1===n.options.rtl?"right":"left":!0===n.options.verticalSwiping?35<=i&&i<=135?"left":"right":"vertical"},s.prototype.swipeEnd=function(){var e,t=this;if(t.dragging=!1,t.shouldClick=!(10<t.touchObject.swipeLength),void 0===t.touchObject.curX)return!1;if(!0===t.touchObject.edgeHit&&t.$slider.trigger("edge",[t,t.swipeDirection()]),t.touchObject.swipeLength>=t.touchObject.minSwipe)switch(t.swipeDirection()){case"left":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount(),t.slideHandler(e),t.currentDirection=0,t.touchObject={},t.$slider.trigger("swipe",[t,"left"]);break;case"right":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount(),t.slideHandler(e),t.currentDirection=1,t.touchObject={},t.$slider.trigger("swipe",[t,"right"])}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},s.prototype.swipeHandler=function(e){var t=this;if(!(!1===t.options.swipe||"ontouchend"in document&&!1===t.options.swipe||!1===t.options.draggable&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,!0===t.options.verticalSwiping&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},s.prototype.swipeMove=function(e){var t,o,i,n,a,r=this;return a=void 0!==e.originalEvent?e.originalEvent.touches:null,!(!r.dragging||a&&1!==a.length)&&(t=r.getLeft(r.currentSlide),r.touchObject.curX=void 0!==a?a[0].pageX:e.clientX,r.touchObject.curY=void 0!==a?a[0].pageY:e.clientY,r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curX-r.touchObject.startX,2))),!0===r.options.verticalSwiping&&(r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curY-r.touchObject.startY,2)))),"vertical"!==(o=r.swipeDirection())?(void 0!==e.originalEvent&&4<r.touchObject.swipeLength&&e.preventDefault(),n=(!1===r.options.rtl?1:-1)*(r.touchObject.curX>r.touchObject.startX?1:-1),!0===r.options.verticalSwiping&&(n=r.touchObject.curY>r.touchObject.startY?1:-1),i=r.touchObject.swipeLength,(r.touchObject.edgeHit=!1)===r.options.infinite&&(0===r.currentSlide&&"right"===o||r.currentSlide>=r.getDotCount()&&"left"===o)&&(i=r.touchObject.swipeLength*r.options.edgeFriction,r.touchObject.edgeHit=!0),r.swipeLeft=!1===r.options.vertical?t+i*n:t+i*(r.$list.height()/r.listWidth)*n,!0===r.options.verticalSwiping&&(r.swipeLeft=t+i*n),!0!==r.options.fade&&!1!==r.options.touchMove&&(!0===r.animating?(r.swipeLeft=null,!1):void r.setCSS(r.swipeLeft))):void 0)},s.prototype.swipeStart=function(e){var t,o=this;return 1!==o.touchObject.fingerCount||o.slideCount<=o.options.slidesToShow?!(o.touchObject={}):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),o.touchObject.startX=o.touchObject.curX=void 0!==t?t.pageX:e.clientX,o.touchObject.startY=o.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(o.dragging=!0))},s.prototype.unfilterSlides=s.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},s.prototype.unload=function(){var e=this;l(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&"object"!=typeof e.options.prevArrow&&e.$prevArrow.remove(),e.$nextArrow&&"object"!=typeof e.options.nextArrow&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible").attr("aria-hidden","true").css("width","")},s.prototype.unslick=function(e){this.$slider.trigger("unslick",[this,e]),this.destroy()},s.prototype.updateArrows=function(){var e=this;Math.floor(e.options.slidesToShow/2),!0===e.options.arrows&&!0!==e.options.infinite&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.removeClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode?(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")):e.currentSlide>=e.slideCount-1&&!0===e.options.centerMode&&(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")))},s.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},s.prototype.visibility=function(){var e=this;document[e.hidden]?(e.paused=!0,e.autoPlayClear()):!0===e.options.autoplay&&(e.paused=!1,e.autoPlay())},l.fn.slick=function(){for(var e,t=this,o=arguments[0],i=Array.prototype.slice.call(arguments,1),n=t.length,a=0;a<n;a++)if("object"==typeof o||void 0===o?t[a].slick=new s(t[a],o):e=t[a].slick[o].apply(t[a].slick,i),void 0!==e)return e;return t}}),function(){var e=this,t=e._,r={},n=Array.prototype,o=Object.prototype,i=Function.prototype,a=n.push,s=n.slice,l=n.concat,u=o.toString,c=o.hasOwnProperty,d=n.forEach,p=n.map,h=n.reduce,f=n.reduceRight,g=n.filter,m=n.every,v=n.some,w=n.indexOf,y=n.lastIndexOf,b=Array.isArray,k=Object.keys,x=i.bind,S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};"undefined"!=typeof exports?(void 0!==module&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.6.0";var $=S.each=S.forEach=function(e,t,o){if(null==e)return e;if(d&&e.forEach===d)e.forEach(t,o);else if(e.length===+e.length){for(var i=0,n=e.length;i<n;i++)if(t.call(o,e[i],i,e)===r)return}else{var a=S.keys(e);for(i=0,n=a.length;i<n;i++)if(t.call(o,e[a[i]],a[i],e)===r)return}return e};S.map=S.collect=function(e,i,n){var a=[];return null==e?a:p&&e.map===p?e.map(i,n):($(e,function(e,t,o){a.push(i.call(n,e,t,o))}),a)};var C="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,i,n,a){var r=2<arguments.length;if(null==e&&(e=[]),h&&e.reduce===h)return a&&(i=S.bind(i,a)),r?e.reduce(i,n):e.reduce(i);if($(e,function(e,t,o){r?n=i.call(a,n,e,t,o):(n=e,r=!0)}),!r)throw new TypeError(C);return n},S.reduceRight=S.foldr=function(i,n,a,r){var s=2<arguments.length;if(null==i&&(i=[]),f&&i.reduceRight===f)return r&&(n=S.bind(n,r)),s?i.reduceRight(n,a):i.reduceRight(n);var l=i.length;if(l!==+l){var c=S.keys(i);l=c.length}if($(i,function(e,t,o){t=c?c[--l]:--l,s?a=n.call(r,a,i[t],t,o):(a=i[t],s=!0)}),!s)throw new TypeError(C);return a},S.find=S.detect=function(e,i,n){var a;return T(e,function(e,t,o){return i.call(n,e,t,o)?(a=e,!0):void 0}),a},S.filter=S.select=function(e,i,n){var a=[];return null==e?a:g&&e.filter===g?e.filter(i,n):($(e,function(e,t,o){i.call(n,e,t,o)&&a.push(e)}),a)},S.reject=function(e,i,n){return S.filter(e,function(e,t,o){return!i.call(n,e,t,o)},n)},S.every=S.all=function(e,i,n){i||(i=S.identity);var a=!0;return null==e?a:m&&e.every===m?e.every(i,n):($(e,function(e,t,o){return(a=a&&i.call(n,e,t,o))?void 0:r}),!!a)};var T=S.some=S.any=function(e,i,n){i||(i=S.identity);var a=!1;return null==e?a:v&&e.some===v?e.some(i,n):($(e,function(e,t,o){return a||(a=i.call(n,e,t,o))?r:void 0}),!!a)};S.contains=S.include=function(e,t){return null!=e&&(w&&e.indexOf===w?-1!=e.indexOf(t):T(e,function(e){return e===t}))},S.invoke=function(e,t){var o=s.call(arguments,2),i=S.isFunction(t);return S.map(e,function(e){return(i?t:e[t]).apply(e,o)})},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matches(t))},S.findWhere=function(e,t){return S.find(e,S.matches(t))},S.max=function(e,n,a){if(!n&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-1/0,s=-1/0;return $(e,function(e,t,o){var i=n?n.call(a,e,t,o):e;s<i&&(r=e,s=i)}),r},S.min=function(e,n,a){if(!n&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=1/0,s=1/0;return $(e,function(e,t,o){var i=n?n.call(a,e,t,o):e;i<s&&(r=e,s=i)}),r},S.shuffle=function(e){var t,o=0,i=[];return $(e,function(e){t=S.random(o++),i[o-1]=i[t],i[t]=e}),i},S.sample=function(e,t,o){return null==t||o?(e.length!==+e.length&&(e=S.values(e)),e[S.random(e.length-1)]):S.shuffle(e).slice(0,Math.max(0,t))};var _=function(e){return null==e?S.identity:S.isFunction(e)?e:S.property(e)};S.sortBy=function(e,i,n){return i=_(i),S.pluck(S.map(e,function(e,t,o){return{value:e,index:t,criteria:i.call(n,e,t,o)}}).sort(function(e,t){var o=e.criteria,i=t.criteria;if(o!==i){if(i<o||void 0===o)return 1;if(o<i||void 0===i)return-1}return e.index-t.index}),"value")};var D=function(s){return function(i,n,a){var r={};return n=_(n),$(i,function(e,t){var o=n.call(a,e,t,i);s(r,o,e)}),r}};S.groupBy=D(function(e,t,o){S.has(e,t)?e[t].push(o):e[t]=[o]}),S.indexBy=D(function(e,t,o){e[t]=o}),S.countBy=D(function(e,t){S.has(e,t)?e[t]++:e[t]=1}),S.sortedIndex=function(e,t,o,i){for(var n=(o=_(o)).call(i,t),a=0,r=e.length;a<r;){var s=a+r>>>1;o.call(i,e[s])<n?a=s+1:r=s}return a},S.toArray=function(e){return e?S.isArray(e)?s.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,o){return null==e?void 0:null==t||o?e[0]:t<0?[]:s.call(e,0,t)},S.initial=function(e,t,o){return s.call(e,0,e.length-(null==t||o?1:t))},S.last=function(e,t,o){return null==e?void 0:null==t||o?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,o){return s.call(e,null==t||o?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var I=function(e,t,o){return t&&S.every(e,S.isArray)?l.apply(o,e):($(e,function(e){S.isArray(e)||S.isArguments(e)?t?a.apply(o,e):I(e,t,o):o.push(e)}),o)};S.flatten=function(e,t){return I(e,t,[])},S.without=function(e){return S.difference(e,s.call(arguments,1))},S.partition=function(e,t){var o=[],i=[];return $(e,function(e){(t(e)?o:i).push(e)}),[o,i]},S.uniq=S.unique=function(o,i,e,t){S.isFunction(i)&&(t=e,e=i,i=!1);var n=e?S.map(o,e,t):o,a=[],r=[];return $(n,function(e,t){(i?t&&r[r.length-1]===e:S.contains(r,e))||(r.push(e),a.push(o[t]))}),a},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(e){var o=s.call(arguments,1);return S.filter(S.uniq(e),function(t){return S.every(o,function(e){return S.contains(e,t)})})},S.difference=function(e){var t=l.apply(n,s.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=S.max(S.pluck(arguments,"length").concat(0)),t=new Array(e),o=0;o<e;o++)t[o]=S.pluck(arguments,""+o);return t},S.object=function(e,t){if(null==e)return{};for(var o={},i=0,n=e.length;i<n;i++)t?o[e[i]]=t[i]:o[e[i][0]]=e[i][1];return o},S.indexOf=function(e,t,o){if(null==e)return-1;var i=0,n=e.length;if(o){if("number"!=typeof o)return e[i=S.sortedIndex(e,t)]===t?i:-1;i=o<0?Math.max(0,n+o):o}if(w&&e.indexOf===w)return e.indexOf(t,o);for(;i<n;i++)if(e[i]===t)return i;return-1},S.lastIndexOf=function(e,t,o){if(null==e)return-1;var i=null!=o;if(y&&e.lastIndexOf===y)return i?e.lastIndexOf(t,o):e.lastIndexOf(t);for(var n=i?o:e.length;n--;)if(e[n]===t)return n;return-1},S.range=function(e,t,o){arguments.length<=1&&(t=e||0,e=0),o=o||1;for(var i=Math.max(Math.ceil((t-e)/o),0),n=0,a=new Array(i);n<i;)a[n++]=e,e+=o;return a};var P=function(){};S.bind=function(o,i){var n,a;if(x&&o.bind===x)return x.apply(o,s.call(arguments,1));if(!S.isFunction(o))throw new TypeError;return n=s.call(arguments,2),a=function(){if(!(this instanceof a))return o.apply(i,n.concat(s.call(arguments)));P.prototype=o.prototype;var e=new P;P.prototype=null;var t=o.apply(e,n.concat(s.call(arguments)));return Object(t)===t?t:e}},S.partial=function(n){var a=s.call(arguments,1);return function(){for(var e=0,t=a.slice(),o=0,i=t.length;o<i;o++)t[o]===S&&(t[o]=arguments[e++]);for(;e<arguments.length;)t.push(arguments[e++]);return n.apply(this,t)}},S.bindAll=function(t){var e=s.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return $(e,function(e){t[e]=S.bind(t[e],t)}),t},S.memoize=function(t,o){var i={};return o||(o=S.identity),function(){var e=o.apply(this,arguments);return S.has(i,e)?i[e]:i[e]=t.apply(this,arguments)}},S.delay=function(e,t){var o=s.call(arguments,2);return setTimeout(function(){return e.apply(null,o)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(s.call(arguments,1)))},S.throttle=function(o,i,n){var a,r,s,l=null,c=0;n||(n={});var d=function(){c=!1===n.leading?0:S.now(),l=null,s=o.apply(a,r),a=r=null};return function(){var e=S.now();c||!1!==n.leading||(c=e);var t=i-(e-c);return a=this,r=arguments,t<=0?(clearTimeout(l),l=null,c=e,s=o.apply(a,r),a=r=null):l||!1===n.trailing||(l=setTimeout(d,t)),s}},S.debounce=function(t,o,i){var n,a,r,s,l,c=function(){var e=S.now()-s;e<o?n=setTimeout(c,o-e):(n=null,i||(l=t.apply(r,a),r=a=null))};return function(){r=this,a=arguments,s=S.now();var e=i&&!n;return n||(n=setTimeout(c,o)),e&&(l=t.apply(r,a),r=a=null),l}},S.once=function(e){var t,o=!1;return function(){return o||(o=!0,t=e.apply(this,arguments),e=null),t}},S.wrap=function(e,t){return S.partial(t,e)},S.compose=function(){var o=arguments;return function(){for(var e=arguments,t=o.length-1;0<=t;t--)e=[o[t].apply(this,e)];return e[0]}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.keys=function(e){if(!S.isObject(e))return[];if(k)return k(e);var t=[];for(var o in e)S.has(e,o)&&t.push(o);return t},S.values=function(e){for(var t=S.keys(e),o=t.length,i=new Array(o),n=0;n<o;n++)i[n]=e[t[n]];return i},S.pairs=function(e){for(var t=S.keys(e),o=t.length,i=new Array(o),n=0;n<o;n++)i[n]=[t[n],e[t[n]]];return i},S.invert=function(e){for(var t={},o=S.keys(e),i=0,n=o.length;i<n;i++)t[e[o[i]]]=o[i];return t},S.functions=S.methods=function(e){var t=[];for(var o in e)S.isFunction(e[o])&&t.push(o);return t.sort()},S.extend=function(o){return $(s.call(arguments,1),function(e){if(e)for(var t in e)o[t]=e[t]}),o},S.pick=function(t){var o={},e=l.apply(n,s.call(arguments,1));return $(e,function(e){e in t&&(o[e]=t[e])}),o},S.omit=function(e){var t={},o=l.apply(n,s.call(arguments,1));for(var i in e)S.contains(o,i)||(t[i]=e[i]);return t},S.defaults=function(o){return $(s.call(arguments,1),function(e){if(e)for(var t in e)void 0===o[t]&&(o[t]=e[t])}),o},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var E=function(e,t,o,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var n=u.call(e);if(n!=u.call(t))return!1;switch(n){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=o.length;a--;)if(o[a]==e)return i[a]==t;var r=e.constructor,s=t.constructor;if(r!==s&&!(S.isFunction(r)&&r instanceof r&&S.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1;o.push(e),i.push(t);var l=0,c=!0;if("[object Array]"==n){if(c=(l=e.length)==t.length)for(;l--&&(c=E(e[l],t[l],o,i)););}else{for(var d in e)if(S.has(e,d)&&(l++,!(c=S.has(t,d)&&E(e[d],t[d],o,i))))break;if(c){for(d in t)if(S.has(t,d)&&!l--)break;c=!l}}return o.pop(),i.pop(),c};S.isEqual=function(e,t){return E(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=b||function(e){return"[object Array]"==u.call(e)},S.isObject=function(e){return e===Object(e)},$(["Arguments","Function","String","Number","Date","RegExp"],function(t){S["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(e){return"function"==typeof e}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==u.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return c.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.property=function(t){return function(e){return e[t]}},S.matches=function(o){return function(e){if(e===o)return!0;for(var t in o)if(o[t]!==e[t])return!1;return!0}},S.times=function(e,t,o){for(var i=Array(Math.max(0,e)),n=0;n<e;n++)i[n]=t.call(o,n);return i},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};A.unescape=S.invert(A.escape);var M={escape:new RegExp("["+S.keys(A.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(A.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(t){S[t]=function(e){return null==e?"":(""+e).replace(M[t],function(e){return A[t][e]})}}),S.result=function(e,t){if(null!=e){var o=e[t];return S.isFunction(o)?o.call(e):o}},S.mixin=function(o){$(S.functions(o),function(e){var t=S[e]=o[e];S.prototype[e]=function(){var e=[this._wrapped];return a.apply(e,arguments),F.call(this,t.apply(S,e))}})};var z=0;S.uniqueId=function(e){var t=++z+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(a,e,t){var o;t=S.defaults({},t,S.templateSettings);var i=new RegExp([(t.escape||L).source,(t.interpolate||L).source,(t.evaluate||L).source].join("|")+"|$","g"),r=0,s="__p+='";a.replace(i,function(e,t,o,i,n){return s+=a.slice(r,n).replace(R,function(e){return"\\"+O[e]}),t&&(s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"),o&&(s+="'+\n((__t=("+o+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),r=n+e.length,e}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{o=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}if(e)return o(e,S);var n=function(e){return o.call(this,e,S)};return n.source="function("+(t.variable||"obj")+"){\n"+s+"}",n},S.chain=function(e){return S(e).chain()};var F=function(e){return this._chain?S(e).chain():e};S.mixin(S),$(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var o=n[t];S.prototype[t]=function(){var e=this._wrapped;return o.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],F.call(this,e)}}),$(["concat","join","slice"],function(e){var t=n[e];S.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return S})}.call(this),function(W,q,i){var l={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(e,t){},functionBefore:function(e,t){t()},functionReady:function(e,t){},functionAfter:function(e){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(e){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};function c(e,t){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=W(e),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=W.extend({},l,t),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function n(o,i){var n=!0;return W.each(o,function(e,t){if(void 0===i[e]||o[e]!==i[e])return n=!1}),n}c.prototype={_init:function(){var e=this;if(i.querySelector){var t=null;void 0===e.$el.data("tooltipster-initialTitle")&&(void 0===(t=e.$el.attr("title"))&&(t=null),e.$el.data("tooltipster-initialTitle",t)),null!==e.options.content?e._content_set(e.options.content):e._content_set(t);var o=e.options.functionInit.call(e.$el,e.$el,e.Content);void 0!==o&&e._content_set(o),e.$el.removeAttr("title").addClass("tooltipstered"),!d&&e.options.iconDesktop||d&&e.options.iconTouch?("string"==typeof e.options.icon?(e.$elProxy=W('<span class="'+e.options.iconTheme+'"></span>'),e.$elProxy.text(e.options.icon)):e.options.iconCloning?e.$elProxy=e.options.icon.clone(!0):e.$elProxy=e.options.icon,e.$elProxy.insertAfter(e.$el)):e.$elProxy=e.$el,"hover"==e.options.trigger?(e.$elProxy.on("mouseenter."+e.namespace,function(){a()&&!e.options.touchDevices||(e.mouseIsOverProxy=!0,e._show())}).on("mouseleave."+e.namespace,function(){a()&&!e.options.touchDevices||(e.mouseIsOverProxy=!1)}),d&&e.options.touchDevices&&e.$elProxy.on("touchstart."+e.namespace,function(){e._showNow()})):"click"==e.options.trigger&&e.$elProxy.on("click."+e.namespace,function(){a()&&!e.options.touchDevices||e._show()})}},_show:function(){var e=this;"shown"!=e.Status&&"appearing"!=e.Status&&(e.options.delay?e.timerShow=setTimeout(function(){("click"==e.options.trigger||"hover"==e.options.trigger&&e.mouseIsOverProxy)&&e._showNow()},e.options.delay):e._showNow())},_showNow:function(l){var c=this;c.options.functionBefore.call(c.$el,c.$el,function(){if(c.enabled&&null!==c.Content){l&&c.callbacks.show.push(l),c.callbacks.hide=[],clearTimeout(c.timerShow),c.timerShow=null,clearTimeout(c.timerHide),c.timerHide=null,c.options.onlyOne&&W(".tooltipstered").not(c.$el).each(function(e,t){var a=W(t),o=a.data("tooltipster-ns");W.each(o,function(e,t){var o=a.data(t),i=o.status(),n=o.option("autoClose");"hidden"!==i&&"disappearing"!==i&&n&&o.hide()})});var e=function(){c.Status="shown",W.each(c.callbacks.show,function(e,t){t.call(c.$el)}),c.callbacks.show=[]};if("hidden"!==c.Status){var t=0;"disappearing"===c.Status?(c.Status="appearing",u()?(c.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+c.options.animation+"-show"),0<c.options.speed&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(e)):c.$tooltip.stop().fadeIn(e)):"shown"===c.Status&&e()}else{c.Status="appearing";t=c.options.speed;c.bodyOverflowX=W("body").css("overflow-x"),W("body").css("overflow-x","hidden");var o="tooltipster-"+c.options.animation,i="-webkit-transition-duration: "+c.options.speed+"ms; -webkit-animation-duration: "+c.options.speed+"ms; -moz-transition-duration: "+c.options.speed+"ms; -moz-animation-duration: "+c.options.speed+"ms; -o-transition-duration: "+c.options.speed+"ms; -o-animation-duration: "+c.options.speed+"ms; -ms-transition-duration: "+c.options.speed+"ms; -ms-animation-duration: "+c.options.speed+"ms; transition-duration: "+c.options.speed+"ms; animation-duration: "+c.options.speed+"ms;",n=c.options.minWidth?"min-width:"+Math.round(c.options.minWidth)+"px;":"",a=c.options.maxWidth?"max-width:"+Math.round(c.options.maxWidth)+"px;":"",r=c.options.interactive?"pointer-events: auto;":"";if(c.$tooltip=W('<div class="tooltipster-base '+c.options.theme+'" style="'+n+" "+a+" "+r+" "+i+'"><div class="tooltipster-content"></div></div>'),u()&&c.$tooltip.addClass(o),c._content_insert(),c.$tooltip.appendTo("body"),c.reposition(),c.options.functionReady.call(c.$el,c.$el,c.$tooltip),u()?(c.$tooltip.addClass(o+"-show"),0<c.options.speed&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(e)):c.$tooltip.css("display","none").fadeIn(c.options.speed,e),c._interval_set(),W(q).on("scroll."+c.namespace+" resize."+c.namespace,function(){c.reposition()}),c.options.autoClose)if(W("body").off("."+c.namespace),"hover"==c.options.trigger){if(d&&setTimeout(function(){W("body").on("touchstart."+c.namespace,function(){c.hide()})},0),c.options.interactive){d&&c.$tooltip.on("touchstart."+c.namespace,function(e){e.stopPropagation()});var s=null;c.$elProxy.add(c.$tooltip).on("mouseleave."+c.namespace+"-autoClose",function(){clearTimeout(s),s=setTimeout(function(){c.hide()},c.options.interactiveTolerance)}).on("mouseenter."+c.namespace+"-autoClose",function(){clearTimeout(s)})}else c.$elProxy.on("mouseleave."+c.namespace+"-autoClose",function(){c.hide()});c.options.hideOnClick&&c.$elProxy.on("click."+c.namespace+"-autoClose",function(){c.hide()})}else"click"==c.options.trigger&&(setTimeout(function(){W("body").on("click."+c.namespace+" touchstart."+c.namespace,function(){c.hide()})},0),c.options.interactive&&c.$tooltip.on("click."+c.namespace+" touchstart."+c.namespace,function(e){e.stopPropagation()}))}0<c.options.timer&&(c.timerHide=setTimeout(function(){c.timerHide=null,c.hide()},c.options.timer+t))}})},_interval_set:function(){var o=this;o.checkInterval=setInterval(function(){if(0===W("body").find(o.$el).length||0===W("body").find(o.$elProxy).length||"hidden"==o.Status||0===W("body").find(o.$tooltip).length)"shown"!=o.Status&&"appearing"!=o.Status||o.hide(),o._interval_cancel();else if(o.options.positionTracker){var e=o._repositionInfo(o.$elProxy),t=!1;n(e.dimension,o.elProxyPosition.dimension)&&("fixed"===o.$elProxy.css("position")?n(e.position,o.elProxyPosition.position)&&(t=!0):n(e.offset,o.elProxyPosition.offset)&&(t=!0)),t||(o.reposition(),o.options.positionTrackerCallback.call(o,o.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(e){"object"==typeof e&&null!==e&&this.options.contentCloning&&(e=e.clone(!0)),this.Content=e},_content_insert:function(){var e=this.$tooltip.find(".tooltipster-content");"string"!=typeof this.Content||this.options.contentAsHTML?e.empty().append(this.Content):e.text(this.Content)},_update:function(e){var t=this;t._content_set(e),null!==t.Content?"hidden"!==t.Status&&(t._content_insert(),t.reposition(),t.options.updateAnimation&&(u()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=t.Status&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==t.Status&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){"hidden"!=t.Status&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hide()},_repositionInfo:function(e){return{dimension:{height:e.outerHeight(!1),width:e.outerWidth(!1)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},hide:function(e){var o=this;e&&o.callbacks.hide.push(e),o.callbacks.show=[],clearTimeout(o.timerShow),o.timerShow=null,clearTimeout(o.timerHide),o.timerHide=null;var t=function(){W.each(o.callbacks.hide,function(e,t){t.call(o.$el)}),o.callbacks.hide=[]};if("shown"==o.Status||"appearing"==o.Status){o.Status="disappearing";var i=function(){o.Status="hidden","object"==typeof o.Content&&null!==o.Content&&o.Content.detach(),o.$tooltip.remove(),o.$tooltip=null,W(q).off("."+o.namespace),W("body").off("."+o.namespace).css("overflow-x",o.bodyOverflowX),W("body").off("."+o.namespace),o.$elProxy.off("."+o.namespace+"-autoClose"),o.options.functionAfter.call(o.$el,o.$el),t()};u()?(o.$tooltip.clearQueue().removeClass("tooltipster-"+o.options.animation+"-show").addClass("tooltipster-dying"),0<o.options.speed&&o.$tooltip.delay(o.options.speed),o.$tooltip.queue(i)):o.$tooltip.stop().fadeOut(o.options.speed,i)}else"hidden"==o.Status&&t();return o},show:function(e){return this._showNow(e),this},update:function(e){return this.content(e)},content:function(e){return void 0===e?this.Content:(this._update(e),this)},reposition:function(){var e=this;if(0!==W("body").find(e.$tooltip).length){e.$tooltip.css("width",""),e.elProxyPosition=e._repositionInfo(e.$elProxy);var t=null,o=W(q).width(),i=e.elProxyPosition,n=e.$tooltip.outerWidth(!1),a=(e.$tooltip.innerWidth(),e.$tooltip.outerHeight(!1));if(e.$elProxy.is("area")){var r=e.$elProxy.attr("shape"),s=e.$elProxy.parent().attr("name"),l=W('img[usemap="#'+s+'"]'),c=l.offset().left,d=l.offset().top,u=void 0!==e.$elProxy.attr("coords")?e.$elProxy.attr("coords").split(","):void 0;if("circle"==r){var p=parseInt(u[0]),h=parseInt(u[1]),f=parseInt(u[2]);i.dimension.height=2*f,i.dimension.width=2*f,i.offset.top=d+h-f,i.offset.left=c+p-f}else if("rect"==r){p=parseInt(u[0]),h=parseInt(u[1]);var g=parseInt(u[2]),m=parseInt(u[3]);i.dimension.height=m-h,i.dimension.width=g-p,i.offset.top=d+h,i.offset.left=c+p}else if("poly"==r){for(var v=0,w=0,y=0,b=0,k="even",x=0;x<u.length;x++){var S=parseInt(u[x]);k="even"==k?(y<S&&(y=S,0===x&&(v=y)),S<v&&(v=S),"odd"):(b<S&&(b=S,1==x&&(w=b)),S<w&&(w=S),"even")}i.dimension.height=b-w,i.dimension.width=y-v,i.offset.top=d+w,i.offset.left=c+v}else i.dimension.height=l.outerHeight(!1),i.dimension.width=l.outerWidth(!1),i.offset.top=d,i.offset.left=c}var $=0,C=0,T=0,_=parseInt(e.options.offsetY),D=parseInt(e.options.offsetX),I=e.options.position;function P(){var e=W(q).scrollLeft();$-e<0&&(t=$-e,$=e),o<$+n-e&&(t=$-(o+e-n),$=o+e-n)}function E(e,t){i.offset.top-W(q).scrollTop()-a-_-12<0&&-1<t.indexOf("top")&&(I=e),i.offset.top+i.dimension.height+a+12+_>W(q).scrollTop()+W(q).height()&&-1<t.indexOf("bottom")&&(I=e,T=i.offset.top-a-_-12)}if("top"==I){var A=i.offset.left+n-(i.offset.left+i.dimension.width);$=i.offset.left+D-A/2,T=i.offset.top-a-_-12,P(),E("bottom","top")}if("top-left"==I&&($=i.offset.left+D,T=i.offset.top-a-_-12,P(),E("bottom-left","top-left")),"top-right"==I&&($=i.offset.left+i.dimension.width+D-n,T=i.offset.top-a-_-12,P(),E("bottom-right","top-right")),"bottom"==I){A=i.offset.left+n-(i.offset.left+i.dimension.width);$=i.offset.left-A/2+D,T=i.offset.top+i.dimension.height+_+12,P(),E("top","bottom")}if("bottom-left"==I&&($=i.offset.left+D,T=i.offset.top+i.dimension.height+_+12,P(),E("top-left","bottom-left")),"bottom-right"==I&&($=i.offset.left+i.dimension.width+D-n,T=i.offset.top+i.dimension.height+_+12,P(),E("top-right","bottom-right")),"left"==I){$=i.offset.left-D-n-12,C=i.offset.left+D+i.dimension.width+12;var M=i.offset.top+a-(i.offset.top+i.dimension.height);if(T=i.offset.top-M/2-_,$<0&&o<C+n){var z=2*parseFloat(e.$tooltip.css("border-width")),L=n+$-z;e.$tooltip.css("width",L+"px"),a=e.$tooltip.outerHeight(!1),$=i.offset.left-D-L-12-z,M=i.offset.top+a-(i.offset.top+i.dimension.height),T=i.offset.top-M/2-_}else $<0&&($=i.offset.left+D+i.dimension.width+12,t="left")}if("right"==I){$=i.offset.left+D+i.dimension.width+12,C=i.offset.left-D-n-12;M=i.offset.top+a-(i.offset.top+i.dimension.height);if(T=i.offset.top-M/2-_,o<$+n&&C<0){z=2*parseFloat(e.$tooltip.css("border-width")),L=o-$-z;e.$tooltip.css("width",L+"px"),a=e.$tooltip.outerHeight(!1),M=i.offset.top+a-(i.offset.top+i.dimension.height),T=i.offset.top-M/2-_}else o<$+n&&($=i.offset.left-D-n-12,t="right")}if(e.options.arrow){var O="tooltipster-arrow-"+I;if(e.options.arrowColor.length<1)var R=e.$tooltip.css("background-color");else R=e.options.arrowColor;if(t=t?"left"==t?(O="tooltipster-arrow-right",""):"right"==t?(O="tooltipster-arrow-left",""):"left:"+Math.round(t)+"px;":"","top"==I||"top-left"==I||"top-right"==I)var F=parseFloat(e.$tooltip.css("border-bottom-width")),N=e.$tooltip.css("border-bottom-color");else if("bottom"==I||"bottom-left"==I||"bottom-right"==I)F=parseFloat(e.$tooltip.css("border-top-width")),N=e.$tooltip.css("border-top-color");else if("left"==I)F=parseFloat(e.$tooltip.css("border-right-width")),N=e.$tooltip.css("border-right-color");else if("right"==I)F=parseFloat(e.$tooltip.css("border-left-width")),N=e.$tooltip.css("border-left-color");else F=parseFloat(e.$tooltip.css("border-bottom-width")),N=e.$tooltip.css("border-bottom-color");1<F&&F++;var j="";if(0!==F){var H="",U="border-color: "+N+";";-1!==O.indexOf("bottom")?H="margin-top: -"+Math.round(F)+"px;":-1!==O.indexOf("top")?H="margin-bottom: -"+Math.round(F)+"px;":-1!==O.indexOf("left")?H="margin-right: -"+Math.round(F)+"px;":-1!==O.indexOf("right")&&(H="margin-left: -"+Math.round(F)+"px;"),j='<span class="tooltipster-arrow-border" style="'+H+" "+U+';"></span>'}e.$tooltip.find(".tooltipster-arrow").remove();var B='<div class="'+O+' tooltipster-arrow" style="'+t+'">'+j+'<span style="border-color:'+R+';"></span></div>';e.$tooltip.append(B)}e.$tooltip.css({top:Math.round(T)+"px",left:Math.round($)+"px"})}return e},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var o=this;o.hide(),o.$el[0]!==o.$elProxy[0]&&o.$elProxy.remove(),o.$el.removeData(o.namespace).off("."+o.namespace);var e=o.$el.data("tooltipster-ns");if(1===e.length){var t=null;"previous"===o.options.restoration?t=o.$el.data("tooltipster-initialTitle"):"current"===o.options.restoration&&(t="string"==typeof o.Content?o.Content:W("<div></div>").append(o.Content).html()),t&&o.$el.attr("title",t),o.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else e=W.grep(e,function(e,t){return e!==o.namespace}),o.$el.data("tooltipster-ns",e);return o},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(e,t){return void 0===t?this.options[e]:(this.options[e]=t,this)},status:function(){return this.Status}},W.fn.tooltipster=function(){var i=arguments;if(0===this.length){if("string"!=typeof i[0])return this;var e=!0;switch(i[0]){case"setDefaults":W.extend(l,i[1]);break;default:e=!1}return!!e||this}if("string"==typeof i[0]){var n="#*$~&";return this.each(function(){var e=W(this).data("tooltipster-ns"),t=e?W(this).data(e[0]):null;if(!t)throw new Error("You called Tooltipster's \""+i[0]+'" method on an uninitialized element');if("function"!=typeof t[i[0]])throw new Error('Unknown method .tooltipster("'+i[0]+'")');var o=t[i[0]](i[1],i[2]);if(o!==t)return n=o,!1}),"#*$~&"!==n?n:this}var a=[],t=i[0]&&void 0!==i[0].multiple,r=t&&i[0].multiple||!t&&l.multiple,o=i[0]&&void 0!==i[0].debug,s=o&&i[0].debug||!o&&l.debug;return this.each(function(){var e=!1,t=W(this).data("tooltipster-ns"),o=null;t?r?e=!0:s&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):e=!0,e&&(o=new c(this,i[0]),t||(t=[]),t.push(o.namespace),W(this).data("tooltipster-ns",t),W(this).data(o.namespace,o)),a.push(o)}),r?a:this};var d=!!("ontouchstart"in q),e=!1;function a(){return!e&&d}function u(){var e=(i.body||i.documentElement).style,t="transition";if("string"==typeof e[t])return!0;v=["Moz","Webkit","Khtml","O","ms"],t=t.charAt(0).toUpperCase()+t.substr(1);for(var o=0;o<v.length;o++)if("string"==typeof e[v[o]+t])return!0;return!1}W("body").one("mousemove",function(){e=!0})}(jQuery,window,document),function(r){var n=function(e){this.origHtmlMargin=parseFloat(r("html").css("margin-top")),this.options=r.extend({},r.smartbanner.defaults,e);var t=navigator.standalone,o=navigator.userAgent;if(this.options.force?this.type=this.options.force:null!=o.match(/Windows Phone 8/i)&&null!==o.match(/Touch/i)?this.type="windows":null!=o.match(/iPhone|iPod/i)||o.match(/iPad/)&&this.options.iOSUniversalApp?null!=o.match(/Safari/i)&&(null!=o.match(/CriOS/i)||window.Number(o.substr(o.indexOf("OS ")+3,3).replace("_","."))<6)&&(this.type="ios"):o.match(/\bSilk\/(.*\bMobile Safari\b)?/)||o.match(/\bKF\w/)||o.match("Kindle Fire")?this.type="kindle":null!=o.match(/Android/i)&&(this.type="android"),this.type&&!t&&!this.getCookie("sb-closed")&&!this.getCookie("sb-installed")){this.scale="auto"==this.options.scale?r(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var i=r("android"==this.type?'meta[name="google-play-app"]':"ios"==this.type?'meta[name="apple-itunes-app"]':"kindle"==this.type?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(0!=i.length){if("windows"==this.type)this.appId=r('meta[name="msApplication-PackageFamilyName"]').attr("content");else{var n=/app-id=([^\s,]+)/.exec(i.attr("content"));if(!n)return;this.appId=n[1]}this.title=this.options.title?this.options.title:i.data("title")||r("title").text().replace(/\s*[|\-·].*$/,""),this.author=this.options.author?this.options.author:i.data("author")||(r('meta[name="author"]').length?r('meta[name="author"]').attr("content"):window.location.hostname),this.iconUrl=i.data("icon-url"),this.price=i.data("price"),this.create(),this.show(),this.listen()}}};n.prototype={constructor:n,create:function(){var e,t=this.options.url?this.options.url:("windows"==this.type?"ms-windows-store:navigate?appid=":"android"==this.type?"market://details?id=":"kindle"==this.type?"amzn://apps/android?asin=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,o=this.price||this.options.price,i=o?o+" - "+("android"==this.type?this.options.inGooglePlay:"kindle"==this.type?this.options.inAmazonAppStore:"ios"==this.type?this.options.inAppStore:this.options.inWindowsStore):"",n=null===this.options.iconGloss?"ios"==this.type:this.options.iconGloss;"android"==this.type&&this.options.GooglePlayParams&&(t=t+"&referrer="+this.options.GooglePlayParams);var a='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+i+'</span></div><a href="'+t+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>";this.options.layer?r(this.options.appendToSelector).append(a):r(this.options.appendToSelector).prepend(a),this.options.icon?e=this.options.icon:this.iconUrl?e=this.iconUrl:0<r('link[rel="apple-touch-icon-precomposed"]').length?(e=r('link[rel="apple-touch-icon-precomposed"]').attr("href"),null===this.options.iconGloss&&(n=!1)):0<r('link[rel="apple-touch-icon"]').length?e=r('link[rel="apple-touch-icon"]').attr("href"):0<r('meta[name="msApplication-TileImage"]').length?e=r('meta[name="msApplication-TileImage"]').attr("content"):0<r('meta[name="msapplication-TileImage"]').length&&(e=r('meta[name="msapplication-TileImage"]').attr("content")),e?(r("#smartbanner .sb-icon").css("background-image","url("+e+")"),n&&r("#smartbanner .sb-icon").addClass("gloss")):r("#smartbanner").addClass("no-icon"),this.bannerHeight=r("#smartbanner").outerHeight()+2,1<this.scale&&(r("#smartbanner").css("top",parseFloat(r("#smartbanner").css("top"))*this.scale).css("height",parseFloat(r("#smartbanner").css("height"))*this.scale).hide(),r("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",r(window).width()/this.scale)),r("#smartbanner").css("position",this.options.layer?"absolute":"static")},listen:function(){r("#smartbanner .sb-close").on("click",r.proxy(this.close,this)),r("#smartbanner .sb-button").on("click",r.proxy(this.install,this))},show:function(e){var t=r("#smartbanner");if(t.stop(),this.options.layer)t.animate({top:0,display:"block"},this.options.speedIn).addClass("shown").show(),r(this.pushSelector).animate({paddingTop:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",e);else if(r.support.transition){t.animate({top:0},this.options.speedIn).addClass("shown");r(this.pushSelector).addClass("sb-animation").one(r.support.transition.end,function(){r("html").removeClass("sb-animation"),e&&e()}).emulateTransitionEnd(this.options.speedIn).css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale)}else t.slideDown(this.options.speedIn).addClass("shown")},hide:function(e){var t=r("#smartbanner");if(t.stop(),this.options.layer)t.animate({top:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown"),r(this.pushSelector).animate({paddingTop:this.origHtmlMargin},this.options.speedIn,"swing",e);else if(r.support.transition){"android"!==this.type?t.css("top",-1*this.bannerHeight*this.scale).removeClass("shown"):t.css({display:"none"}).removeClass("shown");r(this.pushSelector).addClass("sb-animation").one(r.support.transition.end,function(){r("html").removeClass("sb-animation"),e&&e()}).emulateTransitionEnd(this.options.speedOut).css("margin-top",this.origHtmlMargin)}else t.slideUp(this.options.speedOut).removeClass("shown")},close:function(e){e.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(e){this.options.hideOnInstall&&this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(e,t,o){var i=new Date;i.setDate(i.getDate()+o),t=encodeURI(t)+(null==o?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t+"; path=/;"},getCookie:function(e){var t,o,i,n=document.cookie.split(";");for(t=0;t<n.length;t++)if(o=n[t].substr(0,n[t].indexOf("=")),i=n[t].substr(n[t].indexOf("=")+1),(o=o.replace(/^\s+|\s+$/g,""))==e)return decodeURI(i);return null},switchType:function(){var t=this;this.hide(function(){t.type="android"==t.type?"ios":"android";var e=r("android"==t.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");t.appId=/app-id=([^\s,]+)/.exec(e)[1],r("#smartbanner").detach(),t.create(),t.show()})}},r.smartbanner=function(e){var t=r(window),o=t.data("smartbanner"),i="object"==typeof e&&e;o||t.data("smartbanner",o=new n(i)),"string"==typeof e&&o[e]()},r.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:!0,layer:!1,iOSUniversalApp:!0,appendToSelector:"body",pushSelector:"html"},r.smartbanner.Constructor=n,void 0===r.support.transition&&(r.fn.emulateTransitionEnd=function(e){var t=!1,o=this;r(this).one(r.support.transition.end,function(){t=!0});return setTimeout(function(){t||r(o).trigger(r.support.transition.end)},e),this},r(function(){r.support.transition=function(){var e=document.createElement("smartbanner"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in t)if(void 0!==e.style[o])return{end:t[o]};return!1}()}))}(window.jQuery),function(){"use strict";function s(n,e){var t;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=n,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!s.notNeeded(n)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],i=0,a=o.length;i<a;i++)this[o[i]]=r(this[o[i]],this);l&&(n.addEventListener("mouseover",this.onMouse,!0),n.addEventListener("mousedown",this.onMouse,!0),n.addEventListener("mouseup",this.onMouse,!0)),n.addEventListener("click",this.onClick,!0),n.addEventListener("touchstart",this.onTouchStart,!1),n.addEventListener("touchmove",this.onTouchMove,!1),n.addEventListener("touchend",this.onTouchEnd,!1),n.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(n.removeEventListener=function(e,t,o){var i=Node.prototype.removeEventListener;"click"===e?i.call(n,e,t.hijacked||t,o):i.call(n,e,t,o)},n.addEventListener=function(e,t,o){var i=Node.prototype.addEventListener;"click"===e?i.call(n,e,t.hijacked||(t.hijacked=function(e){e.propagationStopped||t(e)}),o):i.call(n,e,t,o)}),"function"==typeof n.onclick&&(t=n.onclick,n.addEventListener("click",function(e){t(e)},!1),n.onclick=null)}function r(e,t){return function(){return e.apply(t,arguments)}}}var e=0<=navigator.userAgent.indexOf("Windows Phone"),l=0<navigator.userAgent.indexOf("Android")&&!e,c=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,d=c&&/OS 4_\d(_\d)?/.test(navigator.userAgent),u=c&&/OS [6-7]_\d/.test(navigator.userAgent),n=0<navigator.userAgent.indexOf("BB10");s.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(c&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},s.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!l;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},s.prototype.sendClick=function(e,t){var o,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],(o=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),o.forwardedTouchEvent=!0,e.dispatchEvent(o)},s.prototype.determineEventType=function(e){return l&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},s.prototype.focus=function(e){var t;c&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},s.prototype.updateScrollParent=function(e){var t,o;if(!(t=e.fastClickScrollParent)||!t.contains(e)){o=e;do{if(o.scrollHeight>o.offsetHeight){t=o,e.fastClickScrollParent=o;break}o=o.parentElement}while(o)}t&&(t.fastClickLastScrollTop=t.scrollTop)},s.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},s.prototype.onTouchStart=function(e){var t,o,i;if(1<e.targetTouches.length)return!0;if(t=this.getTargetElementFromEventTarget(e.target),o=e.targetTouches[0],c){if((i=window.getSelection()).rangeCount&&!i.isCollapsed)return!0;if(!d){if(o.identifier&&o.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=o.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=o.pageX,this.touchStartY=o.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},s.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],o=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>o||Math.abs(t.pageY-this.touchStartY)>o},s.prototype.onTouchMove=function(e){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0},s.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},s.prototype.onTouchEnd=function(e){var t,o,i,n,a,r=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,u&&(a=e.changedTouches[0],(r=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)||r).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(i=r.tagName.toLowerCase())){if(t=this.findControl(r)){if(this.focus(r),l)return!1;r=t}}else if(this.needsFocus(r))return 100<e.timeStamp-o||c&&window.top!==window&&"input"===i?this.targetElement=null:(this.focus(r),this.sendClick(r,e),c&&"select"===i||(this.targetElement=null,e.preventDefault())),!1;return!(!c||d||!(n=r.fastClickScrollParent)||n.fastClickLastScrollTop===n.scrollTop)||(this.needsClick(r)||(e.preventDefault(),this.sendClick(r,e)),!1)},s.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},s.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},s.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},s.prototype.destroy=function(){var e=this.layer;l&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},s.notNeeded=function(e){var t,o,i;if(void 0===window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!l)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(31<o&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(n&&10<=(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=i[2]&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"none"===e.style.touchAction},s.attach=function(e,t){return new s(e,t)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return s}):void 0!==module&&module.exports?(module.exports=s.attach,module.exports.FastClick=s):window.FastClick=s}(),function(e,v,t){"use strict";var o=v.module("ngRoute",["ng"]).provider("$route",function(){function g(e,t){return v.extend(Object.create(e),t)}var m={};function n(e,t){var o=t.caseInsensitiveMatch,i={originalPath:e,regexp:e},r=i.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,o,i){var n="?"===i?i:null,a="*"===i?i:null;return r.push({name:o,optional:!!n}),t=t||"",(n?"":t)+"(?:"+(n?t:"")+(a?"(.+?)":"([^/]+)")+(n||"")+")"+(n||"")}).replace(/([\/$\*])/g,"\\$1"),i.regexp=new RegExp("^"+e+"$",o?"i":""),i}this.when=function(e,t){var o=v.copy(t);if(v.isUndefined(o.reloadOnSearch)&&(o.reloadOnSearch=!0),v.isUndefined(o.caseInsensitiveMatch)&&(o.caseInsensitiveMatch=this.caseInsensitiveMatch),m[e]=v.extend(o,e&&n(e,o)),e){var i="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";m[i]=v.extend({redirectTo:e},n(i,o))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(n,a,o,r,s,l,c){var d,u,p=!1,h={routes:m,reload:function(){p=!0,n.$evalAsync(function(){e(),t()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw i("norout","Tried updating route when with no current route");e=v.extend({},this.current.params,e),a.path(f(this.current.$$route.originalPath,e)),a.search(e)}};return n.$on("$locationChangeStart",e),n.$on("$locationChangeSuccess",t),h;function e(e){var o,i,t=h.current;v.forEach(m,function(e,t){!i&&(o=function(e,t){var o=t.keys,i={};if(!t.regexp)return null;var n=t.regexp.exec(e);if(!n)return null;for(var a=1,r=n.length;a<r;++a){var s=o[a-1],l=n[a];s&&l&&(i[s.name]=l)}return i}(a.path(),e))&&((i=g(e,{params:v.extend({},a.search(),o),pathParams:o})).$$route=e)}),d=i||m.null&&g(m.null,{params:{},pathParams:{}}),(u=d&&t&&d.$$route===t.$$route&&v.equals(d.pathParams,t.pathParams)&&!d.reloadOnSearch&&!p)||!t&&!d||n.$broadcast("$routeChangeStart",d,t).defaultPrevented&&e&&e.preventDefault()}function t(){var t=h.current,i=d;u?(t.params=i.params,v.copy(t.params,o),n.$broadcast("$routeUpdate",t)):(i||t)&&(p=!1,(h.current=i)&&i.redirectTo&&(v.isString(i.redirectTo)?a.path(f(i.redirectTo,i.params)).search(i.params).replace():a.url(i.redirectTo(i.pathParams,a.path(),a.search())).replace()),r.when(i).then(function(){if(i){var e,t,o=v.extend({},i.resolve);return v.forEach(o,function(e,t){o[t]=v.isString(e)?s.get(e):s.invoke(e,null,null,t)}),v.isDefined(e=i.template)?v.isFunction(e)&&(e=e(i.params)):v.isDefined(t=i.templateUrl)&&(v.isFunction(t)&&(t=t(i.params)),t=c.getTrustedResourceUrl(t),v.isDefined(t)&&(i.loadedTemplateUrl=t,e=l(t))),v.isDefined(e)&&(o.$template=e),r.all(o)}}).then(function(e){i==h.current&&(i&&(i.locals=e,v.copy(i.params,o)),n.$broadcast("$routeChangeSuccess",i,t))},function(e){i==h.current&&n.$broadcast("$routeChangeError",i,t,e)}))}function f(e,n){var a=[];return v.forEach((e||"").split(":"),function(e,t){if(0===t)a.push(e);else{var o=e.match(/(\w+)(?:[?*])?(.*)/),i=o[1];a.push(n[i]),a.push(o[2]||""),delete n[i]}}),a.join("")}}]}),i=v.$$minErr("ngRoute");function n(h,f,g){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,r,e,t,s){var l,c,o,d=e.autoscroll,u=e.onload||"";function p(){o&&(g.cancel(o),o=null),l&&(l.$destroy(),l=null),c&&((o=g.leave(c)).then(function(){o=null}),c=null)}function i(){var e=h.current&&h.current.locals,t=e&&e.$template;if(v.isDefined(t)){var o=a.$new(),i=h.current,n=s(o,function(e){g.enter(e,null,c||r).then(function(){!v.isDefined(d)||d&&!a.$eval(d)||f()}),p()});c=n,(l=i.scope=o).$emit("$viewContentLoaded"),l.$eval(u)}else p()}a.$on("$routeChangeSuccess",i),i()}}}function a(r,s,l){return{restrict:"ECA",priority:-400,link:function(e,t){var o=l.current,i=o.locals;t.html(i.$template);var n=r(t.contents());if(o.controller){i.$scope=e;var a=s(o.controller,i);o.controllerAs&&(e[o.controllerAs]=a),t.data("$ngControllerController",a),t.children().data("$ngControllerController",a)}n(e)}}}o.provider("$routeParams",function(){this.$get=function(){return{}}}),o.directive("ngView",n),o.directive("ngView",a),n.$inject=["$route","$anchorScroll","$animate"],a.$inject=["$compile","$controller","$route"]}(window,window.angular),function(t,J,X){"use strict";J.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var n="$$ngAnimateChildren";return function(e,t,o){var i=o.ngAnimateChildren;J.isString(i)&&0===i.length?t.data(n,!0):e.$watch(i,function(e){t.data(n,!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(t,e){var o=e[0].body;return function(e){return t(function(){o.offsetWidth;e()})}}]).config(["$provide","$animateProvider",function(e,l){var j,H=J.noop,U=J.forEach,x=l.$$selectors,B=J.isArray,W=J.isString,f=J.isObject,q=1,E="$$ngAnimateState",A="ng-animate",M={running:!0};function V(e){for(var t=0;t<e.length;t++){var o=e[t];if(o.nodeType==q)return o}}function g(e){return e&&J.element(e)}function m(e){return J.element(V(e))}function z(e,t){return V(e)==V(t)}e.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(c,i,y,b,T,_,n,e,t,o){j=o,T.data(E,M);var a=n.$watch(function(){return t.totalPendingRequests},function(e,t){0===e&&(a(),n.$$postDigest(function(){n.$$postDigest(function(){M.running=!1})}))}),D=0,r=l.classNameFilter(),k=r?function(e){return r.test(e)}:function(){return!0};function d(e,t){var o=e.data(E)||{};return t&&(o.running=!0,o.structural=!0,e.data(E,o)),o.disabled||o.running&&o.structural}function u(e){var t,o=i.defer();return o.promise.$$cancelFn=function(){t&&t()},n.$$postDigest(function(){t=e(function(){o.resolve()})}),o.promise}function p(e){if(f(e))return e.tempClasses&&W(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e}function I(s,t,l,c){var e=s[0];if(e){var d,u;c&&(c.to=c.to||{},c.from=c.from||{}),B(l)&&(d=l[0],u=l[1],d?u?l=d+" "+u:(l=d,t="addClass"):(l=u,t="removeClass"));var o="setClass"==t,i=o||"addClass"==t||"removeClass"==t||"animate"==t,n=s.attr("class")+" "+l;if(k(n)){var a=H,r=[],p=[],h=H,f=[],g=[],m=(" "+n).replace(/\s+/g,".");return U(function(e){if(e){var t=[],o={},i=e.substr(1).split(".");(b.transitions||b.animations)&&t.push(y.get(x[""]));for(var n=0;n<i.length;n++){var a=i[n],r=x[a];r&&!o[a]&&(t.push(y.get(r)),o[a]=!0)}return t}}(m),function(e){!v(e,t)&&o&&(v(e,"addClass"),v(e,"removeClass"))}),{node:e,event:t,className:l,isClassBased:i,isSetClassOperation:o,applyStyles:function(){c&&s.css(J.extend(c.from||{},c.to||{}))},before:function(e){a=e,w(p,r,function(){a=H,e()})},after:function(e){h=e,w(g,f,function(){h=H,e()})},cancel:function(){U(r,function(e){(e||H)(!0)}),a(!0),U(f,function(e){(e||H)(!0)}),h(!0)}}}}function v(e,t){var o=e[t],i=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];if(o||i)return"leave"==t&&(i=o,o=null),g.push({event:t,fn:o}),p.push({event:t,fn:i}),!0}function w(e,i,n){var a=[];U(e,function(e){e.fn&&a.push(e)});var r=0;U(a,function(e,t){var o=function(){!function(e){if(i){if((i[e]||H)(),++r<a.length)return;i=null}n()}(t)};switch(e.event){case"setClass":i.push(e.fn(s,d,u,o,c));break;case"animate":i.push(e.fn(s,l,c.from,c.to,o));break;case"addClass":i.push(e.fn(s,d||l,o,c));break;case"removeClass":i.push(e.fn(s,u||l,o,c));break;default:i.push(e.fn(s,o,c))}}),i&&0===i.length&&n()}}return{animate:function(t,e,o,i,n){return i=i||"ng-inline-animate",(n=p(n)||{}).from=o?e:null,n.to=o||e,u(function(e){return h("animate",i,m(t),null,null,H,n,e)})},enter:function(t,o,i,n){return n=p(n),t=J.element(t),o=g(o),i=g(i),d(t,!0),c.enter(t,o,i),u(function(e){return h("enter","ng-enter",m(t),o,i,H,n,e)})},leave:function(t,o){return o=p(o),s(t=J.element(t)),d(t,!0),u(function(e){return h("leave","ng-leave",m(t),null,null,function(){c.leave(t)},o,e)})},move:function(t,o,i,n){return n=p(n),t=J.element(t),o=g(o),i=g(i),s(t),d(t,!0),c.move(t,o,i),u(function(e){return h("move","ng-move",m(t),o,i,H,n,e)})},addClass:function(e,t,o){return this.setClass(e,t,[],o)},removeClass:function(e,t,o){return this.setClass(e,[],t,o)},setClass:function(s,e,t,o){o=p(o);var l="$$animateClasses";if(d(s=m(s=J.element(s))))return c.$$setClassImmediately(s,e,t,o);var i,n=s.data(l),a=!!n;return n||(n={classes:{}}),i=n.classes,e=B(e)?e:e.split(" "),U(e,function(e){e&&e.length&&(i[e]=!0)}),t=B(t)?t:t.split(" "),U(t,function(e){e&&e.length&&(i[e]=!1)}),a?(o&&n.options&&(n.options=J.extend(n.options||{},o)),n.promise):(s.data(l,n={classes:i,options:o}),n.promise=u(function(e){var t=s.parent(),o=V(s),i=o.parentNode;if(i&&!i.$$NG_REMOVED&&!o.$$NG_REMOVED){var n=s.data(l);s.removeData(l);var a=s.data(E)||{},r=function(e,t,o){var n={};U(o=o||{},function(t,e){U(e.split(" "),function(e){n[e]=t})});var a=Object.create(null);U((e.attr("class")||"").split(/\s+/),function(e){a[e]=!0});var r=[],s=[];return U(t&&t.classes||[],function(e,t){var o=a[t],i=n[t]||{};!1===e?(o||"addClass"==i.event)&&s.push(t):!0===e&&(o&&"removeClass"!=i.event||r.push(t))}),0<r.length+s.length&&[r.join(" "),s.join(" ")]}(s,n,a.active);return r?h("setClass",r,s,t,null,function(){r[0]&&c.$$addClassImmediately(s,r[0]),r[1]&&c.$$removeClassImmediately(s,r[1])},n.options,e):e()}e()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)P(t);else{var o=t.data(E)||{};o.disabled=!0,t.data(E,o)}break;case 1:M.disabled=!e;break;default:e=!M.disabled}return!!e}};function h(o,i,n,e,t,a,r,s){var l=H,c=I(n,o,i,r);if(!c)return $(),k(),x(),C(),l;o=c.event,i=c.className;var d=J.element._data(c.node);if(d=d&&d.events,e||(e=t?t.parent():n.parent()),function(e,t){if(M.disabled)return!0;if(z(e,T))return M.running;var o,i,n;do{if(0===t.length)break;var a=z(t,T),r=a?M:t.data(E)||{};if(r.disabled)return!0;if(a&&(n=!0),!1!==o){var s=t.data("$$ngAnimateChildren");J.isDefined(s)&&(o=s)}i=i||r.running||r.last&&!r.last.isClassBased}while(t=t.parent());return!n||!o&&i}(n,e))return $(),k(),x(),C(),l;var u=n.data(E)||{},p=u.active||{},h=u.totalActive||0,f=u.last,g=!1;if(0<h){var m=[];if(c.isClassBased){if("setClass"==f.event)m.push(f),P(n,i);else if(p[i]){var v=p[i];v.event==o?g=!0:(m.push(v),P(n,i))}}else if("leave"==o&&p["ng-leave"])g=!0;else{for(var w in p)m.push(p[w]);u={},P(n,!0)}0<m.length&&U(m,function(e){e.cancel()})}if(!c.isClassBased||c.isSetClassOperation||"animate"==o||g||(g="addClass"==o==n.hasClass(i)),g)return $(),k(),x(),S(),l;p=u.active||{},h=u.totalActive||0,"leave"==o&&n.one("$destroy",function(e){var t=J.element(this),o=t.data(E);if(o){var i=o.active["ng-leave"];i&&(i.cancel(),P(t,"ng-leave"))}}),j.addClass(n,A),r&&r.tempClasses&&U(r.tempClasses,function(e){j.addClass(n,e)});var y=D++;return h++,p[i]=c,n.data(E,{last:c,active:p,index:y,totalActive:h}),k(),c.before(function(e){var t=n.data(E);e=e||!t||!t.active[i]||c.isClassBased&&t.active[i].event!=o,$(),!0===e?C():(x(),c.after(C))}),c.cancel;function b(e){var t="$animate:"+e;d&&d[t]&&0<d[t].length&&_(function(){n.triggerHandler(t,{event:o,className:i})})}function k(){b("before")}function x(){b("after")}function S(){b("close"),s()}function $(){$.hasBeenRun||($.hasBeenRun=!0,a())}function C(){if(!C.hasBeenRun){c&&c.applyStyles(),C.hasBeenRun=!0,r&&r.tempClasses&&U(r.tempClasses,function(e){j.removeClass(n,e)});var e=n.data(E);e&&(c&&c.isClassBased?P(n,i):(_(function(){var e=n.data(E)||{};y==e.index&&P(n,i)}),n.data(E,e))),S()}}}function s(e){var t=V(e);if(t){var o=J.isFunction(t.getElementsByClassName)?t.getElementsByClassName(A):t.querySelectorAll("."+A);U(o,function(e){var t=(e=J.element(e)).data(E);t&&t.active&&U(t.active,function(e){e.cancel()})})}}function P(e,t){if(z(e,T))M.disabled||(M.running=!1,M.structural=!1);else if(t){var o=e.data(E)||{},i=!0===t;!i&&o.active&&o.active[t]&&(o.totalActive--,delete o.active[t]),!i&&o.totalActive||(j.removeClass(e,A),e.removeData(E))}}}]),l.register("",["$window","$sniffer","$timeout","$$animateReflow",function(c,e,_,o){var d,D,u,I,P="";D=t.ontransitionend===X&&t.onwebkittransitionend!==X?(P="-webkit-",d="WebkitTransition","webkitTransitionEnd transitionend"):(d="transition","transitionend"),I=t.onanimationend===X&&t.onwebkitanimationend!==X?(P="-webkit-",u="WebkitAnimation","webkitAnimationEnd animationend"):(u="animation","animationend");var i,p="Duration",n="Property",h="Delay",f="IterationCount",a="PlayState",S="$$ngAnimateKey",E="$$ngAnimateCSS3Data",A=3,M=1.5,z=1e3,$={},C=0,r=[];function s(){i||(i=o(function(){r=[],i=null,$={}}))}function l(e,t){i&&i(),r.push(t),i=o(function(){U(r,function(e){e()}),r=[],i=null,$={}})}var g=null,m=0,v=[];function L(e,t){var o=V(e);e=J.element(o),v.push(e);var i=Date.now()+t;i<=m||(_.cancel(g),m=i,g=_(function(){U(v,function(e){var t=e.data(E);t&&U(t.closeAnimationFns,function(e){e()})}),v=[]},t,!1))}function O(e,t){var o=t?$[t]:null;if(!o){var a=0,r=0,s=0,l=0;U(e,function(e){if(e.nodeType==q){var t=c.getComputedStyle(e)||{},o=t[d+p];a=Math.max(w(o),a);var i=t[d+h];r=Math.max(w(i),r);t[u+h];l=Math.max(w(t[u+h]),l);var n=w(t[u+p]);0<n&&(n*=parseInt(t[u+f],10)||1),s=Math.max(n,s)}}),o={total:0,transitionDelay:r,transitionDuration:a,animationDelay:l,animationDuration:s},t&&($[t]=o)}return o}function w(e){var t=0,o=W(e)?e.split(/\s*,\s*/):[];return U(o,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function y(e,t,o,i){var n,a,r,s=0<=["ng-enter","ng-leave","ng-move"].indexOf(o),l=(a=(n=t).parent(),(r=a.data(S))||(a.data(S,++C),r=C),r+"-"+V(n).getAttribute("class")),c=l+" "+o,d=$[c]?++$[c].total:0,u={};if(0<d){var p=o+"-stagger",h=l+" "+p,f=!$[h];f&&j.addClass(t,p),u=O(t,h),f&&j.removeClass(t,p)}j.addClass(t,o);var g=t.data(E)||{},m=O(t,c),v=m.transitionDuration,w=m.animationDuration;if(s&&0===v&&0===w)return j.removeClass(t,o),!1;var y=i||s&&0<v,b=0<w&&0<u.animationDelay&&0===u.animationDuration,k=g.closeAnimationFns||[];t.data(E,{stagger:u,cacheKey:c,running:g.running||0,itemIndex:d,blockTransition:y,closeAnimationFns:k});var x=V(t);return y&&(R(x,!0),i&&t.css(i)),b&&F(x,!0),!0}function R(e,t){e.style[d+n]=t?"none":""}function F(e,t){e.style[u+a]=t?"paused":""}function b(e,t,o,i){if(y(0,t,o,i))return function(e){e&&N(t,o)}}function k(e,t,o,i,n){if(t.data(E))return function(e,o,i,n,t){var a=V(o),r=o.data(E);if(-1!=a.getAttribute("class").indexOf(i)&&r){var s="",l="";U(i.split(" "),function(e,t){var o=(0<t?" ":"")+e;s+=o+"-active",l+=o+"-pending"});var c=[],d=r.itemIndex,u=r.stagger,p=0;if(0<d){var h=0;0<u.transitionDelay&&0===u.transitionDuration&&(h=u.transitionDelay*d);var f=0;0<u.animationDelay&&0===u.animationDuration&&(f=u.animationDelay*d,c.push(P+"animation-play-state")),p=Math.round(100*Math.max(h,f))/100}p||(j.addClass(o,s),r.blockTransition&&R(a,!1));var g=r.cacheKey+" "+s,m=O(o,g),v=Math.max(m.transitionDuration,m.animationDuration);if(0===v)return j.removeClass(o,s),N(o,i),void n();!p&&t&&0<Object.keys(t).length&&(m.transitionDuration||(o.css("transition",m.animationDuration+"s linear all"),c.push("transition")),o.css(t));var w=Math.max(m.transitionDelay,m.animationDelay),y=w*z;if(0<c.length){var b=a.getAttribute("style")||"";";"!==b.charAt(b.length-1)&&(b+=";"),a.setAttribute("style",b+" ")}var k,x=Date.now(),S=I+" "+D,$=(p+(w+v)*M)*z;return 0<p&&(j.addClass(o,l),k=_(function(){k=null,0<m.transitionDuration&&R(a,!1),0<m.animationDuration&&F(a,!1),j.addClass(o,s),j.removeClass(o,l),t&&(0===m.transitionDuration&&o.css("transition",m.animationDuration+"s linear all"),o.css(t),c.push("transition"))},p*z,!1)),o.on(S,T),r.closeAnimationFns.push(function(){C(),n()}),r.running++,L(o,$),C}function C(){o.off(S,T),j.removeClass(o,s),j.removeClass(o,l),k&&_.cancel(k),N(o,i);var e=V(o);for(var t in c)e.style.removeProperty(c[t])}function T(e){e.stopPropagation();var t=e.originalEvent||e,o=t.$manualTimeStamp||t.timeStamp||Date.now(),i=parseFloat(t.elapsedTime.toFixed(A));Math.max(o-x,0)>=y&&v<=i&&n()}n()}(0,t,o,i,n);N(t,o),i()}function x(e,t,o,i,n){var a=b(0,t,o,n.from);if(!a)return s(),void i();var r=a;return l(0,function(){r=k(0,t,o,i,n.to)}),function(e){(r||H)(e)}}function N(e,t){j.removeClass(e,t);var o=e.data(E);o&&(o.running&&o.running--,o.running&&0!==o.running||e.removeData(E))}return{animate:function(e,t,o,i,n,a){return(a=a||{}).from=o,a.to=i,x(0,e,t,n,a)},enter:function(e,t,o){return x(0,e,"ng-enter",t,o=o||{})},leave:function(e,t,o){return x(0,e,"ng-leave",t,o=o||{})},move:function(e,t,o){return x(0,e,"ng-move",t,o=o||{})},beforeSetClass:function(e,t,o,i,n){n=n||{};var a=b(0,e,T(o,"-remove")+" "+T(t,"-add"),n.from);if(a)return l(0,i),a;s(),i()},beforeAddClass:function(e,t,o,i){i=i||{};var n=b(0,e,T(t,"-add"),i.from);if(n)return l(0,o),n;s(),o()},beforeRemoveClass:function(e,t,o,i){i=i||{};var n=b(0,e,T(t,"-remove"),i.from);if(n)return l(0,o),n;s(),o()},setClass:function(e,t,o,i,n){return n=n||{},k(0,e,(o=T(o,"-remove"))+" "+(t=T(t,"-add")),i,n.to)},addClass:function(e,t,o,i){return i=i||{},k(0,e,T(t,"-add"),o,i.to)},removeClass:function(e,t,o,i){return i=i||{},k(0,e,T(t,"-remove"),o,i.to)}};function T(e,o){var i="";return e=B(e)?e:e.split(/\s+/),U(e,function(e,t){e&&0<e.length&&(i+=(0<t?" ":"")+e+o)}),i}}])}])}(window,window.angular),function(e,p,t){"use strict";var d=p.$$minErr("$sanitize");var u=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,h=/^<\/\s*([\w:-]+)[^>]*>/,f=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,g=/^</,m=/^<\//,v=/<!--(.*?)-->/g,w=/<!DOCTYPE([^>]*?)>/i,y=/<!\[CDATA\[(.*?)]]>/g,o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i=/([^\#-~| |!])/g,b=_("area,br,col,hr,img,wbr"),n=_("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),a=_("rp,rt"),k=p.extend({},a,n),x=p.extend({},n,_("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),S=p.extend({},a,_("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),r=_("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),$=_("script,style"),s=p.extend({},b,x,S,k,r),l=_("background,cite,href,longdesc,src,usemap,xlink:href"),c=_("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),C=_("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),T=p.extend({},l,C,c);function _(e){var t,o={},i=e.split(",");for(t=0;t<i.length;t++)o[i[t]]=!0;return o}var D=document.createElement("pre"),I=/^(\s*)([\s\S]*?)(\s*)$/;function P(e){if(!e)return"";var t=I.exec(e),o=t[1],i=t[3],n=t[2];return n&&(D.innerHTML=n.replace(/</g,"&lt;"),n="textContent"in D?D.textContent:D.innerText),o+n+i}function E(e){return e.replace(/&/g,"&amp;").replace(o,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(i,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function A(e,a){var o=!1,r=p.bind(e,e.push);return{start:function(n,e,t){n=p.lowercase(n),!o&&$[n]&&(o=n),o||!0!==s[n]||(r("<"),r(n),p.forEach(e,function(e,t){var o=p.lowercase(t),i="img"===n&&"src"===o||"background"===o;!0!==T[o]||!0===l[o]&&!a(e,i)||(r(" "),r(t),r('="'),r(E(e)),r('"'))}),r(t?"/>":">"))},end:function(e){e=p.lowercase(e),o||!0!==s[e]||(r("</"),r(e),r(">")),e==o&&(o=!1)},chars:function(e){o||r(E(e))}}}p.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(o){return function(e){var t=[];return function(e,n){"string"!=typeof e&&(e=null==e?"":""+e);var t,o,i,a,s=[],r=e;for(s.last=function(){return s[s.length-1]};e;){if(o=!(a=""),s.last()&&$[s.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+s.last()+"[^>]*>","i"),function(e,t){return t=t.replace(v,"$1").replace(y,"$1"),n.chars&&n.chars(P(t)),""}),c("",s.last())):(0===e.indexOf("\x3c!--")?0<=(t=e.indexOf("--",4))&&e.lastIndexOf("--\x3e",t)===t&&(n.comment&&n.comment(e.substring(4,t)),e=e.substring(t+3),o=!1):w.test(e)?(i=e.match(w))&&(e=e.replace(i[0],""),o=!1):m.test(e)?(i=e.match(h))&&(e=e.substring(i[0].length),i[0].replace(h,c),o=!1):g.test(e)&&((i=e.match(u))?(i[4]&&(e=e.substring(i[0].length),i[0].replace(u,l)),o=!1):(a+="<",e=e.substring(1))),o&&(t=e.indexOf("<"),a+=t<0?e:e.substring(0,t),e=t<0?"":e.substring(t),n.chars&&n.chars(P(a)))),e==r)throw d("badparse","The sanitizer was unable to parse the following block of html: {0}",e);r=e}function l(e,t,o,i){if(t=p.lowercase(t),x[t])for(;s.last()&&S[s.last()];)c("",s.last());k[t]&&s.last()==t&&c("",t),(i=b[t]||!!i)||s.push(t);var r={};o.replace(f,function(e,t,o,i,n){var a=o||i||n||"";r[t]=P(a)}),n.start&&n.start(t,r,i)}function c(e,t){var o,i=0;if(t=p.lowercase(t))for(i=s.length-1;0<=i&&s[i]!=t;i--);if(0<=i){for(o=s.length-1;i<=o;o--)n.end&&n.end(s[o]);s.length=i}}c()}(e,A(t,function(e,t){return!/^unsafe/.test(o(e,t))})),t.join("")}}]}),p.module("ngSanitize").filter("linky",["$sanitize",function(c){var d=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,u=/^mailto:/;return function(e,o){if(!e)return e;for(var t,i,n,a=e,r=[];t=a.match(d);)i=t[0],t[2]||t[4]||(i=(t[3]?"http://":"mailto:")+i),n=t.index,s(a.substr(0,n)),l(i,t[0].replace(u,"")),a=a.substring(n+t[0].length);return s(a),c(r.join(""));function s(e){var t,o;e&&r.push((t=e,A(o=[],p.noop).chars(t),o.join("")))}function l(e,t){r.push("<a "),p.isDefined(o)&&r.push('target="',o,'" '),r.push('href="',e.replace(/"/g,"&quot;"),'">'),s(t),r.push("</a>")}}}])}(window,window.angular),function(e,S,t){"use strict";var o=S.module("ngTouch",[]);function i(c,d,u){o.directive(c,["$parse","$swipe",function(s,l){return function(o,i,e){var n,a,r=s(e[c]);var t=["touch"];S.isDefined(e.ngSwipeDisableMouse)||t.push("mouse"),l.bind(i,{start:function(e,t){n=e,a=!0},cancel:function(e){a=!1},end:function(e,t){(function(e){if(!n)return!1;var t=Math.abs(e.y-n.y),o=(e.x-n.x)*d;return a&&t<75&&0<o&&30<o&&t/o<.3})(e)&&o.$apply(function(){i.triggerHandler(u),r(o,{$event:t})})}},t)}}])}o.factory("$swipe",[function(){var n={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};function c(e){var t=e.touches&&e.touches.length?e.touches:[e],o=e.changedTouches&&e.changedTouches[0]||e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]||t[0].originalEvent||t[0];return{x:o.clientX,y:o.clientY}}function d(e,o){var i=[];return S.forEach(e,function(e){var t=n[e][o];t&&i.push(t)}),i.join(" ")}return{bind:function(e,o,t){var i,n,a,r,s=!1;t=t||["mouse","touch"],e.on(d(t,"start"),function(e){a=c(e),s=!0,n=i=0,r=a,o.start&&o.start(a,e)});var l=d(t,"cancel");l&&e.on(l,function(e){s=!1,o.cancel&&o.cancel(e)}),e.on(d(t,"move"),function(e){if(s&&a){var t=c(e);if(i+=Math.abs(t.x-r.x),n+=Math.abs(t.y-r.y),r=t,!(i<10&&n<10))return i<n?(s=!1,void(o.cancel&&o.cancel(e))):(e.preventDefault(),void(o.move&&o.move(t,e)))}}),e.on(d(t,"end"),function(e){s&&(s=!1,o.end&&o.end(c(e),e))})}}}]),o.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]),o.directive("ngClick",["$parse","$timeout","$rootElement",function(e,n,v){var w,y,a,r=2500,l=25,s="ng-click-active";function b(e,t,o){for(var i=0;i<e.length;i+=2)if(n=e[i],a=e[i+1],r=t,s=o,Math.abs(n-r)<l&&Math.abs(a-s)<l)return e.splice(i,i+2),!0;var n,a,r,s;return!1}function k(e){if(!(Date.now()-w>r)){var t=e.touches&&e.touches.length?e.touches:[e],o=t[0].clientX,i=t[0].clientY;o<1&&i<1||a&&a[0]===o&&a[1]===i||(a&&(a=null),"label"===e.target.tagName.toLowerCase()&&(a=[o,i]),b(y,o,i)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur()))}}function x(e){var t=e.touches&&e.touches.length?e.touches:[e],o=t[0].clientX,i=t[0].clientY;y.push(o,i),n(function(){for(var e=0;e<y.length;e+=2)if(y[e]==o&&y[e+1]==i)return void y.splice(e,e+2)},r,!1)}return function(o,c,d){var u,p,h,f,i=e(d.ngClick),g=!1;function m(){g=!1,c.removeClass(s)}c.on("touchstart",function(e){g=!0,3==(u=e.target?e.target:e.srcElement).nodeType&&(u=u.parentNode),c.addClass(s),p=Date.now();var t=e.touches&&e.touches.length?e.touches:[e],o=t[0].originalEvent||t[0];h=o.clientX,f=o.clientY}),c.on("touchmove",function(e){m()}),c.on("touchcancel",function(e){m()}),c.on("touchend",function(e){var t,o,i=Date.now()-p,n=e.changedTouches&&e.changedTouches.length?e.changedTouches:e.touches&&e.touches.length?e.touches:[e],a=n[0].originalEvent||n[0],r=a.clientX,s=a.clientY,l=Math.sqrt(Math.pow(r-h,2)+Math.pow(s-f,2));g&&i<750&&l<12&&(t=r,o=s,y||(v[0].addEventListener("click",k,!0),v[0].addEventListener("touchstart",x,!0),y=[]),w=Date.now(),b(y,t,o),u&&u.blur(),S.isDefined(d.disabled)&&!1!==d.disabled||c.triggerHandler("click",[e])),m()}),c.onclick=function(e){},c.on("click",function(e,t){o.$apply(function(){i(o,{$event:t||e})})}),c.on("mousedown",function(e){c.addClass(s)}),c.on("mousemove mouseup",function(e){c.removeClass(s)})}}]),i("ngSwipeLeft",-1,"swipeleft"),i("ngSwipeRight",1,"swiperight")}(window,window.angular),angular.module("ivpusic.cookie",["ipCookie"]),angular.module("ipCookie",["ng"]).factory("ipCookie",["$document",function(p){"use strict";return function(){function i(e,t,o){var i,n,a,r,s,l,c,d,u;if(o=o||{},void 0!==t)return t="object"==typeof t?JSON.stringify(t):t+"","number"==typeof o.expires&&(u=o.expires,o.expires=new Date,-1===u?o.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):void 0!==o.expirationUnit?"hours"===o.expirationUnit?o.expires.setHours(o.expires.getHours()+u):"minutes"===o.expirationUnit?o.expires.setMinutes(o.expires.getMinutes()+u):"seconds"===o.expirationUnit?o.expires.setSeconds(o.expires.getSeconds()+u):o.expires.setDate(o.expires.getDate()+u):o.expires.setDate(o.expires.getDate()+u)),p[0].cookie=[encodeURIComponent(e),"=",encodeURIComponent(t),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("");for(n=[],(d=p[0].cookie)&&(n=d.split("; ")),c=!(i={}),a=0;n.length>a;++a)if(n[a]&&(s=(r=n[a]).indexOf("="),l=r.substring(0,s),t=decodeURIComponent(r.substring(s+1)),void 0===e||e===l)){try{i[l]=JSON.parse(t)}catch(e){i[l]=t}if(e===l)return i[l];c=!0}return c&&void 0===e?i:void 0}return i.remove=function(e,t){var o=void 0!==i(e);return o&&(t||(t={}),t.expires=-1,i(e,"",t)),o},i}()}]),function(e,l,t){"use strict";var c,d={},u={sdk:!1,ready:!1};l.module("facebook",[]).value("settings",d).value("flags",u).provider("Facebook",[function(){d.appId=null,this.setAppId=function(e){d.appId=e},this.getAppId=function(){return d.appId},d.locale="en_US",this.setLocale=function(e){d.locale=e},this.getLocale=function(){return d.locale},d.status=!0,this.setStatus=function(e){d.status=e},this.getStatus=function(){return d.status},d.channelUrl=null,this.setChannel=function(e){d.channelUrl=e},this.getChannel=function(){return d.channelUrl},d.cookie=!0,this.setCookie=function(e){d.cookie=e},this.getCookie=function(){return d.cookie},d.xfbml=!0,this.setXfbml=function(e){d.xfbml=e},this.getXfbml=function(){return d.xfbml},this.setAuthResponse=function(e){d.authResponse=e||!0},this.getAuthResponse=function(){return d.authResponse},d.frictionlessRequests=!1,this.setFrictionlessRequests=function(e){d.frictionlessRequests=e},this.getFrictionlessRequests=function(){return d.frictionlessRequests},d.hideFlashCallback=null,this.setHideFlashCallback=function(e){d.hideFlashCallback=e||null},this.getHideFlashCallback=function(){return d.hideFlashCallback},this.setInitCustomOption=function(e,t){return!!l.isString(e)&&(d[e]=t,d[e])},this.getInitOption=function(e){return!(!l.isString(e)||!d.hasOwnProperty(e))&&d[e]},d.loadSDK=!0,this.setLoadSDK=function(e){d.loadSDK=!!e},this.getLoadSDK=function(){return d.loadSDK},d.version="v2.0",this.setSdkVersion=function(e){d.version=e},this.getSdkVersion=function(){return d.version},this.init=function(e,t){l.isString(e)&&(d.appId=e||d.appId),l.isObject(e)&&l.extend(d,e),l.isDefined(t)&&(d.loadSDK=!!t)},this.$get=["$q","$rootScope","$timeout","$window",function(a,e,r,s){function t(){this.appId=d.appId}return t.prototype.isReady=function(){return u.ready},t.prototype.login=function(){var o,i,t=a.defer(),e=Array.prototype.slice.call(arguments);return l.forEach(e,function(e,t){l.isFunction(e)&&(o=e,i=t)}),l.isFunction(o)&&l.isNumber(i)&&e.splice(i,1,function(e){r(function(){l.isUndefined(e.error)?t.resolve(e):t.reject(e),l.isFunction(o)&&o(e)})}),this.isReady()?s.FB.login.apply(s.FB,e):r(function(){t.reject("Facebook.login() called before Facebook SDK has loaded.")}),t.promise},l.forEach(["logout","api","ui","getLoginStatus"],function(n){t.prototype[n]=function(){var o,i,t=a.defer(),e=Array.prototype.slice.call(arguments);return l.forEach(e,function(e,t){l.isFunction(e)&&(o=e,i=t)}),l.isFunction(o)&&l.isNumber(i)&&e.splice(i,1,function(e){r(function(){e&&void 0===e.error?t.resolve(e):t.reject(e),l.isFunction(o)&&o(e)})}),r(function(){c.promise.then(function(){s.FB[n].apply(FB,e)},function(){throw"Facebook API could not be initialized properly"})}),t.promise}}),t.prototype.parseXFBML=function(){var e=a.defer();return r(function(){c.promise.then(function(){s.FB.XFBML.parse(),e.resolve()},function(){throw"Facebook API could not be initialized properly"})}),e.promise},t.prototype.subscribe=function(){var o,i,t=a.defer(),e=Array.prototype.slice.call(arguments);return l.forEach(e,function(e,t){l.isFunction(e)&&(o=e,i=t)}),l.isFunction(o)&&l.isNumber(i)&&e.splice(i,1,function(e){r(function(){e&&void 0===e.error?t.resolve(e):t.reject(e),l.isFunction(o)&&o(e)})}),r(function(){c.promise.then(function(){s.FB.Event.subscribe.apply(FB,e)},function(){throw"Facebook API could not be initialized properly"})}),t.promise},t.prototype.unsubscribe=function(){var o,i,t=a.defer(),e=Array.prototype.slice.call(arguments);return l.forEach(e,function(e,t){l.isFunction(e)&&(o=e,i=t)}),l.isFunction(o)&&l.isNumber(i)&&e.splice(i,1,function(e){r(function(){e&&void 0===e.error?t.resolve(e):t.reject(e),l.isFunction(o)&&o(e)})}),r(function(){c.promise.then(function(){s.FB.Event.unsubscribe.apply(FB,e)},function(){throw"Facebook API could not be initialized properly"})}),t.promise},new t}]}]).run(["$rootScope","$q","$window","$timeout",function(o,e,t,i){c=e.defer();var n,a,r,s=d.loadSDK;delete d.loadSDK,t.fbAsyncInit=function(){i(function(){if(!d.appId)throw"Missing appId setting.";FB.init(d),u.ready=!0,l.forEach({"auth.login":"login","auth.logout":"logout","auth.prompt":"prompt","auth.sessionChange":"sessionChange","auth.statusChange":"statusChange","auth.authResponseChange":"authResponseChange","xfbml.render":"xfbmlRender","edge.create":"like","edge.remove":"unlike","comment.create":"comment","comment.remove":"uncomment"},function(t,e){FB.Event.subscribe(e,function(e){i(function(){o.$broadcast("Facebook:"+t,e)})})}),o.$broadcast("Facebook:load"),c.resolve(FB)})},(n=document.getElementById("fb-root"))||((n=document.createElement("div")).id="fb-root",document.body.insertBefore(n,document.body.childNodes[0])),s&&(a="//connect.facebook.net/"+d.locale+"/sdk.js",(r=document.createElement("script")).id="facebook-jssdk",r.async=!0,-1!==["file","file:"].indexOf(t.location.protocol)&&(a="https:"+a),r.src=a,r.onload=function(){u.sdk=!0},document.getElementsByTagName("head")[0].appendChild(r))}])}(window,angular),function(e){function a(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function r(e,t){return 100*t/(e[1]-e[0])}function s(e,t){for(var o=1;e>=t[o];)o+=1;return o}function t(e,t,o,i){for(var n in this.xPct=[],this.xVal=[],this.xSteps=[i||!1],this.xNumSteps=[!1],this.snap=t,this.direction=o,e)if(e.hasOwnProperty(n)){if(i=void 0,"number"==typeof(o=e[t=n])&&(o=[o]),"[object Array]"!==Object.prototype.toString.call(o))throw Error("noUiSlider: 'range' contains invalid value.");if(!a(i="min"===t?0:"max"===t?100:parseFloat(t))||!a(o[0]))throw Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(i),this.xVal.push(o[0]),i?this.xSteps.push(!isNaN(o[1])&&o[1]):isNaN(o[1])||(this.xSteps[0]=o[1])}for(n in this.xNumSteps=this.xSteps.slice(0),this.xNumSteps)this.xNumSteps.hasOwnProperty(n)&&(e=Number(n),(t=this.xNumSteps[n])&&(this.xSteps[e]=r([this.xVal[e],this.xVal[e+1]],t)/(100/(this.xPct[e+1]-this.xPct[e]))))}t.prototype.getMargin=function(e){return 2===this.xPct.length&&r(this.xVal,e)},t.prototype.toStepping=function(e){var t=this.xVal,o=this.xPct;if(e>=t.slice(-1)[0])e=100;else{var i,n,a=s(e,t);i=t[a-1],n=t[a],t=o[a-1],o=o[a],e=t+(e=r(i=[i,n],i[0]<0?e+Math.abs(i[0]):e-i[0]))/(100/(o-t))}return this.direction&&(e=100-e),e},t.prototype.fromStepping=function(e){var t;this.direction&&(e=100-e);var o=this.xVal;if(t=this.xPct,100<=e)t=o.slice(-1)[0];else{var i,n,a=s(e,t);i=o[a-1],n=o[a],o=t[a-1],i=[i,n],t=100/(t[a]-o)*(e-o)*(i[1]-i[0])/100+i[0]}return e=Math.pow(10,7),Number((Math.round(t*e)/e).toFixed(7))},t.prototype.getStep=function(e){this.direction&&(e=100-e);var t=this.xPct,o=this.xSteps,i=this.snap;if(100!==e){var n=s(e,t);e=i?(o=t[n-1],((t=t[n])-o)/2<e-o?t:o):t=o[n-1]?(i=t[n-1],o=o[n-1],i+(t=Math.round((e-t[n-1])/o)*o)):e}return this.direction&&(e=100-e),e},t.prototype.getApplicableStep=function(e){var t=s(e,this.xPct);return e=100===e?2:1,[this.xNumSteps[t-2],this.xVal[t-e],this.xNumSteps[t-e]]},t.prototype.convert=function(e){return this.getStep(this.toStepping(e))},e.noUiSlider={Spectrum:t}}(window.jQuery||window.Zepto),function(n){function o(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function t(e,t){if(!o(t))throw Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function a(e,t){if("object"!=typeof t||n.isArray(t))throw Error("noUiSlider: 'range' is not an object.");if(void 0===t.min||void 0===t.max)throw Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new n.noUiSlider.Spectrum(t,e.snap,e.dir,e.singleStep)}function r(e,t){var o=t;if(t=n.isArray(o)?o:[o],!n.isArray(t)||!t.length||2<t.length)throw Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length,e.start=t}function s(e,t){if("boolean"!=typeof(e.snap=t))throw Error("noUiSlider: 'snap' option must be a boolean.")}function l(e,t){if("boolean"!=typeof(e.animate=t))throw Error("noUiSlider: 'animate' option must be a boolean.")}function c(e,t){if("lower"===t&&1===e.handles)e.connect=1;else if("upper"===t&&1===e.handles)e.connect=2;else if(!0===t&&2===e.handles)e.connect=3;else{if(!1!==t)throw Error("noUiSlider: 'connect' option doesn't match handle count.");e.connect=0}}function d(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function u(e,t){if(!o(t))throw Error("noUiSlider: 'margin' option must be numeric.");if(e.margin=e.spectrum.getMargin(t),!e.margin)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function p(e,t){if(!o(t))throw Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(t),!e.limit)throw Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function h(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1,e.connect=[0,2,1,3][e.connect];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function f(e,t){if("string"!=typeof t)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var o=0<=t.indexOf("tap"),i=0<=t.indexOf("drag"),n=0<=t.indexOf("fixed"),a=0<=t.indexOf("snap");e.events={tap:o||a,drag:i,fixed:n,snap:a}}function g(e,t){if("function"==typeof(e.format=t).to&&"function"==typeof t.from)return!0;throw Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}var m={to:function(e){return e.toFixed(2)},from:Number};n.noUiSlider.testOptions=function(o){var e,i={margin:0,limit:0,animate:!0,format:m};return e={step:{r:!1,t:t},start:{r:!0,t:r},connect:{r:!0,t:c},direction:{r:!0,t:h},snap:{r:!1,t:s},animate:{r:!1,t:l},range:{r:!0,t:a},orientation:{r:!1,t:d},margin:{r:!1,t:u},limit:{r:!1,t:p},behaviour:{r:!0,t:f},format:{r:!1,t:g}},o=n.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},o),n.each(e,function(e,t){if(void 0===o[e]){if(t.r)throw Error("noUiSlider: '"+e+"' is required.");return!0}t.t(i,o[e])}),i.style=i.ort?"top":"left",i}}(window.jQuery||window.Zepto),function(S){function $(e){return Math.max(Math.min(e,100),0)}function C(e,t,o){e.addClass(t),setTimeout(function(){e.removeClass(t)},o)}function o(e,c,t){function s(){return h[["width","height"][c.ort]]()}function l(e){var t,o=[w.val()];for(t=0;t<e.length;t+=1)w.trigger(e[t],o)}function o(e){return 1===e.length?e[0]:c.dir?e.reverse():e}function d(e){var t=S.inArray(e,x);w[0].linkAPI&&w[0].linkAPI[e]&&w[0].linkAPI[e].change(k[t],f[t].children(),w)}function u(e,t,o){var i=e[0]!==f[0][0]?1:0,n=y[0]+c.margin,a=y[1]-c.margin,r=y[0]+c.limit,s=y[1]-c.limit;return 1<f.length&&(t=i?Math.max(t,n):Math.min(t,a)),!1!==o&&c.limit&&1<f.length&&(t=i?Math.min(t,r):Math.max(t,s)),t=b.getStep(t),(t=$(parseFloat(t.toFixed(7))))!==y[i]&&(e.css(c.style,t+"%"),e.is(":first-child")&&e.toggleClass(D[17],50<t),y[i]=t,k[i]=b.fromStepping(t),d(x[i]),!0)}function i(e,t,s,l){return e=e.replace(/\s/g,".nui ")+".nui",t.on(e,function(e){if(w.attr("disabled")||w.hasClass(D[14]))return!1;e.preventDefault();var t,o,i=0===e.type.indexOf("touch"),n=0===e.type.indexOf("mouse"),a=0===e.type.indexOf("pointer"),r=e;0===e.type.indexOf("MSPointer")&&(a=!0),e.originalEvent&&(e=e.originalEvent),i&&(t=e.changedTouches[0].pageX,o=e.changedTouches[0].pageY),(n||a)&&(a||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),t=e.clientX+window.pageXOffset,o=e.clientY+window.pageYOffset),r.points=[t,o],r.cursor=n,(e=r).calcPoint=e.points[c.ort],s(e,l)})}function n(e,t){var o,i=t.handles||f,n=!1,a=(n=100*(e.calcPoint-t.start)/s(),i[0][0]!==f[0][0]?1:0),r=t.positions;o=n+r[0],n+=r[1],o=1<i.length?(o<0&&(n+=Math.abs(o)),100<n&&(o-=n-100),[$(o),$(n)]):[o,n],n=u(i[0],o[a],1===i.length),1<i.length&&(n=u(i[1],o[a?0:1],!1)||n),n&&l(["slide"])}function a(e){S("."+D[15]).removeClass(D[15]),e.cursor&&S("body").css("cursor","").off(".nui"),T.off(".nui"),w.removeClass(D[12]),l(["set","change"])}function r(e,t){1===t.handles.length&&t.handles[0].children().addClass(D[15]),e.stopPropagation(),i(_.move,T,n,{start:e.calcPoint,handles:t.handles,positions:[y[0],y[f.length-1]]}),i(_.end,T,a,null),e.cursor&&(S("body").css("cursor",S(e.target).css("cursor")),1<f.length&&w.addClass(D[12]),S("body").on("selectstart.nui",!1))}function p(e){var t=e.calcPoint,o=0;e.stopPropagation(),S.each(f,function(){o+=this.offset()[c.style]}),o=t<o/2||1===f.length?0:1,t=100*(t-=h.offset()[c.style])/s(),c.events.snap||C(w,D[14],300),u(f[o],t),l(["slide","set","change"]),c.events.snap&&r(e,{handles:[f[o]]})}var h,f,g,m,v,w=S(e),y=[-1,-1],b=c.spectrum,k=[],x=["lower","upper"].slice(0,c.handles);if(c.dir&&x.reverse(),e.LinkUpdate=d,e.LinkConfirm=function(e,t){var o,i=S.inArray(e,x);return t&&t.appendTo(f[i].children()),c.dir&&(i=1===i?0:1),o=i,function(e,t){w.val([o?null:t,o?t:null],!0)}},e.LinkDefaultFormatter=c.format,e.LinkDefaultFlag="lower",e.reappend=function(){var e,t;for(e=0;e<x.length;e+=1)this.linkAPI&&this.linkAPI[t=x[e]]&&this.linkAPI[t].reconfirm(t)},w.hasClass(D[0]))throw Error("Slider was already initialized.");g=c.dir,m=c.ort,(v=w).addClass([D[0],D[8+g],D[4+m]].join(" ")),h=S("<div/>").appendTo(v).addClass(D[1]),f=function(e,t,o){var i,n,a,r,s,l=[];for(i=0;i<e;i+=1)l.push((n=t,a=i,r=void 0,s=void 0,r=S("<div><div/></div>").addClass(D[2]),s=["-lower","-upper"],n&&s.reverse(),r.children().addClass(D[3]+" "+D[3]+s[a]),r).appendTo(o));return l}(c.handles,c.dir,h),function(e,t,o){switch(e){case 1:t.addClass(D[7]),o[0].addClass(D[6]);break;case 3:o[1].addClass(D[6]);case 2:o[0].addClass(D[7]);case 0:t.addClass(D[6])}}(c.connect,w,f),function(e){var t;if(!e.fixed)for(t=0;t<f.length;t+=1)i(_.start,f[t].children(),r,{handles:[f[t]]});e.tap&&i(_.start,h,p,{handles:f}),e.drag&&(t=h.find("."+D[7]).addClass(D[10]),e.fixed&&(t=t.add(h.children().not(t).children())),i(_.start,t,r,{handles:f}))}(c.events),e.vSet=function(e){if(w[0].LinkIsEmitting)return this;var t,o,i,n;for(e=S.isArray(e)?e:[e],c.dir&&1<c.handles&&e.reverse(),c.animate&&-1!==y[0]&&C(w,D[14],300),t=1<f.length?3:1,1===e.length&&(t=1),c.limit&&(t+=1),o=0;o<t;o+=1)null!==(n=e[i=o%2])&&!1!==n&&("number"==typeof n&&(n=String(n)),(!1===(n=c.format.from(n))||isNaN(n)||!1===u(f[i],b.toStepping(n),o===3-c.dir))&&d(x[i]));return l(["set"]),this},e.vGet=function(){var e,t=[];for(e=0;e<c.handles;e+=1)t[e]=c.format.to(k[e]);return o(t)},e.destroy=function(){return S(this).off(".nui").removeClass(D.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,t},e.getCurrentStep=function(){return o(S.map(y,function(e,t){var o=b.getApplicableStep(e);return[[k[t]-o[2]>=o[1]?o[2]:o[0],o[2]]]}))},e.getInfo=function(){return[b,c.style,c.ort]},w.val(c.start)}function i(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}var T=S(document),n=S.fn.val,_=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},D="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active  noUi-stacking".split(" ");S.fn.val=function(){var e=arguments,t=S(this[0]);return arguments.length?this.each(function(){(S(this).hasClass(D[0])?i:n).apply(S(this),e)}):(t.hasClass(D[0])?i:n).call(t)},S.fn.noUiSlider=function(e,t){return(t?function(i){return this.each(function(){if(this.destroy){var e=S(this).val(),t=this.destroy(),o=S.extend({},t,i);S(this).noUiSlider(o),this.reappend(),t.start===o.start&&S(this).val(e)}else S(this).noUiSlider(i)})}:function(e){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var t=S.noUiSlider.testOptions(e,this);return this.each(function(){o(this,t,e)})}).call(this,e)}}(window.jQuery||window.Zepto);var analytics=new Analytics,startTime=(new Date).getTime(),loadedContent=!1,trackJsInfo=function(e,t){var o=Array.prototype.slice.call(arguments,1);e&&e.trackJs&&e.trackJs.console.info.apply(this,o)};function isLocalStorageNameSupported(){try{var e=window.localStorage;return e.setItem("test","1"),e.removeItem("test"),!0}catch(e){return!(location.href="/support/need-cookies")}}if(1==isLocalStorageNameSupported()){var modulesToLoad=["ngRoute","ngSanitize","ngTouch","ngAnimate","ipCookie"];"undefined"!=typeof DONT_LOAD_FACEBOOK&&DONT_LOAD_FACEBOOK||modulesToLoad.push("facebook");var module=angular.module("wikiwand",modulesToLoad,["$rootScopeProvider",function(e){e.digestTtl(10)}]);module.directive("selectOnClick",["$window",function(i){return{restrict:"A",link:function(e,t,o){t.on("focus",function(){i.getSelection().toString()||this.setSelectionRange(0,this.value.length)}),t.on("blur",function(){})}}}]),module.config(["$routeProvider","$sceDelegateProvider","$locationProvider",function(e,t,o){o.html5Mode({enabled:!1}),t.resourceUrlWhitelist(["self",new RegExp("^https://s3.amazonaws.com/ww-article-cache-1/.+$"),new RegExp("^http://s3.amazonaws.com/ww-article-cache-1/.+$"),new RegExp("^https://s3.amazonaws.com/ww-article-cache-stage/.+$"),new RegExp("^http://s3.amazonaws.com/ww-article-cache-stage/.+$"),new RegExp("^http://d30ohmzj0cjdlk.cloudfront.net/.+$"),new RegExp("^https://d30ohmzj0cjdlk.cloudfront.net/.+$"),new RegExp("^http://db0nus869y26v.cloudfront.net/.+$"),new RegExp("^https://db0nus869y26v.cloudfront.net/.+$"),new RegExp("^https://www.youtube-nocookie.com/.+$")])}]),module.config(["$routeProvider",function(e){e.when("/view1xyz",{templateUrl:"partials/partial1.html",controller:"MyCtrl1"}),e.when("/view2xyz",{templateUrl:"partials/partial2.html",controller:"MyCtrl2"}),e.otherwise({controller:"MyCtrl2"})}]).config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate","$window",function(n,a){return function(e,t){n(e,t);var o=(new Date).getTime()-startTime;if(console.log("error elapsed from start",o),$(".report_popup:eq(0)").is(":visible")&&($("#body_wrapp").remove(),$("#error_message").show(),setTimeout(function(){analytics.gaEvent("error-message","user-saw-message","ok")},1e3)),"undefined"==typeof dontReport){var i={};try{i.message=e.message}catch(e){i.message="none"}try{i.stack=e.stack,i.miniStack=e.stack.split("\n"),i.miniStackString=i.miniStack.join(" |"),i.miniStackString=i.miniStackString.replace(/http:[^ \)]+/g,"#"),i.miniStackString=i.miniStackString.replace(/at\s/g,"@"),i.miniStackString=i.miniStackString.replace(/\s+/g,""),i.miniStackString=i.miniStackString.substr(0,499)}catch(e){i.stack="none"}try{i.articleData=articleData}catch(e){i.articleData="none"}try{i.serverData=serverData}catch(e){i.serverData="none"}try{i.errorUrl=window.location.href}catch(e){i.errorUrl="none"}if(serverData.agent.iOSWebView&&(console.error(e.message),"production"!==serverData.config.environment&&alert(e.message)),console.info("stack trace "+JSON.stringify(i.stack)),console.log("underscore function is ",typeof _),console.log("jquery function is ",typeof $),"string"==typeof _&&console.log("["+_+"]"),"string"==typeof $&&console.log("["+$+"]"),a.trackJs&&a.trackJs.track(e),serverData&&-1!=serverData.agent.string.indexOf("Opera Mini"))alert("Sorry. Opera mini is not HTML5 compatible");else{try{$.ajax({type:"POST",url:"../api/javascript-errors",contentType:"application/json",data:angular.toJson(i)})}catch(e){console.log("error reporting message")}analytics.gaEvent("clientSide error , -",i.errorUrl,i.message),analytics.gaEvent("clientSide error 1",i.errorUrl,i.message),analytics.gaEvent("clientSide error 2",i.errorUrl,i.miniStackString)}}else console.log("don't report")}}])}])}(app=angular.module("wikiwand")).service("WikipediaApi",["$http","$log",function(a,c){var e={callApi:function(r,e,s){if(r.format="json",r.callback="JSON_CALLBACK",!e.apiLanguage)return s("Wikipedia API: must provide an 'apiLanguage' option to callApi");if(!r.action)return s("Wikipedia API: must provide an 'action' parameter to callApi");var t=[];for(var o in r){var i=r[o];"object"==typeof i&&(i=i.join("|")),t.push(o+"="+i)}var n=e.apiLanguage;"zh-"===n.substr(0,3)&&0<=$.inArray(n,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])&&(n="zh");var l="https://"+n+".wikipedia.org/w/api.php?"+t.join("&");e.dbg&&console.log("Wikipedia API Call: ",l),a({method:"JSONP",url:l,cache:!0,timeout:3e3,responseType:"json"}).success(function(e,t,o,i,n){if(e.error)return c.error("Wikipedia API: warning: "+JSON.stringify(e.warning)),s("Wikipedia API: error: "+JSON.stringify(e.error));e.warning&&c.warn("Wikipedia API: warning: "+JSON.stringify(e.warning));var a=e[r.action];return s(null,a,l,e.continue)}).error(function(e,t,o,i,n){return c.error("Wikipedia API: request failed: "+n),s("Wikipedia API: request failed: "+n)})}};return e}]),app.filter("reverse",function(){return function(e){return e.slice().reverse()}}),(app=angular.module("wikiwand")).service("GalleryHelper",["$http","$log",function(e,i){var o={getClickedThumbnailIndex:function(e){var t=e.currentTarget.querySelector("img:nth-child(1)"),o=$(t).data("index");return void 0===o?(i.warn("This image is not in the gallery"),-1):(console.log("Open image with index ",o),o)},loadImagesFromArticleToArray:function(e){o.findStrayImages();var t=[];return e.find(".image_wrapper > .img_container img:nth-child(1):visible").each(function(){var e=$(this);o.addItemModelFromThumb(e,t)}),t},findStrayImages:function(){0<$(".image.int-link").length&&("production"!==serverData.config.environment&&$(".image.int-link").css("border","solid 5px red"),i.warn("Found stray pictures",$(".image.int-link")))},addItemModelFromThumb:function(e,t){var o={thumb:{}};o.thumb.src=e.attr("data-original"),o.thumb.w=parseInt(e.attr("data-w")),o.thumb.h=parseInt(e.attr("data-h")),o.urlString="url("+o.thumb.src+")",o.fromEnglishWikipedia=void 0!==e.attr("data-from-english"),o.bucket={},o.bucket.src="",o.bucket.loaded=!1,o.original={},o.original.realOriginalSrc=e.attr("data-href"),o.original.src=o.thumb.src,o.original.w=parseInt(e.attr("data-fw")),o.original.h=parseInt(e.attr("data-fh")),o.info={},o.info.fetched=!1,o.info.type=e.attr("data-media-type")||"image",o.info.payload=e.attr("data-payload");var i=e.attr("data-href");if(o.wikipediaPageFullUrl=i,o.wikipediaPageFullUrl="http://"+articleData.langCodeUrl+".wikipedia.org"+o.wikipediaPageFullUrl,o.wikipediaPage=i,o.wikipediaPage)if("/wiki/"===o.wikipediaPage.substr(0,6)){o.wikipediaPage=o.wikipediaPage.substr(6);try{o.wikipediaPageTitle=decodeURI(o.wikipediaPage.replace(/_/g," "))}catch(e){return}}else if("/w/index.php?title="===o.wikipediaPage.substr(0,19)){o.wikipediaPage=o.wikipediaPage.substr(19),o.wikipediaPage=o.wikipediaPage.split("&")[0];try{o.wikipediaPageTitle=decodeURI(o.wikipediaPage.replace(/_/g," "))}catch(e){return}}var n=e.parent().siblings(".caption").html()||"";o.title=n.trim(),o.titleTxt=n.replace(/(<([^>]+)>)/gi,"").replace(/"/g,"&quot"),o.index=t.length,o.original.w&&o.original.h&&o.wikipediaPage?(e.data("index",o.index),t.push(o)):"production"!==serverData.config.environment&&e.css("border","solid 5px #0e0")}};return o}]);var galleryControllerParams=["$rootScope","$scope","$timeout","$log","$sce","$sanitize","$window","Utilities","WikipediaApi","GalleryHelper",function(e,y,o,b,k,t,i,r,n,a){var x=this;function s(){r.isTouchDevice()||o(function(){angular.element(".img_enlarge").removeClass("loading")},500),y.galleryActive=!0,o(function(){$("#gallery_thumbs_scroll").getNiceScroll().resize(),x.alignFilmStrip()},10)}x.widthBuckets=[320,640,800,1024,1280,1920,2560,2880],y.fullScreenActive=!1,y.galleryActive=!1,angular.element(document).ready(function(){$(document).keydown(function(e){if(y.galleryActive){if(27===e.keyCode)y.closeGallery();else if(37===e.keyCode||38==e.keyCode||8===e.keyCode){e.preventDefault(),e.stopPropagation();var t=y.current.index-1;x.setActiveItemByIndex(t)}else if(39===e.keyCode||40==e.keyCode||32===e.keyCode){e.preventDefault(),e.stopPropagation();t=y.current.index+1;x.setActiveItemByIndex(t)}else if(33===e.keyCode){e.preventDefault(),e.stopPropagation();t=Math.max(y.current.index-5,0);x.setActiveItemByIndex(t)}else if(34===e.keyCode){e.preventDefault(),e.stopPropagation();t=Math.min(y.current.index+5,y.items.length-1);x.setActiveItemByIndex(t)}else if(36===e.keyCode){e.preventDefault(),e.stopPropagation();t=0;x.setActiveItemByIndex(t)}else if(35===e.keyCode){e.preventDefault(),e.stopPropagation();t=y.items.length-1;x.setActiveItemByIndex(t)}y.$apply()}})}),e.galleryOpen=function(e){y.items||(y.items=a.loadImagesFromArticleToArray($("#content"))),o(function(){x.initializeGalleryUi()},0);var t=a.getClickedThumbnailIndex(e);-1!=t&&(x.setActiveItemByIndex(t),r.isTouchDevice()?s():(angular.element(".img_enlarge").removeClass("loading"),angular.element(e.currentTarget).find(".img_enlarge").addClass("loading")))},screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(){y.fullScreenActive=screenfull.isFullscreen}),y.galleryFull=!1,y.toggleFullScreen=function(){if(y.fullScreenActive=!y.fullScreenActive,screenfull.enabled){$("#gallery")[0];y.fullScreenActive?(screenfull.request(),y.galleryFull=!0):(screenfull.exit(),y.galleryFull=!1)}},y.closeGallery=function(){y.galleryFull=!1,$("#gallery .payload_container").empty(),y.galleryActive=!1,screenfull.enabled&&y.fullScreenActive&&screenfull.exit()},x.initializeGalleryUi=function(){r.isTouchDevice()?$("#full_screen").hide():(trackJsInfo(i,"nice scroll problem?"),trackJsInfo(i,"gallery_thumbs_scroll ",$("#gallery_thumbs_scroll")[0]),window.niceScroll||trackJsInfo(i,"niceScroll is not defined !"),$("#gallery_thumbs_scroll").niceScroll().hide()),$("#gallery_info_wrap > ul li").on("click",function(){$(this).hasClass("open")?$(this).removeClass("open").find("ul").hide():$(this).addClass("open").find("ul").show()}),setTimeout(function(){var e=$("#gallery_thumbs > li").outerWidth()*($("#gallery_thumbs > li").length+7);$("#gallery_thumbs").css("width",e)},0)},x.getNextBucketWithMinWidth=function(e){for(var t=0;t<x.widthBuckets.length;t++){var o=x.widthBuckets[t];if(e<=o)return o}return o},x.getImageDimensions=function(e){var t,o,i=$(window).width(),n=$(window).height(),a=e.original.w,r=e.original.h,s=r/a;s<n/i?(t=Math.min(i,a),o=Math.round(t*s)):(o=Math.min(n,r),t=Math.round(o/s));var l=x.getNextBucketWithMinWidth(t);return{display:{w:t,h:o},request:{w:l,h:Math.round(l*s)}}},x.setActiveItemByIndex=function(e){e>=y.items.length?b.warn("Thumbnail index too large: ",e):e<0?b.warn("Thumbnail index too small: ",e):x.setActiveItem(y.items[e])},x.listenToImageLoad=function(e,t){e.attr("src")!=t.bucket.src&&(y.galleryActive?e.attr("src",t.bucket.src):e.attr("src",t.bucket.src+"?"+(new Date).getTime())),console.log("listen to image load"),e.load(function(e){console.log("loaded"),t.bucket.loaded=!0,r.isTouchDevice()||!1===y.galleryActive&&s(),y.$apply()})},x.setActiveItem=function(e){if(e){var t=$(".gallery_main.bucket");t.attr("src",""),e.info.payload?(r.isTouchDevice()||!1===y.galleryActive&&s(),e.bucket.loaded=!0,$("#gallery .payload_container").html(e.info.payload),setTimeout(function(){var e=$("#gallery .payload_container video").get(0);"function"==typeof e.play&&e.play()},0)):(e.bucket.loaded=!1,$("#gallery .payload_container").empty(),x.listenToImageLoad(t,e));var o=e.index-1;o<0&&(o=0);for(var i=[];i.length<4&&o<y.items.length;){var n=y.items[o];o++,n.info.fetched||"image"===n.info.type&&(n.fromEnglishWikipedia?x.getImageInfoFromApi("en",n,function(){}):o<=e.index+3&&i.push(n))}if(0<i.length)for(var a=0;a<i.length;a++)x.getImageInfoFromApi(articleData.langCodeUrl,i[a],function(){});y.current&&(y.current.active=!1),e.active=!0,y.current=e,x.alignFilmStrip()}},x.alignFilmStrip=function(){if(console.log("align film strip"),$("#gallery_thumbs li").eq(y.current.index)&&$("#gallery_thumbs li").eq(y.current.index).position()){var e=Math.round($("#gallery_thumbs_con").width()),t=Math.round($("#gallery_thumbs li").eq(y.current.index).width()),o=Math.round($("#gallery_thumbs li").eq(y.current.index).position().left),i=Math.round(o+t/2-e/2);$("#gallery_thumbs_scroll").scrollLeft(i)}},x.getImageInfoFromApi=function(e,t,g){var o=x.getImageDimensions(t).request.w,m=[t],i=_.pluck(m,"wikipediaPageTitle"),v=_.pluck(m,"thumb"),w={action:"query",prop:"imageinfo",titles:i,iiprop:["timestamp","user","url","size","mime","mediatype","extmetadata"],iiurlwidth:o,iiextmetadatafilter:["DateTime","DateTimeOriginal","ImageDescription","License","LicenseShortName","UsageTerms","LicenseUrl","Credit","Artist","Permission","GPSLatitude","GPSLongitude"]};n.callApi(w,{apiLanguage:e},function(e,t){if(!t)return console.log("No results for API call: ",w),g();var o,i=t.pages,n=function(e,t){if(e){var o=e[t];return o?o.value:void 0}},a=0;for(var r in i){var s=v[a];a++;var l=i[r],c=0<(l.imageinfo&&l.imageinfo.length)?l.imageinfo[0]:{thumburl:s.src,thumbwidth:s.w,thumbheight:s.h,user:"",timestamp:"",mediatype:"BITMAP",width:s.w,height:s.h,size:1e5,mime:"image/jpeg"},d=null;for(var u in m){console.log(m[u].wikipediaPageTitle);try{if(decodeURIComponent(m[u].wikipediaPageTitle)===l.title){d=m[u];break}}catch(e){console.log("exception retreiving data from api"),d=null}}if(d){d.bucket.src=c.thumburl,d.bucket.w=c.thumbwidth,d.bucket.h=c.thumbheight,(new Image).src=d.bucket.src;var p=c.extmetadata;d.info.fetched=!0,d.info.uploadUser=c.user,d.info.uploadDate=new Date(c.timestamp),d.info.mediatype=c.mediatype,d.info.dateRaw=n(p,"DateTime"),d.info.date=d.info.dateRaw?new Date(d.info.dateRaw):null,d.info.date&&isNaN(d.info.date.getTime())&&(d.info.date=d.info.dateRaw),d.info.dateOriginalRaw=n(p,"DateTimeOriginal"),d.info.dateOriginal=(o=d.info.dateOriginalRaw)?o.replace(/(<([^>]+)>)/gi,""):o,d.info.dateOriginal&&!d.info.dateOriginal.match(/[1-9]/)&&(d.info.dateOriginal=null),d.info.description=n(p,"ImageDescription"),d.info.descriptionSafe=k.trustAsHtml(d.info.description),d.info.gps={lat:n(p,"GPSLatitude"),long:n(p,"GPSLongitude")};var h="unknown";"True"===n(p,"Copyrighted")&&(h="yes"),"False"===n(p,"Copyrighted")&&(h="no"),d.info.license={detected:n(p,"License"),name:n(p,"LicenseShortName"),usageTerms:n(p,"UsageTerms"),url:n(p,"LicenseUrl"),permission:n(p,"Permission"),credit:n(p,"Credit"),artist:n(p,"Artist"),copyrightForPublicDomainImages:h},d.original.url=c.url,d.original.w=c.width,d.original.h=c.height,d.original.size=c.size,d.original.mime=c.mime}else b.debug("No item found for API result:",l),b.debug("List of all items scanned: ",m)}var f=$(".gallery_main.bucket");x.listenToImageLoad(f,y.current),g()})},y.onThumbClick=function(e,t){x.setActiveItem(t)},y.onNextClick=function(e,t){var o=y.current.index+1;x.setActiveItemByIndex(o)},y.onPrevClick=function(e,t){var o=y.current.index-1;x.setActiveItemByIndex(o)}}];(app=angular.module("wikiwand")).controller("GalleryController",galleryControllerParams);var app=angular.module("wikiwand"),UserVoice=null;analytics.gaInitialize("wikiwand"),app.controller("ShellController",["$window","$scope","$timeout","$q","ipCookie","Utilities","ActivationServiceRev2","userPreferences","$http","$rootScope","TestingService","MapHelper","userService",function(s,r,t,e,o,i,n,l,c,d,a,u,p){var h=articleData&&"string"==typeof articleData.rawArticlePath;d.hideToolbar=!!h,d.hideTOC=!0,d.hideCoverImageLandscape=!0,d.precache_from_extension=precache_from_extension;var f=this;window.jQuery||trackJsInfo(s,"jQuery not loaded properly");r.doc={title:document.title},r.win={location:{href:window.location.href}},d.menuOpen=!1,articleData?(articleData.cache&&articleData.cache.key&&o("lastView",articleData.cache.key,{path:"/"}),articleData.mainImage&&articleData.mainImage.full&&(articleData.mainImage.full.urlDesktop=articleData.mainImage.full.urlDesktop.replace("http://","//"),articleData.mainImage.full.urlMobile=articleData.mainImage.full.urlMobile.replace("http://","//"),articleData.mainImage.full.originalUrl=articleData.mainImage.full.originalUrl.replace("http://","//")),d.articleData=articleData):d.articleData={},l.updatePageStyle("init"),d.btnHover=!1,d.canvasSupported=i.isCanvasSupported(),d.touchDevices=i.isTouchDevice(),u.getMapImage(),r.initializeShellController=function(){if(1==precache_from_extension)return $("#imagePlaceHolder").css({width:"100%",height:"auto",top:"0px",left:"0px",opacity:1}),void(d.tocShow=!1);if(trackJsInfo(s,"init activation service"),n.loadState(),trackJsInfo(s,"init testing service"),a.initializeTests(),trackJsInfo(s,"init mon service"),r.hideGlobalNotice=function(){r.showGlobalNotice=!1,o("wikiwand.dont_show_global_notice","1",{path:"/",expires:1})},serverData&&serverData.settings&&serverData.settings.msg_to_all_users){var e=serverData.settings.msg_to_all_users;1==e.show&&3<e.text.length&&!o("wikiwand.dont_show_global_notice")&&(r.globalNoticeText=e.text,r.showGlobalNotice=!0)}$(document).ready(function(){if("wikiwand"==serverData.layout){var e={daysHidden:1,daysReminder:1,title:"Wikiwand for iPhone",author:"Wikiwand",iOSUniversalApp:!1};!1,$.smartbanner(e)}else"false"==serverData.showTOC?d.tocShow=!1:d.tocShow=!0}),$(window).load(function(){setTimeout(f.loadLast,3e3),1==loadedFromCache&&t(function(){f.testWikipediaRevision()},5e3),t(function(){f.testWikipediaRevision()},6e5)})},d.pressedTellAFriendLink=function(e,t){t||(t="undefined"),analytics.gaVirtualPageView("virtualpageview/invites/sent-"+t+"/"+e),analytics.gaVirtualPageView("virtualpageview/invites/sent-"+t),analytics.gaVirtualPageView("virtualpageview/invites/sent"),analytics.gaEvent("activation","sent referral",e)},d.$on("prefetchArticle",function(e,t){f.prefetch(t[0])}),d.$on("precacheArticle",function(e,t){f.precache(t[0])}),d.clickedOutside=function(){r.$broadcast("closePopups",[]);try{$("#main_menu .menu-tooltip").tooltipster("enable"),0<$(".disambig-wrapper").length&&i.isTouchDevice()&&$(".disambig-wrapper").tooltipster("hide")}catch(e){console.log("tooltipster not ready")}},d.clickedAnywhere=function(e){1===e.which&&r.$broadcast("clickedAnywhere",[])},d.reloadArticle=function(){analytics.gaEvent("debug","reloading page","reloadArticle"),setTimeout(function(){s.location.reload()},1e3)},d.loadGplusScript=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/platform.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},d.extensionPopup=function(e){n.extensionPopup(e)},d.activationHover=function(e){i.isTouchDevice()||(r.btnHover="enter"===e)},d.reportClick=function(e){analytics.gaVirtualPageView("virtualpageview/reportClick/"+e)},d.userClick=function(e,t,o){e&&(o?analytics.gaVirtualPageView("virtualpageview/userClick/"+t+"/"+o):analytics.gaVirtualPageView("virtualpageview/userClick/"+t))},d.report=function(e){analytics.gaVirtualPageView("virtualpageview/"+e)},d.reportTomer=function(){var e="virtualpageview/article-promo-TIGER-STYLE/install-click-text/"+reportText;analytics.gaVirtualPageView(e)},d.activationButtonClicked=function(e){n.activationButtonClicked(e)},d.new_visitor_notice=function(){n.new_visitor_fold_clicked()},d.reportImage=function(e,t,o){trackJsInfo(s,"reportImage"),console.log("report cover image"),analytics.gaEvent("report-"+t,articleData.cache.canonical,o);var i=l.getPref("lstrpt");l.getPref("joined")||l.setPref("joined",(new Date).getTime());var n={lstrpt:i,joined:l.getPref("joined"),type:t,articleData:articleData,url:o},a=JSON.stringify(n),r=c({method:"post",url:"/api/reportImage",data:a});d.showReportCoverImageText1=!1,d.showReportCoverImageText2=!0,r.success(function(e){l.setPref("lstrpt",(new Date).getTime()),console.log("success reporting image",o)}),r.error(function(){})},d.suggestImage=function(e,t,o){trackJsInfo(s,"suggestImage"),console.log("suggest cover image",o),analytics.gaEvent("report-"+t,articleData.cache.canonical,o);var i={lstrpt:l.getPref("lstrpt"),joined:l.getPref("joined"),type:t,articleData:articleData,url:o},n=JSON.stringify(i);d.showSuggestImageText1=!1,d.showSuggestImageText2=!0;var a=c({method:"post",url:"/api/reportImage",data:n});a.success(function(e){l.setPref("lstrpt",(new Date).getTime()),console.log("success reporting image")}),a.error(function(){d.showSuggestImageText1=!1,d.showSuggestImageText2=!0})},f.recache=function(){trackJsInfo(s,"recache"),articleData.rawArticlePath=articleData.rawArticlePath.split("#")[0];var e="/"+articleData.langCodeUrl+"/"+articleData.rawArticlePath+"?recache=1&callback=JSON_CALLBACK&cachedate="+articleData.cache.cacheDate+"&hash="+articleData.cache.hash;try{c.jsonp(e).success(function(e){if(e.success){if(e.newArticleData){if(e.newArticleData.cache.wikiRevision==articleData.cache.wikiRevision)return void console.log("Edits were made but not yet approved");r.differenceMinutes<120&&t(function(){r.showRefreshNotice=!0},2e4)}}else console.log("not recaching ",e)}).error(function(e,t,o,i){console.log("response ",e),console.log("caught problem parsing recache response")})}catch(e){console.log("caught problem parsing recache response exception"),s.trackJs&&s.trackJs.track(e)}},f.precache=function(e){trackJsInfo(s,"precache");var t=(e=e.split("#")[0])+"?precache=1&prefetch=1&callback=JSON_CALLBACK";c.jsonp(t).success(function(e){e.success?console.log("successfully cached article "):console.log("failed precache",e)}).error(function(e,t,o,i){})},f.prefetch=function(e){trackJsInfo(s,"prefetch");var t=(e=e.split("#")[0])+"?precache=1&prefetch=1&callback=JSON_CALLBACK";console.log("issuing prefetch request ",t),c.jsonp(t).success(function(e){e.success?(e.CDNFileUrl?f.prefetchSingleFile(e.CDNFileUrl):e.S3FileUrl&&f.prefetchSingleFile(e.S3FileUrl),e.fullUrl&&f.prefetchSingleFile(e.fullUrl),e.wikiwandUrl&&f.prefetchSingleFile(e.wikiwandUrl)):e.redirect?(console.log("redirect to ",e.redirect),f.prefetch(e.redirect)):console.log("not prefetching ",e)}).error(function(e,t,o,i){console.log("error ",e,t,o,i)})},f.prefetchSingleFile=function(e){trackJsInfo(s,"prefetchSingleFile"),e=e.replace("https://","//").replace("http://","//"),c({method:"GET",url:e}).success(function(e,t,o,i){console.log("downloaded file (prefetch)")}).error(function(e,t,o,i){console.warn("Failed to download a file (pre-fetching). This is not a critical issue, but doesaffect loading speed. If you are using an extension which forces the use of https, you might want to go to https://www.wikiwand.com where everything will run smoother.")})},f.testWikipediaRevision=function(){if(articleData&&articleData.title&&articleData.cache&&!articleData.pageIsComparison){var e=(new Date).getTime();r.differenceMinutes=(e-articleData.cache.cacheDate)/6e4;var t=articleData.langCodeUrl;"zh-"===t.substr(0,3)&&0<=$.inArray(t,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])&&(t="zh");var o="https://"+t+".wikipedia.org/w/api.php?action=query&prop=revisions&format=json&rvprop=ids%7Cflags%7Ctimestamp&rvlimit=1&titles="+encodeURIComponent(decodeURIComponent(articleData.rawArticlePath))+"&redirects=1&continue=&callback=JSON_CALLBACK";try{c.jsonp(o).success(function(e){if(e&&e.query&&e.query.pages){var t=e.query.pages;for(var o in void 0!==e.warnings&&s.trackJs&&s.trackJs.track("revision: got warnings from API"),("object"!=typeof t||t&&0==t.length)&&s.trackJs&&s.trackJs.track("revision: no pages in Wikipedia API response"),t){var i=t[o];for(var n in("object"!=typeof i.revisions||i.revisions&&0==i.revisions.length)&&(void 0!==i.missing?-1==articleData.rawArticlePath.indexOf(":")&&(r.showDeletedNotice=!0):s.trackJs&&s.trackJs.track("revision: no page.revisions in Wikipedia API response")),i.revisions){var a=i.revisions[n];try{if(void 0!==a.revid){if(a.revid.toString()!=articleData.cache.wikiRevision)return f.recache()}else s.trackJs&&s.trackJs.track("revision: no revid in Wikipedia API response")}catch(e){s.trackJs&&s.trackJs.track("revision: exception parsing wikipedia revision")}break}break}}}).error(function(e,t,o,i){trackJsInfo(s,"error issuing wikipedia request:"),trackJsInfo(s,"data:",JSON.stringify(e)),trackJsInfo(s,"status:",JSON.stringify(t)),trackJsInfo(s,"headers:",JSON.stringify(o)),trackJsInfo(s,"config:",JSON.stringify(i))})}catch(e){trackJsInfo(s,"problem with making api call to wikipedia"),s.trackJs&&s.trackJs.track(e)}}else console.log("not an article")},d.loadUserVoice=function(){UserVoice?console.log("already have userVoice"):(console.log("loading uservoice"),UserVoice=window.UserVoice||[],function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//widget.uservoice.com/he5ETYZF0S28rbrL1qP0Q.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),UserVoice.push(["identify",{}]))},d.reportComments=function(e,t){if(e){if(t||(t=""),0<=e.indexOf("hover")){if(r["reported_comments_"+e])return;r["reported_comments_"+e]=!0}"production"!=serverData.config.environment?console.log("Sending Analytics:","fb-comments",e,t):(analytics.gaEvent("fb-comments",e,t),analytics.gaVirtualPageView("virtualpageview/fb-comments/"+e+"/"+t))}},f.loadLast=function(){"/extension/thank-you"==window.location.pathname&&r.loadGplusScript()},angular.element(document).ready(function(){trackJsInfo(s,"Dom ready"),void 0===serverData.publisherHostCode&&t(function(){trackJsInfo(s,"setting tooltipster to #main_menu .menu-tooltip"),trackJsInfo(s,"jquery element is ",$("#main_menu .menu-tooltip")),$("#main_menu .menu-tooltip").tooltipster({theme:".toolbar-tooltip",arrow:!0,offsetY:10,position:"bottom",trigger:"hover",animation:"fade",speed:100,interactive:!1})},1e3),t(function(){d.precache_from_extension||(d.loadVariousPopups=!0)},3e3),t(function(){d.precache_from_extension||(d.hideToolbar=!1,d.hideTOC=!1,d.hideCoverImageLandscape=!1)},0),$(document).keydown(function(e){if($(".search_btn ").hasClass("focus")&&13===e.keyCode){var t=$("#queryinput").val();0==$(".tt-suggestion").length&&(console.log("no suggestions"),document.location="/"+articleData.langCodeUrl+"/"+t)}}),i.isCanvasSupported()||($(".html5-only").show(),$("#loading").hide()),i.isTouchDevice()&&($("#main_menu").addClass("navbar_opaque"),$("#wikiwand_toc").css("overflow","auto")),$("#splashscreen").hide(),d.rtl=$("body").hasClass("rtl")}),r.$on("articleContentReadyFromShell",function(){d.hideToolbar=!1,d.hideTOC=!1,d.hideCoverImageLandscape=!1,d.cohorts&&"newtab"==d.cohorts.mon_bottom&&($("#footer-banner-wrapper").show(),$(".wikiwand_footer").addClass("no_margin"))}),d.previewSelection="true"==localStorage.previewSelection,d.togglePreviewSelection=function(){void 0===localStorage.previewSelection?d.report("article-promo-SHORT-NOTICE/initial-toggle"):d.report("article-promo-SHORT-NOTICE/additional-toggle"),localStorage.previewSelection=d.previewSelection,toggleFrame(d.previewSelection)},d.togglePreviewSelectionFromSpan=function(){d.previewSelection=!d.previewSelection,d.togglePreviewSelection()}}]),(app=angular.module("wikiwand")).controller("CoverImageController",["$scope","$rootScope","$window",function(e,t,o){var i=this;i.calculateCoverHeight=function(){articleData.mainImage},t.initializeCoverImage=function(){trackJsInfo(o,"initializeCoverImage"),i.calculateCoverHeight(),e.finalImageURL=articleData.mainImage.full.urlDesktop.replace("http://","//").replace("https://","//")},articleData.mainImage&&t.initializeCoverImage()}]),(app=angular.module("wikiwand")).controller("PreferredLanguagesController",["$scope","$log","$timeout","LanguagePreferences",function(r,e,t,s){r.$on("openLanguagesDropdown",function(){r.list=[],t(function(){var e=s.getLangPrefs();if(articleData.availableLanguages){var t=articleData.availableLanguages,o={};_.each(e,function(e,t){1==e.fav?o[e.lang]={NameEnglish:e.NameEnglish,tooltip:"No such article in "+e.NameEnglish,hasArticle:!1,articleLink:"javascript:void(0)",langAbberviation:e.lang.slice(0,2),articleTitle:"",lang:e.lang,count:e.count,fav:e.fav}:delete o[e.lang]}),_.each(t,function(e,t){o[e.langCodeURL]&&(o[e.langCodeURL].hasArticle=!0,o[e.langCodeURL].articleLink=e.articleLink,o[e.langCodeURL].articleTitle=e.articleTitle,o[e.langCodeURL].tooltip="Read article in "+e.langEnglishName)});var i=_.sortBy(o,function(e){return-e.count});if(5<(i=i.slice(0,6)).length){var n=i[5].count;6<Object.keys(e).length&&s.removeLangsLowerThanCount(n)}r.list=i}else r.list=[];var a=0;_.each(r.list,function(e,t){e.hasArticle&&a++}),r.numOfAvailablePreferredLanguages=a},0)})}]),(app=angular.module("wikiwand")).controller("AllAvailableLanguagesController",["LanguagePreferences","$scope","$timeout","$log","$rootScope","$http","Utilities",function(n,a,r,e,t,o,i){a.filterByQueryWikipedia=function(e){return!a.filterQueryWikipedia||(!!~e.NameEnglish.toLowerCase().indexOf(a.filterQueryWikipedia.toLowerCase())||(!!~e.NameNative.toLowerCase().indexOf(a.filterQueryWikipedia.toLowerCase())||!!~e.CodeURL.toLowerCase().indexOf(a.filterQueryWikipedia.toLowerCase())))},a.filterByQueryArticle=function(e){return!a.filterQuery||(!!~e.langEnglishName.toLowerCase().indexOf(a.filterQuery.toLowerCase())||(!!~e.langNativeName.toLowerCase().indexOf(a.filterQuery.toLowerCase())||!!~e.langCodeURL.toLowerCase().indexOf(a.filterQuery.toLowerCase())))},a.filterUnrecognizedLangs=function(e){return!!e.langAbberviation},a.refreshFavoritesList=function(){var e=_.filter(a.wikipediaLanguages,function(e,t){return 1==e.fav});a.favoriteLanguages=e},a.$on("showAllArticleLanguagesFunc",function(e){t.langOpenArticle=!0,articleData.availableLanguages?a.articleLanguageLinks=articleData.availableLanguages:a.articleLanguageLinks=[],r(function(){i.isTouchDevice()||$("#lang ul").niceScroll({cursorcolor:"#000",cursoropacitymax:.3,cursorwidth:3,cursorborderradius:4,railpadding:{top:2,right:2,left:2,bottom:2},cursorborder:"none",railalign:"left",zindex:360}),$("#lang_input").focus()},10)}),a.$on("showAllWikipediaLanguagesFunc",function(e){i.isTouchDevice()||r(function(){$("#p-lang_search ul").niceScroll().hide()},0),t.langOpenWikipedia=!0,o.get("/js/wikipedia-lang-infos-client-dictionary.js").success(function(e,t,o,i){a.wikipediaLanguages=_.toArray(e),0<Object.keys(a.wikipediaLanguages).length&&(_.each(a.wikipediaLanguages,function(e,t){e.CodeURL&&(e.langAbberviation=e.CodeURL.slice(0,2))}),_.each(n.getLangPrefs(),function(o){_.each(a.wikipediaLanguages,function(e,t){a.wikipediaLanguages[t].CodeURL==o.lang&&(a.wikipediaLanguages[t].fav=o.fav)})}),a.refreshFavoritesList(),r(function(){$("#lang ul, #p-lang_search ul").getNiceScroll().resize(),$("#lang_input").focus()},500))})}),a.$on("hideAllArticleLanguagesFunc",function(e){a.wikipediaLanguages=[],t.langOpenArticle=!1}),a.$on("hideAllWikipediaLanguagesFunc",function(e){a.wikipediaLanguages=[],t.langOpenWikipedia=!1}),a.toggleFavorite=function(o,e){n.toggleLangFave(o,e);var i=n.getLangPrefs();_.each(a.wikipediaLanguages,function(e,t){e.CodeURL==o&&(a.wikipediaLanguages[t].fav=i[o].fav)}),a.refreshFavoritesList()}}]);var MAX_RESULTS_PER_LANG=8,MAX_PRELOADED_RESULTS=3,SEARCH_RESULTS_LINE_HEIGHT=(app=angular.module("wikiwand"),40),RTL_LANGS=["aeb","ar","arc","arq","ary","arz","az-ara","bqi","ckb","fa","glk","ks-arab","he","lat-hebr","ps","sd","ur","ydd","yi"],preload_dict={};app.controller("ArticleSearchControllerRev2",["$scope","$rootScope","$log","LanguagePreferences","$timeout","$http","Utilities",function(l,s,e,t,o,i,n){var c=this,d={},a=!1;c.doesConnectionExist=function(){var e=new XMLHttpRequest,t=Math.round(1e4*Math.random());e.open("HEAD","/favicon.ico?rand="+t,!1);try{return e.send(),200<=e.status&&e.status<304}catch(e){return!1}},c.preloadResult=function(){},c.testCtrl=function(){a?(console.log("double click ctrl"),s.showSearch?(s.openSearch("close"),analytics.gaEvent("search","double-ctrl","close")):(s.openSearch("open"),analytics.gaEvent("search","double-ctrl","open"),setTimeout(function(){$("#queryinput").focus()},100))):(a=!0,o(function(){a=!1},300))},$(window).keyup(function(e){if(191!=e.which||s.showSearch||(s.openSearch("open"),analytics.gaEvent("search","slash hit","open"),setTimeout(function(){$("#queryinput").focus()},100)),17!=e.which)return!0;c.testCtrl()}),s.showSearch=!1,l.searchFocus=!1,s.openSearch=function(e){"open"===e?(analytics.gaEvent("search","open","open"),s.showSearch=!0,o(function(){angular.element("#queryinput").focus()},0),l.searchFocus=!0):"close"===e&&(analytics.gaEvent("search","open","close"),l.searchFocus=!1,s.showSearch=!1)};var r,u,p,h;r="\\.,-\\/#!$%\\^&\\*;:{}=\\-_`~()",u=new RegExp("^["+r+"]*[؀-ۿݐ-ݿﭐ-﷿ﹰ-\ufeff֑-״]"),p=new RegExp("^["+r+"]*$"),h=function(){var e,t,o=$("#queryinput").val(),i=(e=o,t=$("body").hasClass("rtl"),""===e?t:!!e.match(u)||!!e.match(p)&&t),n=$("#queryinput");i?n.addClass("rtl"):n.removeClass("rtl")},$("#queryinput").keypress(h),$("#queryinput").keyup(h),l.navigateTo=function(e){-1<window.location.search.indexOf("in_iframe")?window.top.location.href=e:window.location.href=e};var f=["en"];l.resultClicked=function(e,o){var i=-2;e.preventDefault(),_.each(l.search.results,function(e,t){e.linkEncoded==o?(l.search.results[t].selected=!0,l.search.results[t].c="loading",l.search.selectedIndex=t,i=t):l.search.results[t].selected=!1}),-2!=i?(s.searchFocus=!0,l.noSelection=!1,l.navigateTo(o)):console.log("id is null")},l.testKeyboard=function(e){e&&17==e.which&&c.testCtrl();var t=!1;if(e&&(e.preventDefault(),e.stopPropagation()),e&&27==e.which&&s.openSearch("close"),!e||33!=e.which&&36!=e.which||(l.search.selectedIndex=0,$(".results-container").scrollTop(0),t=!0),!e||34!=e.which&&35!=e.which||($(".results-container").scrollTop(1e3),l.search.selectedIndex=l.search.results.length-1,t=!0),e&&38==e.which&&(-1!=l.search.selectedIndex&&(l.search.selectedIndex=l.search.selectedIndex-1),t=!0),e&&40==e.which&&(l.search.selectedIndex!=l.search.results.length&&(l.search.selectedIndex=l.search.selectedIndex+1),t=!0),e&&13==e.which){if(1==l.fullSearch){var o="/"+articleData.langCodeUrl+"/"+l.search.query+"?fullSearch=true";return l.navigateTo(o),void(l.waiting=!0)}if(-1==l.search.selectedIndex){o="/"+articleData.langCodeUrl+"/"+l.search.query;return void l.navigateTo(o)}l.search.results[l.search.selectedIndex];var i=l.search.selectedIndex;return s.searchFocus=!0,l.search.results[l.search.selectedIndex].c="loading",void l.navigateTo(l.search.results[i].link)}if(t){_.each(l.search.results,function(e,t){t==l.search.selectedIndex?l.search.results[t].selected=!0:l.search.results[t].selected=!1}),-1==l.search.selectedIndex?l.noSelection=!0:l.noSelection=!1,l.search.selectedIndex==l.search.results.length?l.fullSearch=!0:l.fullSearch=!1;var n=$("#result_"+l.search.selectedIndex);$("#search_description").fadeOut(200),c.setHoverCard(n),n.position()&&console.log("element scrolll top ",n.position().top);var a=$(".results-container");a.scrollTop();if(n.position()){var r=n.position().top;r<SEARCH_RESULTS_LINE_HEIGHT&&(console.log("element over top of container"),a.scrollTop(a.scrollTop()-SEARCH_RESULTS_LINE_HEIGHT)),r>a.height()-2*SEARCH_RESULTS_LINE_HEIGHT&&(console.log("element over bottom of container"),a.scrollTop(a.scrollTop()+2*SEARCH_RESULTS_LINE_HEIGHT))}}},l.initSearch=function(e){l.noResults=!1,e&&(s.searchType=e,serverData.search&&"true"==serverData.search.autoFocus&&$("#queryinput").focus()),f="undefined"!=typeof articleData&&articleData.langCodeUrl?t.getTopNLangs(3,articleData.langCodeUrl):t.getTopNLangs(3,null),l.waiting=!1,l.search={},l.noSelection=!0,l.search.selectedIndex=-1,l.search.results=[],l.testKeyboard();articleData.searchTranslation&&$("#queryinput").attr("placeholder",articleData.searchTranslation),l.$watch("search.query",function(){""==l.search.query&&(l.search.results=[]),o.cancel(l.searchTriggerTimeoutPromise),o.cancel(l.preloadTimeoutPromise),l.search.selectedIndex=-1,l.noSelection=!0,l.fullSearch=!1,$(".results-container").scrollTop(0),l.searchTriggerTimeoutPromise=o(c.triggerSearch,200)},!0)},c.triggerSearch=function(){void 0!==l.search.query&&""!=l.search.query&&_.each(f,function(e,t){l.waiting=!0,c.issueSearchRequest(e,l.search.query,!1),c.issueSearchRequest(e,l.search.query,!0)})},c.issueGoogleRequest=function(e){if(void 0!==e){var t="//suggestqueries.google.com/complete/search?client=chrome&hl=en&q="+e+"&callback=JSON_CALLBACK";i.jsonp(t).success(function(e){if(""!=l.search.query){e&&e[1]&&0<e[1].length&&(e.results=e[1].slice(0,5)),l.noResults=!1,l.search.selectedIndex=-1,l.search.results=_.reject(l.search.results,function(e){return"google-suggest"==e.lang});var o=0;_.each(e.results,function(e){if(0!=e.indexOf("http://")&&0!=e.indexOf("https://")){var t={};0==o&&(t.firstInlang=!0,t.langtag="from google"),t.lang="google-suggest",t.rtl=!1,t.T=e,t.desc=null,"true"==serverData.search.cse?t.link="/google-search?q="+e:t.link="//www.google.com/search?q="+e,t.backgroundImageSring="url(/img/google_search_icon.png)",t.linkEncoded=encodeURI(t.link),l.search.results.push(t),o++}}),l.search.results=_.sortBy(l.search.results,function(e){return _.indexOf(f,e.lang)}),l.noResults=0==l.search.results.length}}).error(function(e,t,o,i){if(console.log("error receiving response from google api ",t),0==c.doesConnectionExist()){var n={lang:"google-suggest",rtl:!1,T:"No internet conenction"};l.search.results=_.reject(l.search.results,function(e){return"google-suggest"==e.lang}),l.search.results.push(n)}})}},c.issueBingRequest=function(e){if(console.log("issue bing request"),void 0!==e){var t="http://api.bing.com/osjson.aspx?query="+e+"&market=en_us&JsonType=callback&JsonCallback=JSON_CALLBACK";i.jsonp(t).success(function(e){if(""!=l.search.query){console.log("data from bing ",e),e&&e[1]&&0<e[1].length&&(e.results=e[1].slice(0,5)),l.noResults=!1,l.search.selectedIndex=-1,l.search.results=_.reject(l.search.results,function(e){return"bing-suggest"==e.lang});var o=0;_.each(e.results,function(e){if(0!=e.indexOf("http://")&&0!=e.indexOf("https://")){var t={};0==o&&(t.firstInlang=!0,t.langtag="from bing"),t.lang="bing-suggest",t.rtl=!1,t.T=e,t.desc=null,t.link="//www.bing.com/search?q="+e,t.backgroundImageSring="url(/img/bing_search_icon.png)",t.langtag="from bing",t.linkEncoded=encodeURI(t.link),l.search.results.push(t),o++}}),l.search.results=_.sortBy(l.search.results,function(e){return _.indexOf(f,e.lang)}),l.noResults=0==l.search.results.length}}).error(function(e,t,o,i){if(console.log("error receiving response from bing api ",t),0==c.doesConnectionExist()){var n={lang:"google-suggest",rtl:!1,T:"No internet conenction"};l.search.results=_.reject(l.search.results,function(e){return"google-suggest"==e.lang}),l.search.results.push(n)}})}},c.issueSearchRequest=function(a,r,s){var e="/api/search/"+a+"/"+r;-1<document.location.href.indexOf("debug_search=1")&&(e+="?debug_search=1"),1==s&&(e="/api/searchwiki/"+a+"/"+r),i({method:"GET",url:e}).success(function(t,e,o,i){if(""!=l.search.query&&(0==s&&(d["/"+a+"/"+r]=!0),1!=s||!d["/"+a+"/"+r])){l.noResults=!1,l.search.selectedIndex=-1,l.testKeyboard(),l.waiting=!1,l.search.results=_.reject(l.search.results,function(e){return e.lang==t.lang});var n=0;_.each(t.results,function(e){MAX_RESULTS_PER_LANG-1<n||(0==n&&(e.firstInlang=!0),e.lang=t.lang,e.rtl=-1!=_.indexOf(RTL_LANGS,t.lang),e.link="/"+t.lang+"/"+e.t.split(" ").join("_"),e.linkEncoded=encodeURI(e.link),null==e.u?e.backgroundImageSring="url(//assets.wikiwand.com/img/search_placeholder.png)":e.backgroundImageSring="url('"+e.u+"')",null==e.u?e.desc="<p>"+e.d+"</p>":null==e.d?e.desc="":e.desc="<img src='"+e.u+"' alt='wikiwand'/><p>"+e.d+"</p>","ww-c-disambig"==e.c&&(e.desc=""),l.search.results.push(e),n++)}),l.search.results=_.sortBy(l.search.results,function(e){return _.indexOf(f,e.lang)}),0==l.search.results.length?l.noResults=!0:l.noResults=!1}}).error(function(e,t,o,i){})},c.setHoverCard=function(e){var t=e,o=t.offset(),i=t.attr("desc-attr");i&&(""!=i&&20<i.length&&$("#search_description").stop().fadeIn(100).html(i).css({top:o.top-$(window).scrollTop(),left:o.left-$("#search_description").width()-32}),t.hasClass("rtl")?$("#search_description").addClass("rtl"):$("#search_description").removeClass("rtl"))},angular.element(document).ready(function(){n.isTouchDevice()||($("body").on("mouseenter",".searchResult",function(){c.setHoverCard($(this))}),$("body").on("mouseleave",".searchResult, .results-container",function(){$("#search_description").fadeOut(200),$(".searchResult").removeClass("selectedResult")}))});navigator.userAgent.toLowerCase()}]),(app=angular.module("wikiwand")).controller("ToolbarController",["$scope","$log","Utilities","ipCookie","$timeout","$rootScope","userPreferences","$route",function(o,e,t,i,n,a,r,s){function l(){try{$("#main_menu .menu-tooltip").tooltipster("disable"),$("#main_menu .menu-tooltip").tooltipster("hide")}catch(e){console.log("tooltipster not ready")}$("#header").addClass("foldfix")}$(document).keydown(function(e){if(191===e.keyCode){var t=$("#queryinput");return!!t.is(":focus")||(t.focus(),!1)}}),i("wikiwand.bookmarks.count")&&(a.bookmarkCount=i("wikiwand.bookmarks.count")),o.langAbbreviation=articleData.langCodeUrl.slice(0,2).toUpperCase(),o.toggleWikiwandMenu=function(e){1!=o.showWikiwandMenu?(o.closeAllMenus(),o.showWikiwandMenu=!0,l()):o.closeAllMenus(),e.stopPropagation()},o.toggleLanguageMenu=function(e){1!=o.showLanguageMenu?(o.closeAllMenus(),o.showLanguageMenu=!0,a.$broadcast("openLanguagesDropdown"),l()):o.closeAllMenus(),e.stopPropagation()},o.togglePerMenu=function(e){1!=o.showPerMenu?(o.closeAllMenus(),o.showPerMenu=!0,l(),analytics.gaEvent("preferences","popup","opened")):(o.closeAllMenus(),r.setPref("prefAttention","true")),e.stopPropagation()},o.hidePerMenu=function(e){$(".menu_per").fadeOut(),setTimeout(function(){o.showPerMenu=!1},1e3),r.setPref("prefAttention","true"),e.stopPropagation()},n(function(){if("true"!=r.getPref("prefAttention")||serverData.callToPersonalize){if(!a.activation)return;a.activation.vetek;(a.inFrame||serverData.callToInstallExtension||serverData.callToPersonalize)&&(!0,serverData.callToPersonalize&&(analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/impression"),a.callToPersonalize=!0)),"homepage"==i("wikiwand.activation.first_impression")&&!0,$("body").hasClass("rtl")&&!1,t.isTouchDevice()&&!1,!1&&(o.showPerMenu=!0,l(),a.prefsTouched="true"==r.getPref("prefsTouched"),"true"!=r.getPref("prefAttention")&&n(function(){$(".per_serif").addClass("new_pref")},0),r.setPref("prefAttention","true"))}},2e3),o.showUserVoice=!1,o.showCoverReport=!1;var c=function(){if(!UserVoice)return a.loadUserVoice(),void setTimeout(c,50);UserVoice.push(["embed","#user_voice_wrapper",{trigger_style:"icon",accent_color:"#3392af",trigger_color:"white",trigger_background_color:"rgba(46, 49, 51, 0.6)",locale:"en",contact_title:"Report a Bug (English please)",smartvote_title:"What should we add next?"}])};o.openUserVoiceDialog=function(){c()},o.toggleFeedbackMenu=function(e){void 0===UserVoice&&a.loadUserVoice(),1!=o.showFeedbackMenu?(o.showUserVoice=!1,o.showCoverReport=!1,a.showReportCoverImageText1=!0,a.showReportCoverImageText2=!1,o.closeAllMenus(),o.showFeedbackMenu=!0,l()):o.closeAllMenus(),e.stopPropagation()},o.toggleBookmarkFeed=function(e){a.loadBookmarkController=!0,1!=a.showBookmarkFeed?(o.closeAllMenus(),a.showBookmarkFeed=!0,l(),analytics.gaEvent("bookmarks","open-pane","toolbar"),analytics.gaVirtualPageView("virtualpageview/bookmarks/open-pane/toolbar")):o.closeAllMenus(),e.stopPropagation()},o.toggleShareMenu=function(e){if(1!=o.showShareMenu){o.closeAllMenus(),o.showShareMenu=!0;var t=encodeURIComponent(window.location.href);$(".share-facebook a").attr("href","https://www.facebook.com/sharer/sharer.php?u="+t),$(".share-twitter a").attr("href","https://twitter.com/home?status="+t),$(".share-gplus a").attr("href","https://plus.google.com/share?url="+t),$(".share-reddit a").attr("href","https://.com/share?url="+t),a.articleData.pageIsArticle&&!a.articleData.pageIsComparison?$(".share-gmail a").attr("href","http://mail.google.com/mail/?view=cm&fs=1&tf=1&to=&su="+encodeURIComponent(a.articleData.title)+" - From Wikipedia&body=Check this out%0A%0A"+t):$(".share-gmail a").attr("href","http://mail.google.com/mail/?view=cm&fs=1&tf=1&to=&su="+encodeURIComponent(document.title)+"&body=Check this out%0A%0A"+t),l()}else o.closeAllMenus();e.stopPropagation()},o.today=(new Date).getDate(),o.closeAllMenus=function(){o.showWikiwandMenu=!1,o.showLanguageMenu=!1,a.callToPersonalize||(o.showPerMenu=!1),o.showFeedbackMenu=!1,a.showBookmarkFeed=!1,o.showShareMenu=!1,$("#header").removeClass("foldfix"),a.shareGist=!1,a.openFact=!1},o.clickedInside=function(e){e.stopPropagation()},o.$on("closePopups",function(e,t){o.closeAllMenus()}),angular.element(document).ready(function(){t.isTouchDevice()||($(window).on("scroll",function(){250<$(this).scrollTop()?($("#header, #gist_wrapper").addClass("fold").removeClass("hovered"),$(".new_visitor").addClass("display_after_scroll"),$('.wikipedia_tooltip:not(".new_visitor")').removeClass("active"),$("#main_menu, #bookmark_wrapper").addClass("navbar_opaque")):(a.articleData.mainImage&&("cover"==a.articleData.mainImage.mode||"new_cover"==a.articleData.mainImage.mode&&0<$("#cover_image_wrapper").length)&&$("#main_menu, #bookmark_wrapper").removeClass("navbar_opaque"),$("#header, #gist_wrapper").removeClass("fold"),$('.wikipedia_tooltip:not(".new_visitor")').addClass("active"))}),$("body").on("mouseenter","#header.fold",function(){$(this).addClass("hovered"),$("#gist_wrapper").removeClass("fold")}))})}]),(app=angular.module("wikiwand")).controller("TableOfContentsController",["$scope","$rootScope","$log","Utilities","$timeout","userPreferences",function(s,t,e,l,o,i){if(1!=precache_from_extension){var n,a,c=this;c.$scrollableElement=$(document),c.$headerElement=$("#header"),s.button={},s.activeButton=null,$(window).resize(function(){o.cancel(a),a=o(function(){920<(r=$(window).width())?(!0===i.getPref("TOC_folded")?t.tocShow=!1:t.tocShow=!0,t.mobileRes=!1):(t.tocShow=!1,t.mobileRes=!0)},100)}),$(document).keydown(function(e){$("#gallery").is(":visible")||1!=t.searchFocus&&(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||(37===e.keyCode&&c.scrollToNextOrPrevSection(-1),39===e.keyCode&&c.scrollToNextOrPrevSection(1)))}),t.tocFold=function(e){console.log("toc fold"),e&&(s.rtl?t.tocShow="swipeRight"===e:t.tocShow="swipeLeft"===e),"mobile"!==e&&(t.tocShow=!t.tocShow,!1===t.tocShow?i.setPref("TOC_folded",!0):!0===t.tocShow&&i.setPref("TOC_folded",!1))},t.tocMobileFold=function(){!0===t.mobileRes&&(t.tocShow=!1)},t.tocGenerate=function(){var n=["SUP"],a=function(e){for(var t=e,o=e.childNodes.length-1;0<=o;o--){var i=e.removeChild(e.childNodes[o]);e.parentNode.insertBefore(i,t),t=i}e.parentNode.removeChild(e)},r=function(e){if(e.text&&-1<e.text.indexOf("<")){var t=document.createElement("div");t.innerHTML=e.text,function(e){for(var t=Array.prototype.slice.apply(e.getElementsByTagName("*"),[0]),o=0;o<t.length;o++)-1==n.indexOf(t[o].nodeName)&&a(t[o])}(t),e.sanitizedText=t.innerHTML}else e.sanitizedText=e.text;if(e.children)for(var o in e.children){var i=e.children[o];i&&r(i)}};o(function(){s.articleTitle=articleData.title,articleData.TOC&&(r(articleData.TOC),s.level2=articleData.TOC.children)},0),o(function(){if(!l.isTouchDevice()){var e=window.location.hash,t="";if(e&&(t="#/"===e.substr(0,2)?e.substr(2):e.substr(1)),""!=t){if("discussions"==t)return void c.scrollToElement($("#discussions"),!0);var o="toc_btn_"+t.split("%20").join("_").split(" ").join("_"),i="#"+c.escapeStringForSelector(o);try{var n=angular.element(i).children("a").eq(0)}catch(e){console.log("problem parsing hashtag")}if(n&&0<n.length){$("nav#header").addClass("fold"),c.clickTocButton(n,!0);var a=0,r=setInterval(function(){c.clickTocButton(n,!0),a=0},1e3),s=function(){r&&(clearInterval(r),r=null)};$(document).scroll(function(){1<a++&&s()}),setTimeout(function(){s()},8e3)}else console.log("error finding selector children: ",i)}else c.updateTocActiveButton()}c.$scrollableElement.scroll(function(){return c.updateTocActiveButton()})},200)},c.updateTocActiveButton=function(){var e=$("#article_content_wrapper"),a=e.find("#overview"),r=this.$scrollableElement.scrollTop(),s=0,t=0;c.$headerElement&&(t=c.$headerElement.height());var l=$(window).height()-t;e.find("h2 .mw-headline, h3 .mw-headline").each(function(e,t){var o=$(this),i=.3*Math.min(l,s),n=c.getElementOffset(o)-i;return s=o.outerHeight(),n<=r&&(a=$(this),!0)}),o.cancel(n),n=o(function(){$(".toc_list > li, .toc_list > li a").removeClass("active"),a&&c.activateTocButtonBySection(a)},100)},this.scrollToNextOrPrevSection=function(e){var t=s.activeButton;if(t){var o=$("#wikiwand_toc").find("li"),i=o.index(t)+e;if(!(i<0||i>=o.length)){var n=o.eq(i).find("a").eq(0);n&&1===n.length&&c.clickTocButton(n)}}},c.activateTocButtonBySection=function(e){var t="#toc_btn_"+c.escapeStringForSelector(e.attr("id")),o=$(t);0!==o.length&&this.activateTocButton(o)},c.activateTocButton=function(e){var t=e;0<(s.activeButton=e).parent("ol").length&&(t=e.parent().parent()).addClass("active").children("a").addClass("active");var o=t.position().top,i=t.outerHeight(),n=$("#wikiwand_toc").height(),a=Math.round(o-(n-i)/2);a<0&&(a=0),n<a&&(a=n);$("#wikiwand_toc").stop().animate({scrollTop:a},{duration:200}),e.addClass("active").children("a").addClass("active")},c.getElementOffset=function(e){var t=e.offset().top,o=0;return c.$headerElement&&(o=c.$headerElement.height()),Math.floor(t-o-10)},c.scrollToElement=function(e,t){if(0!==e.length)if(1<e.length)console.warn("ScrollToElement(): more than one element found: ",e);else{var o=c.getElementOffset(e),i=Math.abs(c.$scrollableElement.scrollTop()-o)/10;i<200&&(i=200),400<i&&(i=400),t&&(i=0),l.isTouchDevice()||t?$("html,body").scrollTop(o):$("html,body").stop().animate({scrollTop:o},{duration:i})}else console.warn("ScrollToElement(): element not found:",e)},$("body").on("click","#toc_btn > span",function(){$("html,body").animate({scrollTop:0},200),window.location.hash=""}),t.scrollToArticleSection=function(e){var t=angular.element("#"+c.escapeStringForSelector(e));c.scrollToElement(t)},c.escapeStringForSelector=function(e){return e?e.replace(/([ #;?&,.+*~\':"!^$[\]()=>|\/@])/g,"\\$1"):e},c.clickTocButton=function(e,t){if(e&&1==e.length){var o=e.attr("href").substr(1),i="#"+c.escapeStringForSelector(o),n=angular.element(i),a=n.parents("div.collapse_title, div.collapse");if(0<a.length){var r=a.parent();r.children("div.collapse_title").addClass("active"),r.children("div.collapse").show()}c.scrollToElement(n,t),$("#content h2 span, #content h3 span").removeClass("active"),n.addClass("active")}},s.button.doClick=function(e){var t=e.currentTarget,o=angular.element(t);c.clickTocButton(o)};var r=$(window).width();r<920&&(t.tocShow=!1,t.mobileRes=!0),t.tocGenerate()}}]),(app=angular.module("wikiwand")).service("LanguagePreferences",["$rootScope","$http",function(e,t){var s={},r=function(){localStorage.wikiwand_languages_rev2||(localStorage.wikiwand_languages_rev2={}),localStorage.wikiwand_languages_rev2=angular.toJson(s)},o=function(){try{if(serverData&&serverData.agent&&serverData.agent.clientLanguages){var i={en:{count:4}},e=serverData.agent.clientLanguages.split(","),n=!1;console.log("array ",e),_.each(e,function(e,t){var o=e.split(";")[0].split("-")[0];console.log("lang",o),"en"==o||n||(i[o]={count:4},n=!0)}),localStorage.wikiwand_languages=angular.toJson(i)}else s={en:{count:1,fav:!0,lang:"en",NameEnglish:"English"},fr:{count:1,fav:!0,lang:"fr",NameEnglish:"French"}},r()}catch(e){s={en:{count:1,fav:!0,lang:"en",NameEnglish:"English"},fr:{count:1,fav:!0,lang:"fr",NameEnglish:"French"}},r()}},l=function(){localStorage.wikiwand_languages_rev2&&(s=angular.fromJson(localStorage.wikiwand_languages_rev2))};return"undefined"!=typeof precache_from_extension&&precache_from_extension||function(){if(function(){try{if(localStorage.wikiwand_languages||o(),localStorage.wikiwand_languages_rev2)return;var a=angular.fromJson(localStorage.wikiwand_languages);console.log("old language pref ",a),t.get("/js/wikipedia-lang-infos-client-dictionary.js").success(function(e,t,o,i){var n=e;_.each(n,function(e,t){a[n[t].CodeURL]&&(console.log("found match ",n[t].CodeURL),a[n[t].CodeURL].fav=!0,a[n[t].CodeURL].lang=n[t].CodeURL,a[n[t].CodeURL].NameEnglish=e.NameEnglish,a[n[t].CodeURL].fav=!0,3<a[n[t].CodeURL].count&&(s[n[t].CodeURL]=a[n[t].CodeURL]))}),r()})}catch(e){console.log("migration of old languages storage failed",e)}}(),l(),"undefined"!=typeof articleData&&articleData.langCodeUrl){var e=articleData.langCodeUrl;s[e]&&(s[e].count=s[e].count+1,r())}}(),{getTopNLangs:function(e,t){for(var o in l(),s)""===(s[o].lang=o)&&delete s[o];var i=_.toArray(s),n=_.sortBy(i,function(e){var t=e.count;return e.fav&&(t+=50),t}).reverse(),a=[];for(var r in t&&a.push(t),n)n[r].lang!==t&&1==n[r].fav&&a.push(n[r].lang);return a=_.first(a,e)},getLangPrefs:function(){return s},toggleLangFave:function(e,t){s[e]?(1==s[e].fav?s[e].fav=!1:s[e].fav=!0,s[e].NameEnglish=t):s[e]={count:1,fav:!0,lang:e,NameEnglish:t},console.log("toggled fav for ",e,"new value is ",s[e].fav),r(),localStorage.wikiwand_last_save=(new Date).getTime()},removeLangsLowerThanCount:function(o){_.each(s,function(e,t){e.count<o&&delete s[e.lang]}),r()}}}]),(app=angular.module("wikiwand")).service("userPreferences",["$rootScope","Utilities","$window",function(r,s,l){r.prefsTouched=!1;var c={},d=function(){if(localStorage.wikiwand_user_prefs)try{c=angular.fromJson(localStorage.wikiwand_user_prefs)}catch(e){l.trackJs&&(trackJsInfo(l,"preferences json string is "+localStorage.wikiwand_user_prefs),l.trackJs.track("problem parsing user prefs",e.message))}return r.isHttps="https:"==location.http,c},o=function(e){if(r.articleData&&!r.articleData.pageIsArticle){if("/news"!=window.location.pathname.toLowerCase())return void console.log("not article page, not loading styling");console.log("news page")}trackJsInfo(l,"updatePageStyle "+e),1==(c=d()).TOC_folded?r.tocShow=!1:r.tocShow=!0;var t=[];s.isTouchDevice()&&t.push("touch"),s.isItInternetExplorer()&&t.push("ie");var o=!1;if(serverData.agent&&"Chrome"==serverData.agent.family&&r.activation){var i=r.activation.joined,n=new Date("Thu, 11 Jun 2015 13:30:00 GMT"),a=new Date("Sun, 28 Jun 2015 12:00:00 GMT");n<i&&i<a&&(o=!0)}"wikiwand"==serverData.layout?c.fontStyle?r.fontStyle=c.fontStyle:r.fontStyle=o?"sansSerif":"serif":(r.fontStyle="sansSerif",document.querySelector("body").classList.add(serverData.publisherHostCode)),c.themeStyle?r.themeStyle=c.themeStyle:r.themeStyle="light",c.txtSize?r.txtSize=c.txtSize:r.txtSize=o?"smallTxt":"mediumTxt",c.columnWidth?r.columnWidth=c.columnWidth:r.columnWidth=o?"full":"narrow",c.justify?r.justifyTxt="true"==c.justify:r.justifyTxt=!1,c.minimalStyle?r.minimalStyle="true"==c.minimalStyle:r.minimalStyle=!!o,"smallTxt"==r.txtSize&&t.push("small_txt"),"mediumTxt"==r.txtSize&&t.push("medium_txt"),"largeTxt"==r.txtSize&&t.push("large_txt"),"serif"==r.fontStyle&&t.push("serif"),"sansSerif"==r.fontStyle&&t.push("sans_serif"),"light"==r.themeStyle&&t.push("light"),"dark"==r.themeStyle&&t.push("dark"),"narrow"==r.columnWidth&&t.push("narrow_column"),"wide"==r.columnWidth&&t.push("wide_column"),"full"==r.columnWidth&&t.push("full_column"),1==r.justifyTxt&&t.push("justify"),1==r.minimalStyle&&t.push("minimal"),r.userBodyStyle="[ "+t.join(" ")+" ]"};return d(),function(){if("production"==serverData.config.environment){var e=["fontStyle","themeStyle","txtSize","justify","minimalStyle","columnWidth","TOC_folded"],t=Math.floor(Math.random()*e.length);for(var o in e){var i=e[o];if(o==t){var n="virtualpageview/preferences/"+i+"/"+c[i];analytics.gaVirtualPageView(n)}}}}(),{getPref:function(e){return d(),c[e]?c[e]:null},setPref:function(e,t){c[e]=t,localStorage.wikiwand_user_prefs||(localStorage.wikiwand_user_prefs={}),localStorage.wikiwand_user_prefs=angular.toJson(c),localStorage.wikiwand_last_save=(new Date).getTime(),o("update")},updatePageStyle:o}}]),(app=angular.module("wikiwand")).controller("UserPrefsController",["$scope","$rootScope","$window","Utilities","userPreferences","$timeout",function(e,o,t,i,n,a){var r=this;r.initPreferencesSliders=function(){n.updatePageStyle("update"),1===$(".per_btn").length&&($(".toggle_slider").noUiSlider({start:[0],step:1,range:{min:[0],max:[1]}}),$(".step_slider").noUiSlider({start:[0],step:1,range:{min:[0],max:[2]}}),e.Math=window.Math,e.fontStyleSlider=0,"serif"===o.fontStyle?e.fontStyleSlider=0:e.fontStyleSlider=1,$("#font_style_slider").val(e.fontStyleSlider),$("#font_style_slider").on({slide:function(){var e=Math.floor($(this).val());o.fontStyleHandler(e,!1),o.$apply()}}),e.themeSlider=0,"light"===o.themeStyle?e.themeSlider=0:e.themeSlider=1,$("#theme_slider").val(e.themeSlider),$("#theme_slider").on({slide:function(){var e=Math.floor($(this).val());o.themesHandler(e,!1),o.$apply()}}),e.fontSizeSlider=1,"smallTxt"===o.txtSize?e.fontSizeSlider=0:"mediumTxt"===o.txtSize?e.fontSizeSlider=1:"largeTxt"===o.txtSize&&(e.fontSizeSlider=2),$("#font_size_slider").val(e.fontSizeSlider),$("#font_size_slider").on({slide:function(){var e=Math.floor($(this).val());o.txtSizeHandler(e,!1),o.$apply()}}),e.columnWidthSlider=0,"narrow"===o.columnWidth?e.columnWidthSlider=0:"wide"===o.columnWidth?e.columnWidthSlider=1:"full"===o.columnWidth&&(e.columnWidthSlider=2),$("#column_slider").val(e.columnWidthSlider),$("#column_slider").on({slide:function(){var e=Math.floor($(this).val());o.columnWidthHandler(e,!1),o.$apply()}}),o.justifyTxt="true"==n.getPref("justify"))},r.prefsTouchedAnalyticsSent=!1,r.prefsTouchedHandler=function(e){console.log("Preference touched: ",e),n.setPref("prefsTouched","true"),o.prefsTouched="true"==n.getPref("prefsTouched"),r.prefsTouchedAnalyticsSent||(analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/personalized"),r.prefsTouchedAnalyticsSent=!0)},1==articleData.pageIsArticle&&(o.initPrefsController=function(){r.initPreferencesSliders(),e.preMenuReady=!0},o.fontStyleHandler=function(e,t){r.prefsTouchedHandler("fontStyle"),$(".per_serif").removeClass("new_pref"),0===e?(o.fontStyle="serif",n.setPref("fontStyle","serif")):1===e&&(o.fontStyle="sansSerif",n.setPref("fontStyle","sansSerif")),!0===t&&$("#font_style_slider").val(e)},o.themesHandler=function(e,t){r.prefsTouchedHandler("themeStyle"),$(".per_serif").removeClass("new_pref"),0===e?(o.themeStyle="light",n.setPref("themeStyle","light")):1===e&&(o.themeStyle="dark",n.setPref("themeStyle","dark")),!0===t&&$("#theme_slider").val(e)},o.txtSizeHandler=function(e,t){r.prefsTouchedHandler("txtSize"),$(".per_serif").removeClass("new_pref"),0===e?(o.txtSize="smallTxt",n.setPref("txtSize","smallTxt")):1===e?(o.txtSize="mediumTxt",n.setPref("txtSize","mediumTxt")):2===e&&(o.txtSize="largeTxt",n.setPref("txtSize","largeTxt")),!0===t&&$("#font_size_slider").val(e)},o.justifyHandler=function(e){r.prefsTouchedHandler("justify"),$(".per_serif").removeClass("new_pref"),1==e?(o.justifyTxt=!0,n.setPref("justify","true")):(o.justifyTxt=!1,n.setPref("justify","false"))},o.layoutHandler=function(e){r.prefsTouchedHandler("minimalStyle"),$(".per_serif").removeClass("new_pref"),"minimal"===e?(n.setPref("minimalStyle","true"),o.minimalStyle=!0,o.resetMinimal()):"rich"===e&&(n.setPref("minimalStyle","false"),o.minimalStyle=!1,o.resetRich())},e.prefClick=function(){n.setPref("prefAttention","true")},o.columnWidthHandler=function(e,t){r.prefsTouchedHandler("columnWidth"),$(".per_serif").removeClass("new_pref"),0===e?(o.columnWidth="narrow",n.setPref("columnWidth","narrow")):1===e?(o.columnWidth="wide",n.setPref("columnWidth","wide")):2===e&&(o.columnWidth="full",n.setPref("columnWidth","full")),!0===t&&$("#column_slider").val(e),1<=$(".tables_wrapper").length&&a(function(){o.$broadcast("runTablesOverflow",[])},100)},o.resetRich=function(){o.fontStyleHandler(0,!0),o.themesHandler(0,!0),o.txtSizeHandler(1,!0),o.columnWidthHandler(0,!0),o.justifyHandler(!1),analytics.gaEvent("preferences","popup","Rich style reset")},o.resetMinimal=function(){o.fontStyleHandler(1,!0),o.themesHandler(0,!0),o.txtSizeHandler(0,!0),o.columnWidthHandler(2,!0),o.justifyHandler(!1),analytics.gaEvent("preferences","popup","Minimal style reset")})}]);var addHighlightClick=function(e){$("#inline_bookmark_button, #inline_fact_button, #inline_board_button").remove(),$("body").scope().bookmarkAdd("highlight","this")},addFactClick=function(){$("#inline_bookmark_button, #inline_fact_button, #inline_board_button").remove(),$("body").scope().bookmarkAdd("fact","this")};(app=angular.module("wikiwand")).controller("BookmarkController",["$scope","Utilities","$http","ipCookie","$timeout","$rootScope",function(l,e,c,t,d,h){var u=this,f={};$("#fullContent").text();l.alreadyHave=!1,h.bookmarkCount=0,h.fetchedBookmarks=!1,e.isTouchDevice()||$("#bookmarks").niceScroll({touchbehavior:!0}).hide(),l.bookmarks=[],l.facts=[],"undefined"!=typeof factData&&(l.facts=factData),u.openBookmarksPane=function(){h.showBookmarkFeed||($("#header").addClass("foldfix"),h.showBookmarkFeed=!0)},h.getValidParent=function(e){for(var t={P:1,LI:1,TD:1,DD:1,DIV:1,SECTION:1,ARTICLE:1,BODY:1};void 0===t[e.nodeName];)$(e).find(),e=e.parentNode;return e},h.checkSelection=function(){if($(".highlight_paragraph").removeClass("highlight_paragraph"),$(".currenthighlight").contents().unwrap(),window.getSelection){var e=window.getSelection();if(!(e.toString().length<5||1e3<e.toString().length)){var t=h.getValidParent(e.anchorNode),o=h.getValidParent(e.focusNode);if(!t.isEqualNode(o))return console.log("Selection NOT eligible for bookmarking: start and end has different parent"),!1;var i=t,n=i.textContent,a=e.toString();if(n=n.replace(/\[[^\]]+\]/gi,""),a=a.replace(/\[[^\]]+\]/gi,""),!(-1<n.indexOf(a)))return console.log("Selection NOT eligible for bookmarking: selection not found in parent"),!1;var r="@@@DOT@@@",s=function(e){var t;t=function(e){return e.replace(/\./g,r)},e=e.replace(/\b[A-Za-z]\.(?!\S)/g,t).replace(/\b[A-Z][a-z]\.(?!\S)/g,t).replace(/\b[A-Z]\.[A-Z]\.?\-?(?!\S)/g,t).replace(/\b\d+\.\d+/g,t);var o=new RegExp("[^.!?]*[.!?]","g"),i=(e+".").match(o);if(!i)return[];for(var n=0;n<i.length;n++)i[n]=i[n].replace(new RegExp(r,"g"),".");return 0<i.length&&(i[i.length-1]=i[i.length-1].substr(0,i[i.length-1].length-1)),i},l=n.substr(0,n.indexOf(a)),c=s(l);0<c.length&&(l=c[c.length-1]),'" '!=(l=l.replace(/^\s+/,""))&&"' "!=l||(l="");var d=n.substr(n.indexOf(a)+a.length);0<(c=s(d)).length&&(d=c[0]),d=d.replace(/\s+$/,""),""==l&&(a=a.replace(/^\s+/,"")),""==d&&(a=a.replace(/\s+$/,"")),f={highlight:a,text:l+"<b>"+a+"</b>"+d,prefix:l,postfix:d},$(".inline_bookmark_paragraph").removeClass("inline_bookmark_paragraph"),$("#inline_fact_button").remove(),$("#inline_bookmark_button").remove();var u=null;try{u=e.anchorNode.nextSibling;var p=$(u).offset().top-$("#article_content_wrapper").offset().top+30}catch(e){}if(!u)p=$(i).offset().top-$("#article_content_wrapper").offset().top+$(i).height()/2;$("#article_content_wrapper").prepend('<div id="inline_bookmark_button" onmouseup="event.stopPropagation()" onmousedown="event.stopPropagation()" onclick="addHighlightClick();"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"  width="32px" height="32px" viewBox="0 0 32 32"><polygon fill="#f7f7f7" points="24,11.107 30.375,16.409 24,21.71 "/><path fill="#f7f7f7" d="M25,28c0,1.104-0.896,2-2,2H4c-1.104,0-2-0.896-2-2V4c0-1.104,0.896-2,2-2h19c1.104,0,2,0.896,2,2V28z"/><polygon fill="#1559B5" points="20.821,15.339 18.818,15.339 18.818,13.336 17.831,13.336 17.831,15.339 15.829,15.339 \t\t15.829,16.325 17.831,16.325 17.831,18.327 18.818,18.327 18.818,16.325 20.821,16.325 \t"/><path fill="#1559B5" d="M17.811,20.048c-2.376,0-4.074-1.926-4.074-4.302c0-2.376,1.583-4.303,3.961-4.303\t\tc0.219,0,0.302,0.022,0.302,0.053V9H8v15.896l4.999-2.94L18,24.896v-4.9C18,20.026,18.031,20.048,17.811,20.048z"/></svg><span>Bookmark this quote</span></div>'),h.user.isAdmin&&$("#article_content_wrapper").prepend('<div id="inline_fact_button" onmouseup="event.stopPropagation()" onmousedown="event.stopPropagation()" onclick="addFactClick()"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"  width="32px" height="32px" viewBox="0 0 32 32"><polygon fill="#f7f7f7" points="24,11.107 30.375,16.409 24,21.71 "/><path fill="#f7f7f7" d="M25,28c0,1.104-0.896,2-2,2H4c-1.104,0-2-0.896-2-2V4c0-1.104,0.896-2,2-2h19c1.104,0,2,0.896,2,2V28z"/><polygon fill="#40bbe1" points="20.821,15.339 18.818,15.339 18.818,13.336 17.831,13.336 17.831,15.339 15.829,15.339 \t\t15.829,16.325 17.831,16.325 17.831,18.327 18.818,18.327 18.818,16.325 20.821,16.325 \t"/><path fill="#40bbe1" d="M17.811,20.048c-2.376,0-4.074-1.926-4.074-4.302c0-2.376,1.583-4.303,3.961-4.303\t\tc0.219,0,0.302,0.022,0.302,0.053V9H8v15.896l4.999-2.94L18,24.896v-4.9C18,20.026,18.031,20.048,17.811,20.048z"/></svg><span>Create a Fact</span></div>'),$(i).addClass("inline_bookmark_paragraph"),$("#inline_bookmark_button").css("top",p),$("#inline_fact_button").css("top",p),analytics.gaEvent("bookmarks","selection","icon-view"),analytics.gaVirtualPageView("virtualpageview/bookmarks/selection/icon-view")}}},u.getBookmarks=function(){l.fetchedBookmarks||l.loadingBookmarks||(h.user.logins&&h.user.logins.facebook.isActive?(h.bookmarksProgressIndicator=!0,l.loadingBookmarks=!0,c.get("/api/user/bookmarks/allForUser").success(function(e){l.loadingBookmarks=!1,l.fetchedBookmarks=!0,e.error||!e.bookmarks?console.error("error fetching bookmarks ",e.error):e.bookmarks.forEach(function(e,t){e.createTime=parseInt(e.createTime),e.synchronized="synchronized",l.bookmarks.push(e)}),h.bookmarksProgressIndicator=!1})):d(u.getBookmarks,1e3))},u.factSpacing=function(){d(function(){l.facts.sort(function(e,t){return e.vertPosition-t.vertPosition});for(var e=-2,t=0;t<l.facts.length;t++){var o=Math.round(Math.random());97<e||(l.facts[t].vertPosition-e<3&&(l.facts[t].vertPosition=e+3+o),e=l.facts[t].vertPosition)}if(97<e){e=102;for(t=l.facts.length-1;0<=t;t--){o=Math.round(Math.random());e<4||(e-l.facts[t].vertPosition<3&&(l.facts[t].vertPosition=e-3-o),e=l.facts[t].vertPosition)}}},0)},l.saveBookmark=function(e,t){h.user.logins.facebook.isActive?("fact"==e.type&&(e.articleHasGist=articleData.hasGist),c.post("/api/user/bookmarks/put",e).success(function(e){return t(e.error,e.data)})):d(function(){l.saveBookmark(e,t)},1e3)},l.$watch("$root.user.logins.facebook.isActive",function(e){!0===e&&h.bookmarksConnectClicked&&(h.bookmarksConnectClicked=!1,analytics.gaEvent("bookmarks","connect","connected"),analytics.gaVirtualPageView("virtualpageview/bookmarks/connect/connected"))}),l.$watch("$root.showBookmarkFeed",function(){!l.fetchedBookmarks&&h.showBookmarkFeed&&(u.getBookmarks(),d(function(){h.showBookmarkInstructionsLatch=!0,h.showBookmarkThisLatch=!0},0))}),l.$watch("facts",function(){0<l.facts.length&&(h.gistOn=!0),u.factSpacing()},!0),l.$watch("bookmarks",function(){l.bookmarkDictionary={},l.bookmarks.forEach(function(e,t){"article"==e.type&&(l.bookmarkDictionary[e.articleKey]=!0);var o=e.articleKey.split("/");if(2<=o.length){var i=o[1],n=!!_.contains(["ar","arc","arz","dv","fa","glk","he","lad","mzn","pnb","ps","sd","ug","ur","yi","ckb","mzn"],i);e.textDirection=n?"rtl":"ltr"}else e.textDirection="ltr";"highlight"!=e.type&&200<e.text.length&&(e.text=e.text.slice(0,200).split(" "),e.text.pop(),e.text=e.text.join(" ")+"...")}),l.fetchedBookmarks&&l.bookmarkDictionary[h.articleData.cache.key]?l.showBookmarkThis=!1:l.showBookmarkThis=!0,l.fetchedBookmarks?(h.bookmarkCount=l.bookmarks.length,t("wikiwand.bookmarks.count",l.bookmarks.length,{path:"/",expires:7})):t("wikiwand.bookmarks.count")?h.bookmarkCount=t("wikiwand.bookmarks.count"):h.bookmarkCount=l.bookmarks.length,t("wikiwand.bookmarks.count")||u.getBookmarks()},!0),h.bookmarkAdd=function(t,o){var i;f.highlight&&h.stringSearch(f.highlight,!0);try{i=Math.round($(".currenthighlight:eq(0)").offset().top/$("#article_content_wrapper").height()*1e3)/10}catch(e){i=0}"fact"!=t&&d(function(){$("#bookmarks").animate({scrollTop:0},200),u.openBookmarksPane()},0);var e=o;"this"===o&&(e=h.articleData.cache.key),e=e.split("#")[0];var n=(new Date).getTime(),a={userId:h.user.userId,articleKey:e,articleTitle:"none",type:t,text:"none",section:"none",userText:"none",createTime:n,bookmarkID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}(),listName:"My Bookmarks",thumbnail:"none",highlight:"none",vertPosition:parseFloat(i),originalVertPosition:parseFloat(i)};if(l.bookmarkDictionary[e]&&"article"==t){l.alreadyHave=!0,d.cancel(r);var r=d(function(){l.alreadyHave=!1},3e3)}else{h.bookmarksProgressIndicator=!0,"fact"===t&&(a.text=f.text||"none",a.highlight=f.highlight||"none",a.userText=a.highlight,a.listName="gist",a.showThisGist=!0,d(function(){console.log("facts ",l.facts),l.facts.push(a),console.log("added fact")},0),analytics.gaEvent("bookmarks","added","fact"),analytics.gaVirtualPageView("virtualpageview/bookmarks/added/fact"));var s="/api/snippet"+e+"?minrev=1&callback=JSON_CALLBACK";c.jsonp(s).success(function(e){h.bookmarksProgressIndicator=!1,a.articleTitle=e.title,a.text=e.text||"none",a.thumbnail=e.thumbnail?e.thumbnail.source:"none","highlight"===t&&(a.text=f.text||"none",a.highlight=f.highlight||"none",analytics.gaEvent("bookmarks","added","selection"),analytics.gaVirtualPageView("virtualpageview/bookmarks/added/selection")),"article"==t&&("this"===o?(analytics.gaEvent("bookmarks","added","article-this"),analytics.gaVirtualPageView("virtualpageview/bookmarks/added/article-this")):(analytics.gaEvent("bookmarks","added","article-ocd"),analytics.gaVirtualPageView("virtualpageview/bookmarks/added/article-ocd"))),a.synchronized="unknown","fact"==t?(a.text=f.text||"none",a.userThumb="none",a.isFact=!0):l.bookmarks.push(a),l.saveBookmark(a,function(e,t){e||!t?(a.synchronized="error",console.error("error in savebookmark ",e,t,a)):a.synchronized="synchronized"})})}},h.gistShareTop=function(e,t,o,i){var n=event.currentTarget.parentNode.parentNode.getBoundingClientRect().top+event.currentTarget.parentNode.parentNode.offsetHeight/2;"mainShare"==i&&(n=event.currentTarget.getBoundingClientRect().top+event.currentTarget.offsetHeight/2),h.shareGist=!0,d(function(){document.querySelector(".share_gist").style.top=n+"px"},0),65<t.length&&(t=t.substring(0,65)+"..."),h.gistShareTxt=t,o&&(h.gistShareId=o.substr(0,5))},h.openFact=function(e){var t=location.search.split("factId=")[1]?location.search.split("factId=")[1]:null;if(-1<e.indexOf(t))return!0},l.deleteBookmark=function(o){var i;console.log("delete bookmark"),h.bookmarksProgressIndicator=!0,analytics.gaEvent("bookmarks","removed"),analytics.gaVirtualPageView("virtualpageview/bookmarks/removed"),l.bookmarks.forEach(function(e,t){e.bookmarkID==o&&((i=e).synchronized="deleting",l.bookmarks.splice(t,1))}),i||l.facts.forEach(function(e,t){e.bookmarkID==o&&((i=e).synchronized="deleting",l.facts.splice(t,1))}),c.post("/api/user/bookmarks/delete",i).success(function(e){e.error&&console.error("error deleting bookmark ",e.error),h.bookmarksProgressIndicator=!1})},l.openBookmark=function(e){"article"==e.type&&(window.open(e.articleKey),analytics.gaEvent("bookmarks","jump","article"),analytics.gaVirtualPageView("virtualpageview/bookmarks/jump/article")),"highlight"==e.type&&(analytics.gaEvent("bookmarks","jump","selection"),analytics.gaVirtualPageView("virtualpageview/bookmarks/jump/selection"),e.articleKey==h.articleData.cache.key?h.stringSearch(e.highlight,!0):(t("wikiwand.bookmarks.hightlighttoopen",e.highlight,{path:"/"}),window.open(e.articleKey)))},h.jumpToFact=function(o){l.facts.forEach(function(e,t){e.bookmarkID==o&&h.stringSearch(e.highlight,!0)})}}]),app.controller("FactController",["$scope","$http","$timeout","$rootScope",function(n,e,a,t){t.user.isAdmin&&(n.$watch("fact",function(e,t){if(e!=t){var o=$.extend({},e);delete o.showThisGist;var i=$.extend({},t);delete i.showThisGist,console.log("test old ",i),console.log("test new ",o),JSON.stringify(i)!=JSON.stringify(o)?(a.cancel(n.savePromise),n.savePromise=a(function(){console.log("need to save"),"deleting"!=e.synchronized&&n.$parent.saveBookmark(e,function(e,t){e&&console.log("error updating bookmark")})},2e3)):console.log("not really changed ")}else console.log("no change")},!0),n.selectThumbnail=function(e,t){console.log("selected thumbnail ",t),e.userThumb=t})}]),app.directive("contenteditable",function(){return{restrict:"A",require:"ngModel",link:function(e,t,o,i){function n(){i.$setViewValue(t.text().trim())}i.$render=function(){"none"==i.$viewValue?t.html("Click here to enter fact"):t.html(i.$viewValue||"")},t.bind("keydn focus",function(){"none"==i.$viewValue&&t.html("")}),t.bind("blur keyup change",function(){e.$apply(n)})}}});app=angular.module("wikiwand");var backClicked=function(){console.log("back clicked"),$("body").scope().backClicked()},ocdClick=function(e){console.log("ocd bookmark clicked"),$("body").scope().addBookamrkFromHovercard(e)},mousePos={};app.controller("ArticleContentController",["$rootScope","$scope","Utilities","$timeout","$compile","$window","$http","ipCookie","MonService",function(a,r,f,i,o,s,e,t,n){r.showReadMore=0;var l=this,c=!1,d=!1,u="none";if(serverData.config.features.boards)BoardService.sendBoardAnalytics();var p,h="wikiwand"==serverData.layout||"newTabWiki"==serverData.publisherHostCode;function g(){"dark"==a.themeStyle&&$(".article_content table td[style], .article_content table td[bgcolor], .article_content table tr[style], .article_content table tr[bgcolor], .article_content table th[style], .article_content table th[bgcolor]").each(function(){var e=$(this),t=e.css(["background-color","background"]);if(t){var o,i,n,a=m(t["background-color"]);o=e,i=a.substring(1),135<.2126*((n=parseInt(i,16))>>16&255)+.7152*(n>>8&255)+.0722*(n>>0&255)&&(o.css("color","#333"),o.find("a").css("color","#1559b5"))}})}function m(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}a&&a.cohorts&&a.cohorts.mon_ocd&&(u=a.cohorts.mon_ocd||"none"),r.showDiscoverMore=0,"en"==articleData.langCodeUrl&&(r.showTextEnglish=!0),n.initMonService(),l.tablesOverflow=function(){var t=$("#article_content_wrapper").width();$(".tables_wrapper > table").each(function(){var e=$(this).width();t+5<e?$(this).parent().addClass("scroll"):$(this).parent().removeClass("scroll")})},a.addBookamrkFromHovercard=function(e){r.$apply(function(){a.loadBookmarkController=!0,a.showBookmarkFeed=!0}),i(function(){a.bookmarkAdd("article",e)},0)},a.stringSearch=function(i,e){$(".highlight_paragraph").removeClass("highlight_paragraph"),$(".currenthighlight").contents().unwrap(),i=i.replace(/\[[^\]]+\]/gi,"");var n=null;if($("#fullContent section").find("p, li, td, dd, div").each(function(e,t){if(!$(t).hasClass("img_container")&&!$(t).hasClass("image_wrapper")&&!n){var o=$(t).text().replace(/\[[^\]]+\]/gi,"");-1<o.indexOf(i)&&(n={text:o,element:t})}}),n){$(n.element).addClass("highlight_paragraph");var t,o,a,r,s=$(n.element).html(),l=s.split(" "),c=l.length,d=c,u=0;$("body").append('<div id="tempElement"></div>');for(t=c;1<t;t--){var p=l.slice(0,t);if($("#tempElement").html(p.join(" ")),!(-1<$("#tempElement").text().replace(/\[[^\]]+\]/gi,"").indexOf(i)))break;-1<s.indexOf($("#tempElement").html())&&(d=t,a=$("#tempElement").html())}for(o=0;o<d;o++){p=l.slice(o,d);if($("#tempElement").html(p.join(" ")),!(-1<$("#tempElement").text().replace(/\[[^\]]+\]/gi,"").indexOf(i)))break;-1<s.indexOf($("#tempElement").html())&&(u=o,a=$("#tempElement").html())}if(r=d<c||0<u?$(n.element).html().replace(a,'<span class="currenthighlight">'+a+"</span>"):n.text.replace(i,'<span class="currenthighlight">'+i+"</span>"),$(n.element).html(r),console.log("need to scroll to bookmark?",e),1==e){try{var h=$(".currenthighlight:eq(0)").offset().top-$(window).height()/2}catch(e){h=$(".highlight_paragraph:eq(0)").offset().top-$(window).height()/3}f.isTouchDevice()?$("html,body").scrollTop(h):$("html,body").stop().animate({scrollTop:h},{duration:400})}$("#tempElement").remove()}},f.isTouchDevice()||$("body").on("mousemove",".panoramic",function(e){var t=$(this),o=t.offset().left,i=t.width(),n=t.find("img").width();if(!(n<=i)){var a=(e.pageX-o)/i,r=(a-=.5)<0;a=Math.abs(a),a=Math.pow(a,.7),r&&(a*=-1),(a+=.5)<0&&(a=0),1<a&&(a=1);var s=(n-i)*a;t.find(".img_container").scrollLeft(s)}}),a.$on("Facebook:load",function(){serverData&&serverData.config&&serverData.config.features&&serverData.config.features.comments&&(FB.Event.subscribe("comment.create",function(e){var t=!!e.parentCommentID;a.reportComments("article-comment-posted",t?"child":"parent")}),FB.Event.subscribe("comment.remove",function(e){console.log("comment deleted",e),a.reportComments("article-comment-deleted")}))}),r.scrollToDiscussions=function(){var e=$("#discussions").offset().top;f.isTouchDevice()?$("html,body").scrollTop(e):$("html,body").stop().animate({scrollTop:e},{duration:250}),a.reportComments("article-comments-link-click")},l.readMoreHandler=function(){var t=[];function o(e){for(var t=[],o=0;o<e.length;o++){var i=e.eq(o).attr("href");-1!==i.indexOf(":")||-1!==i.indexOf("#")||$(e.eq(o)).parent("small").length||t.push(i)}return t}r.readMoreArticles=[],i(function(){var e,n,a;(t=t.concat(o($("#overview p.first-paragraph").find(".int-link"))).slice()).length<10&&(t=t.concat(o($("#overview").find(".int-link"))).slice()),t.length<10&&(t=t.concat(o($("#fullContent").find(".int-link"))).slice()),t.length<3?r.showReadMore=0:(r.showReadMore=1,e=t,n=$("#fullContent").text().toLowerCase(),a={},_.each(e,function(e){var t="/"+articleData.langCodeUrl+"/",o=e.split(t).join("").split("_").join(" ");o=decodeURIComponent(o),a[e]={link:e,title:o,value:0};var i=n.split(o.toLowerCase());i.length&&(a[e].value=i.length)}),10<(t=_.sortBy(a,"value").reverse()).length?r.readMoreArticles=t.slice(3,6):r.readMoreArticles=t.slice(0,3))},500)},r.reportReadMore=function(e){analytics.gaEvent("discovery","readmore",e)},l.bottomLinkHandler=function(){r.showBottomLink=!1},l.articleArrowsHandler=function(){},l.galleryCarousel=function(){$(".ww-photo-group ul").slick({dots:!1,infinite:!1,centerMode:!1,variableWidth:!0,swipeToSlide:!0,speed:150})},a.$watch("themeStyle",function(e){"dark"==e&&g()},!0),$("button").click(function(){var e=m($("input").val());$(".result").html(e)}),l.handleTables=function(){g(),function(e){var t,s={};for(e.find("table").each(function(e,t){if($(t).hasClass("collapsible")){if(!t.getElementsByTagName("tr")[0])return;var o=t.getElementsByTagName("th")[0];if(!o)return;(s[b]=t).setAttribute("id","collapsibleTable"+b);var i=document.createElement("span"),n=document.createElement("a"),a=document.createTextNode(w);i.className="collapseButton",n.style.color=o.style.color,n.setAttribute("id","collapseButton"+b),n.setAttribute("href","#"),$(n).on("click",(r=b,function(e){e.preventDefault(),k(r)})),n.appendChild(a),i.appendChild(document.createTextNode("[")),i.appendChild(n),i.appendChild(document.createTextNode("]")),o.insertBefore(i,o.firstChild),b++}var r}),t=0;t<b;t++)if($(s[t]).hasClass("collapsed")||v<=b&&$(s[t]).hasClass("autocollapse"))k(t);else if($(s[t]).hasClass("innercollapse"))for(var o=s[t];o=o.parentNode;)if($(o).hasClass("outercollapse")){k(t);break}}($("#fullContent")),trackJsInfo(s,"handleTables"),$("table td").each(function(){var e=getComputedStyle($(this)[0]);e&&("11px"==e["line-height"]&&$(this).css("line-height","22px"))}),$(".linked_img_wrapper").each(function(){if(0<$(this).parent("div").length){var e=$(this).parent("div").attr("style");if(null==typeof e)return;$(this).hasClass("duplicateImage")||$(this).css("display","block"),null!=typeof e&&$(this).parent("div").find("br").hide()}}),$("table.sortable").tablesorter();var t=$("#article_content_wrapper").width(),e=".infobox, .infobox_v2, .infobox_v3, .sinottico, .toccolours .section_info, .collapse_title, .ambox, .vertical-navbox, .mbox-small";$(".article_content:not(#overview) > table:not("+e+"), .article_content center table:not("+e+")").each(function(){var e=$(this).width();t/1.5<e&&$(this).parent(".article_content").find(".image_wrapper").addClass("narrow_thumb"),t<e&&($(this).wrap('<div class="tables_wrapper"/>'),f.isTouchDevice()||$(".tables_wrapper").niceScroll({touchbehavior:!0,grabcursorenabled:!1,enablemousewheel:!1}).hide())}),l.tablesOverflow(),$("table.standard, .tracklist").addClass("wikitable")},l.initPortraitImage=function(){trackJsInfo(s,"initPortraitImage");var e=$(".portrait_img").first();if(e){var t=angular.element(e);o(t)(r)}},l.articleTop=function(){if(trackJsInfo(s,"articleTop"),r.articleMarginTop="noCover",articleData.mainImage&&("new_cover"===articleData.mainImage.mode||"cover"===articleData.mainImage.mode)){if(!articleData.mainImage.thumb)return;var e=articleData.mainImage.thumb.width,t=articleData.mainImage.thumb.height,o=e/t,i=t/e*100;0<$("#cover_image_wrapper").length&&(document.getElementById("cover_image_wrapper").style.paddingBottom=i+"%"),o<=1.6?r.articleMarginTop="low":1.6<o&&o<1.8?r.articleMarginTop="middle":1.8<=o&&(r.articleMarginTop="high")}},l.bindEvents=function(){trackJsInfo(s,"bindEvents"),$("body").on("mousedown","#body_wrapp",function(){$(".inline_bookmark_paragraph").removeClass("inline_bookmark_paragraph"),$("#inline_bookmark_button, #inline_fact_button, #inline_board_button").remove()}),$("body").on("mouseup","#fullContent",function(){a.loadBookmarkController=!0,i(function(){a.checkSelection()},0)}),$("body").on("click",".NavHead",function(){var e=$(this);e.parent().hasClass("collapsed")?e.parent().removeClass("collapsed"):e.parent().addClass("collapsed")});var n="sup > a, sup > i > a";$("body").on("click",n,function(e){var t=$(this).attr("href"),o=$(this).children("span").eq(0).data("title"),i="";return $(this).hasClass("anch-link")&&0<$(t).length?i=$(t).html():o&&(i=t?"<a href='"+t+"' target='_blank'>"+o+"</a>":o),i&&($(this).hasClass("active")?($(".sup_pop").remove(),$(n).removeClass("active")):($(".sup_pop").remove(),$(n).removeClass("active"),$(this).addClass("active"),$(this).parent().append('<div class="sup_pop">'+i+'<div class="ex"></div></div>'))),!1}),$("body").on("click touchstart",function(){$("sup a.anch-link").removeClass("active"),$(".sup_pop").remove()}),$("body").on("click","sup",function(e){e.stopPropagation()}),$("body").on("click",".sup_pop .ex",function(e){$("sup a.anch-link").removeClass("active"),$(".sup_pop").remove(),e.stopPropagation()}),"wikiwand"!=serverData.layout&&$("body").on("click",".int-link",function(e){if(e.stopPropagation(),e.returnValue=!1,e.preventDefault(),e.target.href){var t=e.target.href.split("#");1<t.length?window.location.href=t[0]+window.location.search+"#"+t[1]:window.location.href=t[0]+window.location.search}}),$("body").on("mouseenter",".int-link",function(e){mousePos.left=e.clientX,mousePos.top=e.clientY;var t=$(this);t.attr("title",""),t.hasClass("no_hovercard")||h&&l.loadHoverCard(t)}),$("body").on("mouseleave",".int-link",function(){var e=$(this);mousePos.left=0,mousePos.top=0,e.data("ocd-mouse-inside",!1)}),$("body").on("click",".collapse_title",function(){trackJsInfo(s,"collapse_title click event");var e=$(this).parent().find("div.collapse");$(this).hasClass("active")?($(this).removeClass("active"),e.hide()):($(this).addClass("active"),e.show())}),$("body").on("click",".wiki_alert",function(){trackJsInfo(s,"wiki_alert click event"),$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),$("body").on("click",".img_container",function(e){trackJsInfo(s,"openGallery event"),a.galleryOpen(e)}),$("body").on("error",".img_container img",function(e){trackJsInfo(s,"image load error, reverting to full url");var t=$(e.target).attr("src"),o=new RegExp("(.*)\\/thumb(\\/[a-zA-Z0-9]\\/[a-zA-Z0-9]{2,2}\\/[^\\/]*)","i"),i=t.match(o);if(i&&3==i.length){var n=i[1]+i[2];$(e.target).attr("src",n)}}),!1===f.isItInternetExplorer()&&(f.isTouchDevice()||($("body").on("click",".audio_wrapper",function(){var e=$(this).parent().attr("data-audio");$("#audio_player div").html(e),setTimeout(function(){document.getElementById("audio_player").getElementsByTagName("audio")[0].play()},10),$("#audio_player").addClass("active open").find("div").fadeIn(300),setTimeout(function(){$("#audio_player").removeClass("open")},1500)}),$("body").on("click","#audio_player .listen",function(){$("#audio_player div").html($("#section_SpokenWikipedia").find(".mediaContainer").attr("data-audio")),setTimeout(function(){document.getElementById("audio_player").getElementsByTagName("audio")[0].play()},10)}),$("body").on("click","#audio_player:not(.audio_article) > i",function(){$("#audio_player").removeClass("active").find("div").fadeOut(300,function(){$(this).empty()})}))),$(window).resize(function(){clearTimeout(p),p=setTimeout(function(){l.tablesOverflow()},100)}),angular.element(window).bind("load",function(){l.tablesOverflow()}),$("body").on("click",".drop_down_arrow",function(){$(this).hasClass("active")?$(this).removeClass("active").siblings(".vs_drop_down").slideUp(300):$(this).addClass("active").siblings(".vs_drop_down").slideDown(300)}),f.isTouchDevice()||$(function(){FastClick.attach(document.body)})},l.forceLoadImages=function(e){trackJsInfo(s,"forceLoadImages");var o=0;e.each(function(){o++;var t=$(this);setTimeout(function(){var e=t.attr("data-original");t.attr("src",e),t.loaded=!0},0*o)}),e.removeClass("lazy")},l.removeDuplicatePortrait=function(){if(trackJsInfo(s,"remove duplicate image"),articleData.mainImage&&"none"!=articleData.mainImage.mode&&articleData.mainImage.full){var e=decodeURIComponent(articleData.mainImage.full.originalUrl.split("/").pop());$("#overview .image_wrapper:not(.portrait_img) .img_container  img").each(function(){"final_image"!=$(this).attr("id")&&(decodeURIComponent($(this).attr("data-href").split(":").pop())==e&&$(this).parent().parent().addClass("duplicateImage"))})}},l.initAnchorLinks=function(){trackJsInfo(s,"initAnchorLinks"),$("sup a.anch-link").each(function(){var e=$(this).attr("href");e&&$(this).attr("href","#"+e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"))}),$(".references li").each(function(){var e=$(this).attr("id");e&&$(this).attr("id",e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"))})},l.audioScrape=function(){if(!1===f.isItInternetExplorer()&&!f.isTouchDevice()){trackJsInfo(s,"audioScrape");var e="false";0<$("#section_SpokenWikipedia audio").length&&(e="true",$("#audio_player").addClass("open"),$("#gist_wrapper").addClass("spokenArticle"));$(".mediaContainer").each(function(){if(1===$(this).find("audio").length){var e=$(this).find("audio").parent().html();$(this).attr("data-audio",e).html("<div class='audio_wrapper'><p>Play audio file</p></div>")}}),"true"===e&&setTimeout(function(){$("#audio_player div").html($("#section_SpokenWikipedia .mediaContainer").attr("data-audio")).parent().addClass("active audio_article").find(".listen").show()},1e3),$('a[href$=".ogg"]').each(function(){-1==this.href.indexOf("//upload")&&$(this).attr("target","_blank").attr("title","Audio Info").addClass("tooltip_top ").find("img").css("vertical-align","middle")}),$('a[href$=".ogg"]').on("click",function(e){if(-1!=this.href.indexOf("//upload")){var t=$(this).attr("href");$("#audio_player div").html('<audio controls><source src="'+t+'" type="audio/ogg"></audio>'),setTimeout(function(){document.getElementById("audio_player").getElementsByTagName("audio")[0].play()},10),$("#audio_player").addClass("active open").find("div").fadeIn(300),setTimeout(function(){$("#audio_player").removeClass("open")},1500),e.preventDefault()}})}},l.clearBreaks=function(){trackJsInfo(s,"clear breaks"),$($(".article_content > div, .article_content > p > br")).each(function(){var e="clear:both;"===$(this).attr("style")||"clear: both;"===$(this).attr("style");void 0!==e&&!1!==e&&""===$.trim($(this).html())&&$(this).hide()})},l.prepareTooltipster=function(){trackJsInfo(s,"prepareTooltipster"),$(".tooltip_top").tooltipster({minWidth:!0,position:"top",trigger:"hover",animation:"fade",theme:".toolbar-tooltip",speed:100}),$(".tooltip_left").tooltipster({minWidth:!0,position:"left",trigger:"hover",animation:"fade",theme:"left-tooltip",speed:100});var e="hover";f.isTouchDevice()&&(e="click"),0<$(".disambig-wrapper").length&&$(".disambig-wrapper").tooltipster({content:articleData.disambiguations.join("<br/>"),contentAsHTML:!0,minWidth:!0,maxWidth:320,trigger:e,animation:"fade",theme:".disamb-tooltip",delay:100,speed:100,interactive:!0})},l.syntaxHighlighting=function(){trackJsInfo(s,"syntaxHighlighting");var e=$("#article_content_wrapper .mw-code pre, #article_content_wrapper .mw-highlight pre"),o=function(){e.each(function(e,t){hljs.highlightBlock(t)})};0<e.length&&(d?o():$.getScript("//assets.wikiwand.com/s3lib/highlight.pack.gzip.js").done(function(e,t){d=!0,o()}).fail(function(e,t,o){console.error("Request for highlight.pack.js failed")}))},l.initContentsJQueryProcess=function(){loadedContent=!0,console.log("initContentsJQueryProcess"),trackJsInfo(s,"initContentsJQueryProcess"),i(function(){$("table.ambox, table.noprint:not(.navbox), .bandeau-niveau-modere").each(function(){var e=$(this).text();$(this).replaceWith('<div class="wiki_alert">'+e+"</div>")}),l.initAnchorLinks(),l.removeDuplicatePortrait(),setTimeout(function(){l.forceLoadImages($("img.lazy"))},500),l.clearBreaks(),l.handleTables(),l.audioScrape(),l.galleryCarousel(),l.syntaxHighlighting(),l.prepareTooltipster(),f.isTouchDevice()||($("body").hasClass("rtl")?$("#wikiwand_toc").niceScroll({cursoropacitymax:.3,cursorwidth:3,cursorborderradius:4,railpadding:{top:2,right:2,left:2,bottom:2},cursorborder:"none",railalign:"right"}):$("#wikiwand_toc").niceScroll({cursoropacitymax:.3,cursorwidth:3,cursorborderradius:4,railpadding:{top:2,right:2,left:2,bottom:2},cursorborder:"none",railalign:"left"})),l.articleArrowsHandler(),l.readMoreHandler(),l.bottomLinkHandler(),t("wikiwand.bookmarks.hightlighttoopen")&&i(function(){a.stringSearch(t("wikiwand.bookmarks.hightlighttoopen"),!0),t.remove("wikiwand.bookmarks.hightlighttoopen",{path:"/"})},0)},0)},l.loadLocalContent=function(){if(1!=precache_from_extension)return 0==loadedFromCache?(console.log("loaded from cache false"),trackJsInfo(s,"loadedFromCache==false (new rendering"),void angular.element(document).ready(function(){a.$broadcast("articleContentReadyFromShell",[]),a.showArticleContents=!0})):void("undefined"==typeof localContentHtml||c?c||i(l.loadLocalContent,10):(trackJsInfo(s,"loading content into wrapper"),c=!0,console.time("time to load localContentHtml"),$("#fullContent").html(localContentHtml),console.timeEnd("time to load localContentHtml"),articleData.mainImage&&"portrait"==articleData.mainImage.mode&&l.initPortraitImage(),a.showArticleContents=!0,console.timeEnd("time up to showArticleContents"),l.removeDuplicatePortrait(),i(function(){trackJsInfo(s,"broadcast articlecontent ready"),a.$broadcast("articleContentReadyFromShell",[])},0)))},r.disambigHandler=function(e){trackJsInfo(s,"disambigHandler"),a.showDis=!a.showDis,e.stopPropagation()},l.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},l.getArticleHrefForHovercard=function(e){var t,o;if(!(t=e.attr("href")))return null;if("/"==!t.charAt[0])return null;var i=(t=t.substr(1)).indexOf("/");if(-1==i)return null;var n=t.substr(0,i),a=t.substr(i+1);return n!==articleData.langCodeUrl?null:-1!==(o=(o=decodeURIComponent(a)).split("#")[0]).indexOf(":")?null:"vs"===o?null:o},l.showHoverCard=function(t,o){var e,i,n;trackJsInfo(s,"showHoverCard");if(t.data("ocd-mouse-inside"))return n=t.data("ocd-hover-time"),i=(new Date).getTime()-n,e=Math.max(0,700-i),setTimeout(function(){if(t.data("ocd-mouse-inside")){var e={content:o,contentAsHTML:!!1,theme:".tooltipster-ocd",maxWidth:480,interactive:!0,autoClose:!0,interactiveTolerance:500,animation:"fade",delay:100,speed:50,updateAnimation:!1,functionBefore:function(e,t){return t()},functionReady:function(e,t){var o=$(e).offset();console.log("offset for link ",o);var i=$(".tooltipster-arrow-border:eq(0)").offset();console.log("caretOffset",i),console.log("mouse offset ",mousePos),setTimeout(function(){if(200<Math.abs(o.left-mousePos.left)){console.log("moving");var e=$(t).offset();e.left=mousePos.left-$(".tooltipster-base").width()/2,$(".tooltipster-base").offset(e)}})},functionAfter:function(){}};return"none"!=u&&(e.arrowColor=$("body").hasClass("dark")?"#3a3538":"#eeeeee"),t.tooltipster(e),t.tooltipster("show")}},e)},l.loadHoverCard=function(e){var a,t,o,r,i;if(a=e,t=l.getArticleHrefForHovercard(a)){if(a.data("ocd-mouse-inside",!0),a.data("ocd-hover-time",(new Date).getTime()),r=function(){a.tooltipster("hide")},o=a.data("ocd-cache"))return l.showHoverCard(a,o);var n=articleData.langCodeUrl;return"zh-"===n.substr(0,3)&&0<=$.inArray(n,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])&&(n="zh"),i="https://"+n+".wikipedia.org/w/api.php",$.ajax({dataType:"jsonp",url:i,data:{action:"query",format:"json",prop:"extracts|pageimages|revisions|info",redirects:!0,exintro:!0,exsentences:2,explaintext:!0,piprop:"thumbnail",pithumbsize:300,rvprop:"timestamp",inprop:"watched",indexpageids:!0,titles:t},success:function(e){var t,o;if(o='<div class="ocd-content"></div>',null!=e.error)return console.log("OCD: got error",e),r();var i=e.query.pageids[0],n=e.query.pages[i];t=a.attr("href"),o="",o+='<div class="ocd-content">',null!=n.thumbnail&&(o+="<div class='image'><img src='"+l.escapeHtml(n.thumbnail.source)+"' onerror='this.style.display=\"none\"' /></div>"),null!=n.title&&(o+="<div class='title'>"+l.escapeHtml(n.title)+"</div>"),null!=n.extract&&(o+="<div class='text'>"+l.escapeHtml(n.extract)+"</div>"),"en"!=articleData.langCodeUrl&&"simple"!=articleData.langCodeUrl||"true"!=localStorage.ww_hovercards_anywhere||(o+="<span class='ctrl-ocd'>Pro tip: Ctrl+Click any word on any website for quick definition</span>"),o+="<div class='inline_block_mid read-full-article'><a href='"+t+"' target='_blank'></a></div>",o+="</div>",a.data("ocd-cache",o),l.showHoverCard(a,o)},error:function(e,t,o){return r()}})}},r.$on("articleContentReadyFromShell",function(){if(angular.element(document).ready(l.initContentsJQueryProcess),serverData.config.features&&serverData.config.features.classification&&articleData.classification&&articleData.classification.topics){var e=articleData.classification.topics,o=[];r.tags=[],r.concatenatedTags=[];var i=articleData.classification.topics.length;_.each(e,function(e){if(e.reliable="weak",i<5?(10<e.prob&&(e.reliable="med"),30<e.prob&&(e.reliable="strong")):(2<e.prob&&(e.reliable="med"),10<e.prob&&(e.reliable="strong")),"weak"==e.reliable);else{var t=e;"strong"==e.reliable?t.class="predicted":t.class="predicted med",o.push(t),"strong"==e.reliable&&r.concatenatedTags.push(t.name)}}),r.tags=_.sortBy(o,function(e){}),a.showInterestTags=!0,r.concatenatedTags=r.concatenatedTags.join(",")}}),r.$on("runTablesOverflow",function(){angular.element(document).ready(l.tablesOverflow)}),a.showArticleContents=!1,l.articleTop(),l.loadLocalContent(),l.bindEvents();var v=2,w="hide",y="show",b=0;function k(e){var t=document.getElementById("collapseButton"+e),o=document.getElementById("collapsibleTable"+e);if(!o||!t)return!1;var i,n=o.rows;if(t.firstChild.data===w){for(i=1;i<n.length;i++)n[i].style.display="none";t.firstChild.data=y}else{for(i=1;i<n.length;i++)n[i].style.display=n[0].style.display;t.firstChild.data=w}}}]);app=angular.module("wikiwand");var DISABLE_GOOGLE_MAPS=!0;app.service("MapHelper",["$http","$log","$rootScope","$window","$timeout",function(e,t,o,i,n){var a={getMapImage:function(){if(!DISABLE_GOOGLE_MAPS&&(console.log("get map image"),trackJsInfo(i,"getMapImage"),articleData&&articleData.wikidataInfo&&articleData.wikidataInfo.geo&&articleData.wikidataInfo.geo.lat&&articleData.wikidataInfo.geo)){var e=a.getMapZoom();o.mapImageUrl="https://maps.googleapis.com/maps/api/staticmap?center="+articleData.wikidataInfo.geo.lat+","+articleData.wikidataInfo.geo.lon+"&zoom="+(e+3)+"&size=800x400";var t="<div id='miniMap' onClick='loadGoogleMaps();'><img class='map' src='"+o.mapImageUrl+"'/><img class='center'  src='/img/location.png'/><img style='margin-top:"+a.pseudoRand(articleData.wikidataInfo.geo.lat,173)+"px; margin-left:-"+a.pseudoRand(articleData.wikidataInfo.geo.lat,9)+"px;' src='/img/sub_location.png'/><img style='margin-top:-"+a.pseudoRand(articleData.wikidataInfo.geo.lat,3)+"px; margin-left:"+a.pseudoRand(articleData.wikidataInfo.geo.lat,829)+"px;' src='/img/sub_location.png'/><img style='margin-top:"+a.pseudoRand(articleData.wikidataInfo.geo.lat,631)+"px; margin-left:-"+a.pseudoRand(articleData.wikidataInfo.geo.lat,313)+"px;' src='/img/sub_location.png'/><img style='margin-top:-"+a.pseudoRand(articleData.wikidataInfo.geo.lat,11)+"px; margin-left:"+a.pseudoRand(articleData.wikidataInfo.geo.lat,2)+"px;' src='/img/sub_location.png'/></div>";0==$("#fullContent").html().length?o.$on("articleContentReadyFromShell",function(){a.displayMiniMap(t)}):a.displayMiniMap(t)}},displayMiniMap:function(e){console.log("display mini map"),n(function(){0<$(".ww_ib_1").length?$(".ww_ib_1").prepend('<tr><td colspan="12">'+e+"</td></tr>"):(0==$(".ww_ib_1").length&&0<$("#fullContent .portrait_img").length?$("#fullContent .portrait_img").after(e):$(".title_wrapper").after(e),$("#miniMap").addClass("float"))},10)},getMapZoom:function(){var e=1;if(articleData.wikidataInfo.geo.dimension){var t=articleData.wikidataInfo.geo.dimension;0<t&&(e=13),5<t&&(e=10),10<t&&(e=9),50<t&&(e=6),100<t&&(e=4),500<t&&(e=3),2e3<t&&(e=0)}return e},pseudoRand:function(e,t){return Math.round(3466732*e/t)%71/71*70}};return a}]);var maps_script,infoWindowLatch2=!1;if("undefined"!=typeof serverData)var DEBUG_GEO=serverData&&serverData.config&&"development"===serverData.config.environment;var fetchResultsDelay=500;function initializeGoogleMaps(){"function"==typeof $("body").scope().initMap?$("body").scope().initMap():setTimeout(initializeGoogleMaps,300)}function infoWindowMouseIn(){var e=$("#map_wrapper").scope();infoWindowLatch2=!0,e.testCloseInfoWindow()}function infoWindowMouseOut(){var e=$("#map_wrapper").scope();infoWindowLatch2=!1,e.testCloseInfoWindow()}function loadGoogleMaps(){maps_script?$("body").scope().map?$("body").scope().map.showMap=!0:setTimeout(loadGoogleMaps,300):((maps_script=document.createElement("script")).type="text/javascript",maps_script.src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=initializeGoogleMaps",document.body&&document.body.appendChild(maps_script))}function getObjectKeys(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o);return t}(app=angular.module("wikiwand")).controller("MapController",["$rootScope","$scope","Utilities","WikipediaApi","$timeout","$http","$window","MapHelper",function(a,p,e,t,o,i,h,r){var f,g,m=this;g=e.isTouchDevice()?(f="click",""):(f="mouseover","mouseout"),a.mapOut=function(){angular.element("#miniMap").removeClass("loading"),trackJsInfo(h,"mapOut")},p.testCloseInfoWindow=function(){o(function(){!1===p.infowindowLatch1&&!1===infoWindowLatch2&&p.infowindow.close()},500)},p.initializeMapController=function(){trackJsInfo(h,"initializeMapController"),o(function(){a.map={},a.map.exists=!!articleData.geo,a.map.exists,a.map.showMap=!1,p.infowindowLatch1=!1,infoWindowLatch2=!1,a.initMap=function(){o(function(){if(trackJsInfo(h,"initMap"),articleData&&articleData.wikidataInfo&&articleData.wikidataInfo.geo){a.map={},analytics.gaEvent("rich-map","opened"),angular.element("#miniMap").addClass("loading"),p.entries={};var e=new google.maps.LatLng(articleData.wikidataInfo.geo.lat,articleData.wikidataInfo.geo.lon),t=google.maps.MapTypeId.ROADMAP,o={zoom:r.getMapZoom()+2,center:e,mapTypeId:t,scrollwheel:!0},i=document.getElementById("map_canvas");i||(console.log("no map canvas"),trackJsInfo(h,"could not find map canvas")),p.map=new google.maps.Map(i,o),p.mainInfoWindow=new google.maps.InfoWindow({content:'<div class="main-map-infobox">'+articleData.title+"</div>",disableAutoPan:!0,zIndex:1e4});var n=new google.maps.Marker({position:e,map:p.map,title:"",name:articleData.title,icon:"//assets.wikiwand.com/img/location.png",zIndex:1e3,url:articleData.cache.key,draggable:!1});p.infowindow=new google.maps.InfoWindow({content:"infobox",disableAutoPan:!0,maxWidth:300,zIndex:10001}),google.maps.event.addListener(n,"click",function(){p.map.panTo(n.getPosition())}),google.maps.event.addListener(n,f,function(){infoWindowMouseOut(),p.mainInfoWindow.open(p.map,n)}),google.maps.event.addListener(n,g,function(){p.mainInfoWindow.close()}),google.maps.event.addListener(p.map,"center_changed",function(){m.mapChangeEvent()}),google.maps.event.addListener(p.map,"zoom_changed",function(){m.mapChangeEvent()}),a.map.showMap=!0,m.loadMarkersIntoMap()}},200)}},0)},m.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},m.showMapInfobox=function(n,a){var e=articleData.langCodeUrl;"zh-"===e.substr(0,3)&&0<=$.inArray(e,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])&&(e="zh");var t="https://"+e+".wikipedia.org/w/api.php";$.ajax({dataType:"jsonp",url:t,data:{action:"query",format:"json",prop:"extracts|pageimages|revisions|info",redirects:!0,exintro:!0,exsentences:2,explaintext:!0,piprop:"thumbnail",pithumbsize:320,rvprop:"timestamp",inprop:"watched",indexpageids:!0,titles:n.name},success:function(e){var t;if(null!=e.error)return a(null);var o=e.query.pageids[0],i=e.query.pages[o];return n.url,t="",t+='<div onMouseOver="infoWindowMouseIn();"  onMouseOut="infoWindowMouseOut();"   class="map-ocd unselectable"><div class="tooltipster-content"><div class="ocd-content">',null!=i.thumbnail&&(t+="<div class='image'><img src='"+m.escapeHtml(i.thumbnail.source)+"' onerror='this.style.display=\"none\"' /></div>"),null!=i.title&&(t+="<div class='title'>"+m.escapeHtml(i.title)+"</div>"),null!=i.extract?500<i.length?t+="<div class='text'>"+m.escapeHtml(i.extract)+"</div>":t+="<div class='text'>There are multiple articles with this name. Click to see disambiguation.</div>":t+="<div class='text'>There isn't an article for this place. Click to search Wikiwand.</div>",t+="<div class='read-full-article'><a href='"+n.url+"'  target='_blank'></a></div>",a(t+="</div></div></div>")},error:function(e,t,o){return a(null)}})},m.mapChangeEvent=function(){var e=(new Date).getTime();p.lastEventTime=e,o(m.testLastEvent,fetchResultsDelay+50)},m.testLastEvent=function(){if(p.lastEventTime){var e=(new Date).getTime()-p.lastEventTime;fetchResultsDelay<e?(p.infowindow.close(),m.loadMarkersIntoMap(),p.lastEventTime=null):o(m.testLastEvent,fetchResultsDelay+50)}},m.loadMarkersIntoMap=function(){var e=p.map.getCenter(),t=e.lat(),o=e.lng();if(!t||!o)return h.trackJs&&h.trackJs.track("Cannot find longitude/latitude from Google Maps data"),void console.error("Cannot find longitude/latitude from Google Maps data"+JSON.stringify(e));var i=t.toString(),n=o.toString(),a=p.map.getZoom(),r=Math.round(Math.max(Math.pow(16-a,3),1)),s=p.map.getBounds();try{var l=Math.abs(s.Da.j-s.Da.k);r=Math.round(60*l)}catch(e){}var c=articleData.langCodeUrl;"zh-"===c.substr(0,3)&&0<=$.inArray(c,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])&&(c="zh");var d="https://"+c+".wikipedia.org/w/api.php";if(console.log("Shown map radius: ",u+"km"),!(200<r)){var u=Math.min(1e3*r,1e4);$.ajax({dataType:"jsonp",url:d,data:{action:"query",format:"json",prop:"info|coordinates",inprop:"watchers",coprop:"type|name|dim|country|region",colimit:500,generator:"geosearch",ggsradius:u,ggscoord:i+"|"+n,ggslimit:500,ggsmaxdim:1e3,ggsprop:"type|name|country|region"},success:function(e){if(null!=e.error)return console.error("geolocation call: got error",e);if(!e.query)return console.info("geolocation call: no query",e);if(!e.query.pages)return console.info("geolocation call: no query.geosearch",e);var s=[];$.each(e.query.pages,function(e,t){if(!t.coordinates||0==t.coordinates.length)return!0;var o=t.coordinates[0],i="/"+articleData.langCodeUrl+"/"+t.title.replace(/ /g,"_"),n=t.title,a=t.watchers||0;if(null==i)return!0;if(i==articleData.rawArticlePath)return!0;if(!o.lat||!o.lon)return!0;var r={key:i,name:n,lat:o.lat,lon:o.lon,watchers:a};s.push(r)}),s.sort(function(e,t){return e.watchers-t.watchers}),s=s.slice(0,50),console.log("Received "+s.length+" entries");var i=[];$.each(s,function(e,t){if(p.entries[t.key])return!0;var o;p.entries[t.key]=!0,i[e]=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lon),map:p.map,title:"",name:t.name,icon:"//assets.wikiwand.com/img/sub_location.png",url:t.key,draggable:!1}),o=e,google.maps.event.addListener(i[o],f,function(){m.showMapInfobox(i[o],function(e){e?(p.infowindow.setContent(e),p.infowindow.open(p.map,i[o]),p.infowindowLatch1=!0):console.log("no html")})}),google.maps.event.addListener(i[o],g,function(){p.infowindowLatch1=!1,p.testCloseInfoWindow()})})},error:function(e,t,o){console.error("geolocation call: got error",t)}})}}}]),(app=angular.module("wikiwand")).service("ActivationServiceRev2",["$http","$rootScope","$timeout","$injector","ipCookie","Utilities",function(n,a,i,o,r,s){var t;!function(){if("/extension/thank-you"==location.pathname)return analytics.gaVirtualPageView("/virtualpageview/landing/referrer/installed/"+r("wikiwand_first_landing_referrer")),analytics.gaVirtualPageView("/virtualpageview/landing/page/installed/"+r("wikiwand_first_landing_page"));if(!r("wikiwand_first_landing_referrer")){var e=document.referrer.toLowerCase(),t="referral";-1==e.indexOf("google")&&-1==e.indexOf("yahoo")&&-1==e.indexOf("yandex")||(t="search"),""==e&&(t="direct"),r("wikiwand.extension.installed")&&(t="extension");var o="article_page";"/"==location.pathname&&(o="home_page"),r("wikiwand_first_landing_referrer",t,{path:"/",expires:30}),analytics.gaVirtualPageView("/virtualpageview/landing/referrer/impression/"+t),analytics.gaVirtualPageView("/virtualpageview/landing/page/impression/"+o),r("wikiwand_first_landing_page",o,{path:"/",expires:30})}}(),a.reportCopy=function(e,t,o){var i=!!t;e.keyCode&&67==e.keyCode&&e.ctrlKey&&(console.log("detected CTRL+C"),i=!0),"mouseup"==e.type&&2==e.button&&(console.log("detected right mouse click"),i=!0),i&&(console.log("reporting"),l.reportUserActivity({action:"sent",refID:a.activation.userID,type:o},function(e,t){e?console.log("failed to credit landing",e):(console.log("written user activity",t),analytics.gaVirtualPageViewIf(!0,"virtualpageview/payment/referal_sent_"+o),analytics.gaVirtualPageViewIf(!0,"virtualpageview/pay-"+a.cohort+"/referal_sent_"+o))}))};var l={reportUserActivity:function(e,t){var o=JSON.stringify(e);console.log("report user activity",o);var i=n({method:"post",url:"/api/reportUserActivity",data:o});i.success(function(e){return e.err?t(err,null):(console.log("success reporting user activity",e.data),t(null,null))}),i.error(function(){return t("error reporting user activity",null)})},getMyCredits:function(t){console.log("get my credits");var e=n({method:"post",url:"/api/user/getMyCredits",data:{userID:a.activation.userID}});e.success(function(e){return t(e.err,e.data)}),e.error(function(){return t("error in get my credits api call",null)})},loadState:function(){if(console.log("in load state"),a.walkthrough={},a.activation={},localStorage.wikiwand_activation)try{a.activation=angular.fromJson(localStorage.wikiwand_activation)}catch(e){$window.trackJs&&(trackJsInfo($window,"activation json string is "+localStorage.wikiwand_activation),$window.trackJs.track("problem parsing activation",exception.message))}if(localStorage.wikiwand_walkthrough)try{a.walkthrough=angular.fromJson(localStorage.wikiwand_walkthrough)}catch(e){$window.trackJs&&(trackJsInfo($window,"wikiwand_walkthrough json string is "+localStorage.wikiwand_walkthrough),$window.trackJs.track("problem parsing wikiwand_walkthrough",exception.message))}a.activation.showShare=!1,a.activation.instructions=!1,a.lightboxOpened=!1,a.extPopShow=!1,a.extPopAnim=!1,0!=a.walkthrough.new_visitor&&(a.walkthrough.new_visitor=1!=a.activation.extensionInstalled),a.activation.extensionInstalled&&"Chrome"==serverData.agent.family&&-1==document.location.search.indexOf("in_iframe")?a.activation.showSwitchToWikipedia=!0:a.activation.showSwitchToWikipedia=!1;var e=-1<document.location.search.indexOf("debug_fast=1")?3:15;serverData.callToInstallExtension&&$(document).one("mousemove",function(){i(function(){var e=-1!==document.cookie.indexOf("wikiwand.extension.installed"),t=-1!==document.cookie.indexOf("wikiwand.extension.popupAlreadyShown");e||t||(console.log("showing popup"),r("wikiwand.extension.popupAlreadyShown","true",{path:"/",expires:5}),a.extPopShow||a.lightboxOpened||(serverData&&serverData.settings&&serverData.settings.monPlus&&(a.extPopShow=!0),a.lightboxOpened=!0,a.extPopAnim=!0))},1e3*e)}),serverData.callToPersonalize;var t=function(e){r("wikiwand.activation.first_impression")||(r("wikiwand.activation.first_impression",e,{path:"/",expires:1}),analytics.gaVirtualPageView("/virtualpageview/article-promo/impression/"+e))};if("/extension/thank-you"==location.pathname)analytics.gaVirtualPageView("/virtualpageview/article-promo/install-complete/"+(r("wikiwand.activation.first_impression")||"external-source"));else if("/"==location.pathname)t("homepage");else if(articleData&&articleData.rawArticlePath){t("promo_"+(r("wikiwand.activation.article_promo_name")||"unknown"))}else t("other-page");l.normalizeData();try{o.get("userPreferences").updatePageStyle("update")}catch(e){}},normalizeData:function(){if(a.activation||(a.activation={}),r("wikiwand.extension.installed")?(a.activation.extensionInstalled||(a.activation.installTime=(new Date).getTime()),a.activation.extensionInstalled=!0):a.activation.extensionInstalled=!1,!a.activation.userID){console.log("creating new user ID");var e=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=0;o<8;o++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();a.activation.userID=e,0==a.activation.extensionInstalled&&("/"==window.location.pathname?(console.log("new user homepage"),analytics.gaVirtualPageView("virtualpageview/landing/homepage")):(console.log("new user article page"),analytics.gaVirtualPageView("virtualpageview/landing/article-page")))}r("wikiwand.userID",a.activation.userID,{path:"/",expires:1e5}),a.refString="%3Fref%3D"+a.activation.userID,r("reset-referal")&&(console.log("resetting referal"),a.activation.userRefererNew=null,a.activation.userReferralCredited=!1,a.activation.userFollowCredited=!1,a.activation.achievedReferralCredits=!1,r.remove("wikiwand.userRefererNew",{path:"/"}),r.remove("reset-referal",{path:"/"})),console.log("activation state",a.activation),r("wikiwand.userRefererNew")&&!a.activation.userRefererNew&&(console.log("setting user referer"),a.activation.userRefererNew=r("wikiwand.userRefererNew"),a.activation.userReferralCredited=!1,a.activation.userFollowCredited=!1,r.remove("wikiwand.userRefererNew",{path:"/"}),console.log("saved referer")),a.activation.userRefererNew&&1!=a.activation.userReferralCredited&&a.activation.userRefererNew!=a.activation.userID&&(1==a.activation.extensionInstalled?(a.activation.userReferralCredited=!0,l.reportUserActivity({action:"install",refID:a.activation.userRefererNew,"http-ref":r("wikiwand.userHTTP_Referer")},function(e,t){e?console.log("failed to credit referral",e):(console.log("marking as credited"),analytics.gaVirtualPageViewIf(!0,"virtualpageview/payment/referal_install"),analytics.gaVirtualPageViewIf(!0,"virtualpageview/pay-"+a.cohort+"/referal_install"),l.saveState())})):1!=a.activation.userFollowCredited&&(a.activation.userFollowCredited=!0,l.reportUserActivity({action:"landing",refID:a.activation.userRefererNew,"http-ref":r("wikiwand.userHTTP_Referer")},function(e,t){e?console.log("failed to credit landing",e):(analytics.gaVirtualPageViewIf(!0,"virtualpageview/payment/referal_landing"),analytics.gaVirtualPageViewIf(!0,"virtualpageview/pay-"+a.cohort+"/referal_landing"),l.saveState())}))),a.activation.browser=serverData.agent.family?serverData.agent.family:"Other",-1<serverData.agent.string.indexOf("OPR")&&(a.activation.browser="Opera"),a.activation.windows=-1<serverData.agent.os.family.indexOf("Windows"),a.activation.touch=!!s.isTouchDevice(),a.activation.viewedPages?-1==document.location.search.indexOf("in_iframe")&&a.activation.viewedPages++:a.activation.viewedPages=1,null==a.activation.joined&&(a.activation.joined=(new Date).getTime());var t=(new Date).getTime();if(a.activation.vetek=Math.round((t-a.activation.joined)/864e5,1),1<=a.activation.vetek&&(localStorage.wikiwand_last_save=(new Date).getTime()),null==a.activation.installextension&&(a.activation.installextension={},a.activation.installextension.random=Math.round(10*Math.random(),1),a.activation.installextension.randomText=Math.round(100*Math.random(),1),a.activation.installextension.finished=!1),a.activation.ABRateShare||(a.activation.ABRateShare=Math.round(10*Math.random(),1)),null==a.activation.rateextension&&(a.activation.rateextension={},a.activation.rateextension.finished=!1),a.activation.nextAction||(a.activation.nextAction="activation_install"),1==a.activation.extensionInstalled&&(0<a.activation.ABRateShare&&a.activation.vetek<10&&a.activation.nextAction,a.activation.nextAction="activation_share"),0==a.activation.extensionInstalled&&(a.activation.nextAction="activation_install"),"Other"==a.activation.browser&&(a.activation.nextAction="activation_share"),1==a.activation.touch&&(a.activation.nextAction="activation_share"),a.inFrame=-1<document.location.search.indexOf("in_iframe"),a.inFrame&&(a.activation.nextAction=""),a.activation.ratedText="","Chrome"==a.activation.browser&&(a.activation.ratedText="Rated <span>&#9733;&#9733;&#9733;&#9733;&#9733;</span> on the Chrome Web Store"),"Firefox"==a.activation.browser&&(a.activation.ratedText="Rated <span>&#9733;&#9733;&#9733;&#9733;&#9733;</span> on Mozilla Add-ons"),"Safari"==a.activation.browser&&(a.activation.ratedText="Featured on the Safari extensions gallery"),"activation_install"==a.activation.nextAction){switch(a.activation.installextension.randomText%3+1){case 1:a.activation.text="Upgrade Wikipedia";break;case 2:a.activation.text="Install Wikiwand";break;case 3:a.activation.text="Get Wikiwand";break;default:a.activation.text="Upgrade Wikipedia"}a.activation.tooltip="Click to install Wikiwand",a.activation.installextension.popupHeadline="Install our extension to set Wikiwand as your default Wikipedia interface",articleData.title&&analytics.gaVirtualPageView("virtualpageview/install-impression/"+a.activation.text.split(" ").join("-"))}"activation_rate"==a.activation.nextAction&&(a.activation.tooltip="Click to rate",a.activation.text="Rate us",a.activation.nextAction="activation_share"),"activation_share"===a.activation.nextAction&&(a.activation.tooltip="Tell a friend",a.activation.text="Tell a friend",a.activation.toolbarText=""),l.saveState()},saveState:function(){localStorage.wikiwand_activation=angular.toJson(a.activation),localStorage.wikiwand_walkthrough=angular.toJson(a.walkthrough)},extensionPopup:function(e){"activation_install"===a.activation.nextAction&&("enter"===e&&(t=i(function(){a.extPopShow=!0,a.lightboxOpened=!0,i(function(){a.extPopAnim=!0},10),analytics.gaVirtualPageView("virtualpageview/install-popup/"+a.activation.text.split(" ").join("-"))},500)),"leave"===e&&i.cancel(t),"click"===e&&(serverData.callToInstallExtension?analytics.gaVirtualPageView("/virtualpageview/article-promo-lightbox/install-click"):serverData.callToPersonalize&&analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/install-click"),1==a.activation.instructions&&(a.extPopShow=!0,a.lightboxOpened=!0,t=i(function(){a.extPopAnim=!0},10)))),"clickClose"===e&&(i.cancel(t),a.extPopAnim=!1,i(function(){a.extPopShow=!1,a.activation.instructions=!1},500))},activationButtonClicked:function(e){var t,o;if(console.log(e),e&&""!==e&&e,"activation_share"===a.activation.nextAction&&(analytics.gaEvent("activation","share-click",a.activation.browser),analytics.gaVirtualPageView("virtualpageview/share-click"),analytics.gaVirtualPageView("virtualpageview/invites/clicked"),a.activation.showShare=!0,i(function(){a.activation.animShare=!0},100)),"activation_rate"===a.activation.nextAction&&("Chrome"===a.activation.browser&&(t="https://chrome.google.com/webstore/detail/wikiwand-wikipedia-modern/emffkefkbkpkgpdeeooapgaicgmcbolj/reviews"),"Firefox"===a.activation.browser&&(t="https://addons.mozilla.org/en-US/firefox/addon/wikiwand-wikipedia-modernized/reviews/add"),analytics.gaEvent("activation","rate-click",serverData.agent.family),analytics.gaVirtualPageView("virtualpageview/rate-click"),o&&o.close(),o=window.open(t,"_blank"),a.activation.rateextension.finished=!0,a.activation.nextAction="activation_share"),"activation_install"===a.activation.nextAction)switch(analytics.gaEvent("activation","install-click",a.activation.vetek),analytics.gaVirtualPageView("virtualpageview/install-click/"+a.activation.text.split(" ").join("-")),o&&o.close(),a.activation.browser){case"Opera":t="/extension/install-wikiwand-on-opera",o=window.open(t,"_blank"),analytics.gaVirtualPageView("virtualpageview/install-chrome-opera");break;case"Chrome":t="https://chrome.google.com/webstore/detail/wikiwand-wikipedia-modern/emffkefkbkpkgpdeeooapgaicgmcbolj",a.activation.nextAction="activation_share",analytics.gaVirtualPageView("virtualpageview/install-chrome-store"),a.activation.installextension.finished=!0,i(function(){window.location=t},500);break;case"Firefox":t="https://addons.mozilla.org/en-US/firefox/addon/wikiwand-wikipedia-modernized/",o=window.open(t,"_blank"),a.activation.nextAction="activation_share",a.activation.installextension.finished=!0,analytics.gaVirtualPageView("virtualpageview/install-firefox-store");break;case"Safari":a.activation.instructions=!0,a.extensionPopup("click"),analytics.gaVirtualPageView("virtualpageview/install-safari-inline"),t="//assets.wikiwand.com/extension/safari/wikiwand.safariextz",setTimeout(function(){o=window.open(t,"_self")},2e3),a.activation.installextension.finished=!0,a.activation.nextAction="activation_share"}else a.extPopShow=!1;l.normalizeData()},new_visitor_fold_clicked:function(){a.walkthrough.new_visitor=!1,l.normalizeData()}};return l}]),(app=angular.module("wikiwand")).service("TestingService",["$http","$rootScope","$timeout","ipCookie","Utilities",function(e,f,t,o,i){return{initializeTests:function(){var e=-1<window.location.search.indexOf("debug_tests=1"),t={};if(f.cohorts={mon_footer:"none",mon_footer_b:"none",mon_bottom:"none",mon_ocd:"none",mon_p:"none"},serverData.settings&&serverData.settings.tests){for(var o in e&&jQuery.isEmptyObject(serverData.settings.tests)&&console.warn("Tests settings not loaded from database yet, please retry in a few seconds"),serverData.settings.tests){var i=serverData.settings.tests[o],n=0,a={name:o,options:[]};for(var r in i){var s=i[r],l=n,c=Math.min(l+s,100);n=c,a.options.push({min:l,max:c,val:r})}n<100&&a.options.push({min:n,max:100,val:"none"}),t[a.name]=a}for(var d in e&&console.info("Tests:",t),t){var u="wikiwand_test_"+(a=t[d]).name;localStorage[u]||(localStorage[u]=Math.floor(100*Math.random()));var p=localStorage[u];for(var d in a.options){var h=a.options[d];if(h.min!=h.max&&(p>=h.min&&p<h.max)){f.cohorts[a.name]=h.val;break}}}e&&console.info("User Cohorts:",f.cohorts)}}}}]);var adsenseInstallClick=function(){console.log("adsense install clicked");var e=$("body").scope();e.activation.nextAction,e.reportClick("below-adsense"),e.activationButtonClicked(""),analytics.gaVirtualPageView("virtualpageview/install-below-adsense-clicked")};function getWatchers(e){function n(e){return e&&e.$$watchers||[]}return function t(e){var o=n(e.data().$isolateScope),i=n(e.data().$scope).concat(o);return angular.forEach(e.children(),function(e){i=i.concat(t(angular.element(e)))}),i}(e=angular.element(e||document.documentElement))}function sw(){return getWatchers().length}(app=angular.module("wikiwand")).service("MonService",["$http","$rootScope","$timeout","ipCookie","Utilities",function(e,a,o,t,i){var n=-1<window.location.search.indexOf("debug_from_search=1");return{initMonService:function(){if(!precache_from_extension&&serverData.settings&&serverData.settings.monPlus){n&&console.log("MonService: started");var t="none";if(serverData.settings&&serverData.settings.monPlus&&(t="adsense"),"adsense"==t){articleData.taboo?(t="none",n&&console.log("MonService: Will not use AdSense due to taboo content"),analytics.gaVirtualPageView("virtualpageview/monetization/strategy/none-taboo")):-1==$.inArray(articleData.langCodeUrl,["ar","arz","el","ro","bg","he","ru","zh","zh-hans","zh-hant","zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","hi","sr","hu","sk","hr","id","sl","cs","it","es","da","ja","sv","nl","ko","th","en","simple","lv","tr","et","lt","uk","fi","no","nn","vi","fr","pl","de","pt"])?(t="none",n&&console.log("MonService: Will not use AdSense due to unsupported language"),analytics.gaVirtualPageView("virtualpageview/monetization/strategy/none-lang")):analytics.gaVirtualPageView("virtualpageview/monetization/strategy/adsense")}n&&console.info("Selected footer monetization:",t),"adsense"==t&&a.$on("articleContentReadyFromShell",function(){n&&console.info("Loading AdSense");var r=function(e,t,o){var i='<div class="install"><a href="javascript:void(0);" onclick="adsenseInstallClick();">Install Wikiwand to remove all ads</a></div>';1==a.activation.touch&&(i="");var n='<script>(adsbygoogle = window.adsbygoogle || []).push({});<\/script><div class="bnr-adsense '+e+'"><div class="wrappers">'+o+"</div>";return t&&(n+=i),n+="</div>"};o(function(){var e=r("sky",!1,'<ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="2726044164"></ins>');$("#fullContent").eq(0).prepend(e);var t=r("top",!0,'<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9383599848936891" data-ad-slot="5958712165" data-ad-format="auto"></ins>');$("#fullContent").eq(0).prepend(t);var o=r("after2",!0,'<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="4143901763"></ins>');$("#fullContent section").eq(1).append(o);var i=r("after3",!0,'<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9383599848936891" data-ad-slot="6877042168" data-ad-format="auto"></ins>');$("#fullContent section").eq(2).append(i);var n=r("tocbnr",!1,'<ins class="adsbygoogle" style="display:inline-block;width:180px;height:150px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="6534658165"></ins>');$("#toc_wrapper").append(n),$("#wikiwand_toc").addClass("with_bnr"),$(document).ready(function(){var t=$(".bnr-adsense.sky").offset().top+400;$(window).on("scroll",function(){var e=$(this).scrollTop();t<e?$("#fixed_bnr").addClass("open"):$("#fixed_bnr").removeClass("open")})});var a=r("fixedbottom",!0,'<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="8650519762"></ins>');$("#content").append('<div id="fixed_bnr">'+a+"</div>")}),jQuery.getScript("//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",function(e,t,o){200==o.status?n&&console.log("MonService: AdSense loaded successfully"):console.log("MonService: AdSense load failed: ",o.status,"/",e,"/",t)})}),"none"!=t?$(window).load(function(){var e=!0;"adsense"==t&&(e=0<$(".adsbygoogle iframe").length),n&&console.log("MonService: Ads are "+(e?"VISIBLE":"BLOCKED")),analytics.gaVirtualPageView("virtualpageview/monetization/visibility/adsense/"+(e?"visible":"blocked")),e||$(".bnr-adsense").hide()}):n&&console.log("MonService: not loading any ads")}}}}]),(app=angular.module("wikiwand")).service("Utilities",function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/(iphone|ipod|ipad)/)||e.match(/(android)/)||e.match(/(iemobile)/)||e.match(/iphone/i)||e.match(/ipad/i)||e.match(/ipod/i)||e.match(/blackberry/i)||e.match(/bada/i),o=!1;return document.documentMode&&(o=!0),{isItInternetExplorer:function(){return o},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isTouchDevice:function(){return t},agent:serverData.agent}});var getFacebookSdkLocale=function(){var e={en:"en_US",de:"de_DE",fr:"fr_FR",ja:"ja_JP",es:"es_LA",ru:"ru_RU",zh:"zh_CN","zh-tw":"zh_TW","zh-hk":"zh_HK","zh-mo":"zh_CN","zh-sg":"zh_CN","zh-cn":"zh_CN","zh-hant":"zh_TW","zh-hans":"zh_CN",it:"it_IT",th:"th_TH",pt:"pt_BR",ar:"ar_AR",pl:"pl_PL",nl:"nl_NL",id:"id_ID",sv:"sv_SE",fa:"fa_IR",uk:"uk_UA",hu:"hu_HU",vi:"vi_VN",da:"da_DK",he:"he_IL"},t="en_US",o="undefined"!=typeof articleData?articleData.langCodeUrl:"en";return e[o]&&(t=e[o]),t};app.config(["FacebookProvider",function(e){var t="823404911083396",o=getFacebookSdkLocale();e.setLocale(o),console.log("init facebook provider with app id",t),e.init(t)}]),app.service("userService",["$timeout","$http","Facebook","$rootScope","ipCookie",function(e,n,a,r,t){r.facebookInitialized=!1;var s="object"==typeof userData,l=!1,i=!1;r.initializedUser=!1,r.user={};r.$on("Facebook:load",function(){r.facebookInitialized=!0});var c=function(t){s&&(l=!0,localStorage.removeItem("wikiwand.user.authenticated"),n.get("/api/nouser/logout",{dataType:"json",cache:!1}).then(function(e){userData=e.data,"function"==typeof t&&t(null,userData)}))},d=function(i){s&&a.getLoginStatus(function(e){if("not_authorized"==e.status)userData&&userData.logins&&userData.logins&&userData.logins.facebook.isActive?c(i):i(null,userData);else if("connected"==e.status){var t=function(){if(s){var o={stats:{topLangsUsed:{},pagesViewed:null,dateJoined:null},settings:{favoriteLangs:[],clientPrefs:null}};try{var i=JSON.parse(localStorage.wikiwand_languages_rev2);Object.keys(i).forEach(function(e){var t=i[e];t.fav&&o.settings.favoriteLangs.push(t.lang),o.stats.topLangsUsed[t.lang]=t.count})}catch(e){console.log("Error while parsing wikiwand_languages_rev2",e)}try{o.settings.clientPrefs=JSON.parse(localStorage.wikiwand_user_prefs)}catch(e){console.log("Error while parsing wikiwand_user_prefs",e)}try{var e=JSON.parse(localStorage.wikiwand_activation);o.stats.dateJoined=e.joined?new Date(e.joined).toISOString():null,o.stats.pagesViewed=e.viewedPages}catch(e){console.log("Error while parsing wikiwand_activation",e)}return o}}(),o={authResponse:e.authResponse,userInfo:t};n.get("/api/user/facebook-authenticated",{dataType:"json",params:{data:JSON.stringify(o)},cache:!1}).then(function(e){l?c(function(e,t){i(null,t)}):(userData=e.data,localStorage.setItem("wikiwand.user.authenticated",e.data.userId+"/"+(new Date).getTime().toString()),"function"==typeof i&&i(null,e.data))})}else i(null,userData)})},u=function(){s&&(r.user=userData,2==userData.permissions.role&&(r.user.isAdmin=!0),r.$broadcast("userStatusUpdated",{user:r.user}))},p=null;return s&&(u(),function(e){if(s){var t=!1,o=localStorage.getItem("wikiwand.user.authenticated");if(o){var i=o.split("/");if(2==i.length){i[0];var n=parseInt(i[1]);36e5<(new Date).getTime()-n&&(t=!0)}userData.logins.facebook&&userData.logins.facebook.isActive||(t=!0)}t?d(e):e(null,userData)}}(function(e,t){u(),e||(r.initializedUser=!0)})),{onUserInitialized:function(e){s&&r.$watch("initializedUser",function(){r.initializedUser&&e(null,null)})},getUserCohort:function(e){if(!p){var t="";if(userData)t=userData.userId;else{var o=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage;t=navigator.userAgent.slice(-40)+"|"+o.slice(-40)+"|"+window.screen.width+"|"+window.screen.height}var i=(n="j9Qt"+e+"8jW"+t+"mYo4Ua",Math.abs(function(e){var t,o,i=0;if(0===e.length)return i;for(t=0,o=e.length;t<o;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return i}(n)));p=i%100}var n;return p},loginToFacebook:function(t,o){if(s){if(l=!1,!s||!i&&!(i=a&&a.isReady()))return o("Facebook is not loaded yet, please try again shortly");a.login(function(e){"connected"==e.status&&("function"==typeof t&&t(),d(function(e,t){userData=t,u(),"function"==typeof o&&o(e,t)}))},{scope:["public_profile","email","user_friends"]})}},logoutFromFacebook:c,isLoggedIn:function(){return!!s&&!!(r.user&&r.user.logins&&r.user.logins.facebook&&1==r.user.logins.facebook.isActive)},saveUserKVP:function(t,o,i){var e={category:t,key:o,val:i};n.post("/api/user/set-kvp",e).success(function(e){console.log("setUserKVP successfully: ",t+"."+o+" = "+i+" / setting KVP to: ",e.kvp),r.user.kvp=e.kvp}).error(function(e){console.log("setUserKVP error for ",t+"."+o+" = "+i+": ",e)})}}}]),app.controller("UserController",["$scope","$timeout","$http","Facebook","$rootScope","ipCookie","userService",function(e,t,o,i,n,a,r){n.editMode=!0;var s=function(){e.userManagementEnabled&&(e.userOperationInProgress=!1,e.userConnected=userData&&userData.logins&&userData.logins.facebook&&userData.logins.facebook.isActive?"facebook":null)};e.bookmarksFacebookLoginButtonClick=function(){console.log("facebook connect"),n.bookmarksProgressIndicator=!0,n.bookmarksConnectClicked=!0,analytics.gaEvent("bookmarks","connect","click"),analytics.gaVirtualPageView("virtualpageview/bookmarks/connect/click"),e.userManagementEnabled&&r.loginToFacebook(function(){e.userOperationInProgress=!0},function(e,t){if(e)return console.error(e);s()})},n.facebookLoginButtonClick=function(o){e.userManagementEnabled&&(o=o||function(){},r.loginToFacebook(function(){e.userOperationInProgress=!0},function(e,t){return e?console.error(e):(s(),o(e,t))}))},e.logoutButtonClick=function(){e.userManagementEnabled&&(e.userOperationInProgress=!0,r.logoutFromFacebook(function(e,t){if(e)return console.error(e);s()}))},console.log("UserController: initializing"),e.userManagementEnabled="object"==typeof userData,e.userManagementEnabled&&(s(),r.onUserInitialized(function(e,t){if(e)return console.error(e);s()}))}]);
//# sourceMappingURL=wikiwand.early.min.d470c7d7.js.map